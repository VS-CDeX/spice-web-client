window.Modernizr=function(t,u,n){function e(t){c.cssText=t}function i(t,e){return typeof t===e}var r,s,o={},l=u.documentElement,p="modernizr",a=u.createElement(p),c=a.style,h=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",f=d.split(" "),g=d.toLowerCase().split(" "),m={},_=[],w=_.slice,S=function(t,e,i,n){var r,s,o,a=u.createElement("div"),c=u.body,h=c||u.createElement("body");if(parseInt(i,10))for(;i--;)(o=u.createElement("div")).id=n?n[i]:p+(i+1),a.appendChild(o);return r=["&#173;",'<style id="s',p,'">',t,"</style>"].join(""),a.id=p,(c?a:h).innerHTML+=r,h.appendChild(a),c||(h.style.background="",l.appendChild(h)),s=e(a,t),c?a.parentNode.removeChild(a):h.parentNode.removeChild(h),!!s},y={}.hasOwnProperty;for(var b in s=i(y,"undefined")||i(y.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return y.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(n){var r=this;if("function"!=typeof r)throw new TypeError;var s=w.call(arguments,1),o=function(){if(this instanceof o){var t=function(){};t.prototype=r.prototype;var e=new t,i=r.apply(e,s.concat(w.call(arguments)));return Object(i)===i?i:e}return r.apply(n,s.concat(w.call(arguments)))};return o}),m.canvas=function(){var t=u.createElement("canvas");return!!t.getContext&&!!t.getContext("2d")},m.webgl=function(){return!!t.WebGLRenderingContext},m.touch=function(){var e;return"ontouchstart"in t||t.DocumentTouch&&u instanceof DocumentTouch?e=!0:S(["@media (",h.join("touch-enabled),("),p,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){e=9===t.offsetTop}),e},m.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},m)s(m,b)&&(r=b.toLowerCase(),o[r]=m[b](),_.push((o[r]?"":"no-")+r));return o.addTest=function(t,e){if("object"==typeof t)for(var i in t)s(t,i)&&o.addTest(i,t[i]);else{if(t=t.toLowerCase(),o[t]!==n)return o;e="function"==typeof e?e():e,l.className+=" "+(e?"":"no-")+t,o[t]=e}return o},e(""),a=null,function(t,c){function h(){var t=f.elements;return"string"==typeof t?t.split(" "):t}function u(t){var e=a[t[n]];return e||(e={},o++,t[n]=o,a[o]=e),e}function l(t,e,i){return e||(e=c),d?e.createElement(t):(i||(i=u(e)),(n=i.cache[t]?i.cache[t].cloneNode():s.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t)).canHaveChildren&&!r.test(t)?i.frag.appendChild(n):n);var n}function e(t){t||(t=c);var e,i,n,r,s,o,a=u(t);return f.shivCSS&&!p&&!a.hasCSS&&(a.hasCSS=(r="article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}",s=(n=t).createElement("p"),o=n.getElementsByTagName("head")[0]||n.documentElement,s.innerHTML="x<style>"+r+"</style>",!!o.insertBefore(s.lastChild,o.firstChild))),d||(e=t,(i=a).cache||(i.cache={},i.createElem=e.createElement,i.createFrag=e.createDocumentFragment,i.frag=i.createFrag()),e.createElement=function(t){return f.shivMethods?l(t,e,i):i.createElem(t)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(t){return i.createElem(t),i.frag.createElement(t),'c("'+t+'")'})+");return n}")(f,i.frag)),t}var p,d,i=t.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,s=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,n="_html5shiv",o=0,a={};!function(){try{var t=c.createElement("a");t.innerHTML="<xyz></xyz>",p="hidden"in t,d=1==t.childNodes.length||function(){c.createElement("a");var t=c.createDocumentFragment();return void 0===t.cloneNode||void 0===t.createDocumentFragment||void 0===t.createElement}()}catch(t){d=p=!0}}();var f={elements:i.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!1!==i.shivCSS,supportsUnknownElements:d,shivMethods:!1!==i.shivMethods,type:"default",shivDocument:e,createElement:l,createDocumentFragment:function(t,e){if(t||(t=c),d)return t.createDocumentFragment();for(var i=(e=e||u(t)).frag.cloneNode(),n=0,r=h(),s=r.length;n<s;n++)i.createElement(r[n]);return i}};t.html5=f,e(c)}(this,u),o._version="2.6.0",o._prefixes=h,o._domPrefixes=g,o._cssomPrefixes=f,o.testStyles=S,l.className=l.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+_.join(" "),o}(this,this.document),function(t,p,e){function l(t){return"[object Function]"==s.call(t)}function d(t){return"string"==typeof t}function f(){}function g(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function m(){var t=y.shift();b=1,t?t.t?w(function(){("c"==t.t?_.injectCss:_.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),m()):b=0}function i(t,e,i,n,r){return b=0,e=e||"j",d(t)?function(i,n,t,e,r,s,o){function a(t){if(!h&&g(c.readyState)&&(l.r=h=1,!b&&m(),c.onload=c.onreadystatechange=null,t))for(var e in"img"!=i&&w(function(){I.removeChild(c)},50),T[n])T[n].hasOwnProperty(e)&&T[n][e].onload()}o=o||_.errorTimeout;var c={},h=0,u=0,l={t:t,s:n,e:r,a:s,x:o};1===T[n]&&(u=1,T[n]=[],c=p.createElement(i)),"object"==i?c.data=n:(c.src=n,c.type=i),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){a.call(this,u)},y.splice(e,0,l),"img"!=i&&(u||2===T[n]?(I.insertBefore(c,E?null:S),w(a,o)):T[n].push(c))}("c"==e?h:c,t,e,this.i++,i,n,r):(y.splice(this.i++,0,t),1==y.length&&m()),this}function a(){var t=_;return t.loader={load:i,i:0},t}var n,_,r=p.documentElement,w=t.setTimeout,S=p.getElementsByTagName("script")[0],s={}.toString,y=[],b=0,o="MozAppearance"in r.style,E=o&&!!p.createRange().compareNode,I=E?r:S.parentNode,c=(r=t.opera&&"[object Opera]"==s.call(t.opera),r=!!p.attachEvent&&!r,o?"object":r?"script":"img"),h=r?"script":c,v=Array.isArray||function(t){return"[object Array]"==s.call(t)},C=[],T={},A={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};(_=function(t){function u(t,e,i,n,r){var s=function(t){t=t.split("!");var e,i,n,r=C.length,s=t.pop(),o=t.length;for(s={url:s,origUrl:s,prefixes:t},i=0;i<o;i++)n=t[i].split("="),(e=A[n.shift()])&&(s=e(s,n));for(i=0;i<r;i++)s=C[i](s);return s}(t),o=s.autoCallback;s.url.split(".").pop().split("?").shift(),s.bypass||(e&&(e=l(e)?e:e[t]||e[n]||e[t.split("/").pop().split("?")[0]]||m),s.instead?s.instead(t,e,i,n,r):(T[s.url]?s.noexec=!0:T[s.url]=1,i.load(s.url,s.forceCSS||!s.forceJS&&"css"==s.url.split(".").pop().split("?").shift()?"c":void 0,s.noexec,s.attrs,s.timeout),(l(e)||l(o))&&i.load(function(){a(),e&&e(s.origUrl,r,n),o&&o(s.origUrl,r,n),T[s.url]=2})))}function e(t,e){function i(i,t){if(i){if(d(i))t||(a=function(){var t=[].slice.call(arguments);c.apply(this,t),h()}),u(i,a,e,0,s);else if(Object(i)===i)for(r in n=function(){var t,e=0;for(t in i)i.hasOwnProperty(t)&&e++;return e}(),i)i.hasOwnProperty(r)&&(!t&&!--n&&(l(a)?a=function(){var t=[].slice.call(arguments);c.apply(this,t),h()}:a[r]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),h()}}(c[r])),u(i[r],a,e,r,s))}else!t&&h()}var n,r,s=!!t.test,o=t.load||t.both,a=t.callback||f,c=a,h=t.complete||f;i(s?t.yep:t.nope,!!o),o&&i(o)}var i,n,r=this.yepnope.loader;if(d(t))u(t,0,r,0);else if(v(t))for(i=0;i<t.length;i++)d(n=t[i])?u(n,0,r,0):v(n)?_(n):Object(n)===n&&e(n,r);else Object(t)===t&&e(t,r)}).addPrefix=function(t,e){A[t]=e},_.addFilter=function(t){C.push(t)},_.errorTimeout=1e4,null==p.readyState&&p.addEventListener&&(p.readyState="loading",p.addEventListener("DOMContentLoaded",n=function(){p.removeEventListener("DOMContentLoaded",n,0),p.readyState="complete"},0)),t.yepnope=a(),t.yepnope.executeStack=m,t.yepnope.injectJs=function(t,e,i,n,r,s){var o,a,c=p.createElement("script");n=n||_.errorTimeout;for(a in c.src=t,i)c.setAttribute(a,i[a]);e=s?m:e||f,c.onreadystatechange=c.onload=function(){!o&&g(c.readyState)&&(o=1,e(),c.onload=c.onreadystatechange=null)},w(function(){o||e(o=1)},n),r?c.onload():S.parentNode.insertBefore(c,S)},t.yepnope.injectCss=function(t,e,i,n,r,s){var o;n=p.createElement("link"),e=s?m:e||f;for(o in n.href=t,n.rel="stylesheet",n.type="text/css",i)n.setAttribute(o,i[o]);r||(S.parentNode.insertBefore(n,S),w(e,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("websocketsbinary",function(){var t,e="https:"==location.protocol?"wss":"ws";if("WebSocket"in window){if(t="binaryType"in WebSocket.prototype)return t;try{return!!new WebSocket(e+"://.").binaryType}catch(t){}}return!1}),function(f,I){var i,e,_=typeof I,t=f.location,g=f.document,n=g.documentElement,r=f.jQuery,s=f.$,o={},a=[],c="2.0.3",m=a.concat,h=a.push,u=a.slice,l=a.indexOf,p=o.toString,w=o.hasOwnProperty,d=c.trim,yt=function(t,e){return new yt.fn.init(t,e,i)},S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,v=/\S+/g,y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^-ms-/,C=/-([\da-z])/gi,T=function(t,e){return e.toUpperCase()},A=function(){g.removeEventListener("DOMContentLoaded",A,!1),f.removeEventListener("load",A,!1),yt.ready()};function x(t){var e=t.length,i=yt.type(t);return!yt.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||"function"!==i&&(0===e||"number"==typeof e&&0<e&&e-1 in t)))}yt.fn=yt.prototype={jquery:c,constructor:yt,init:function(t,e,i){var n,r;if(!t)return this;if("string"!=typeof t)return t.nodeType?(this.context=this[0]=t,this.length=1,this):yt.isFunction(t)?i.ready(t):(t.selector!==I&&(this.selector=t.selector,this.context=t.context),yt.makeArray(t,this));if(!(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length?[null,t,null]:y.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof yt?e[0]:e,yt.merge(this,yt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:g,!0)),b.test(n[1])&&yt.isPlainObject(e))for(n in e)yt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(r=g.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=g,this.selector=t,this},selector:"",length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?this.toArray():t<0?this[this.length+t]:this[t]},pushStack:function(t){var e=yt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return yt.each(this,t,e)},ready:function(t){return yt.ready.promise().done(t),this},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},map:function(i){return this.pushStack(yt.map(this,function(t,e){return i.call(t,e,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},yt.fn.init.prototype=yt.fn,yt.extend=yt.fn.extend=function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,c=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[1]||{},a=2),"object"==typeof o||yt.isFunction(o)||(o={}),c===a&&(o=this,--a);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],o!==(n=t[e])&&(h&&n&&(yt.isPlainObject(n)||(r=yt.isArray(n)))?(s=r?(r=!1,i&&yt.isArray(i)?i:[]):i&&yt.isPlainObject(i)?i:{},o[e]=yt.extend(h,s,n)):n!==I&&(o[e]=n));return o},yt.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noConflict:function(t){return f.$===yt&&(f.$=s),t&&f.jQuery===yt&&(f.jQuery=r),yt},isReady:!1,readyWait:1,holdReady:function(t){t?yt.readyWait++:yt.ready(!0)},ready:function(t){(!0===t?--yt.readyWait:yt.isReady)||(yt.isReady=!0)!==t&&0<--yt.readyWait||(e.resolveWith(g,[yt]),yt.fn.trigger&&yt(g).trigger("ready").off("ready"))},isFunction:function(t){return"function"===yt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?o[p.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==yt.type(t)||t.nodeType||yt.isWindow(t))return!1;try{if(t.constructor&&!w.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||g;var n=b.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=yt.buildFragment([t],e,r),r&&yt(r).remove(),yt.merge([],n.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(t){e=I}return e&&!e.getElementsByTagName("parsererror").length||yt.error("Invalid XML: "+t),e},noop:function(){},globalEval:function(t){var e,i=eval;(t=yt.trim(t))&&(1===t.indexOf("use strict")?((e=g.createElement("script")).text=t,g.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(E,"ms-").replace(C,T)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,r=t.length,s=x(t);if(i){if(s)for(;n<r&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(s)for(;n<r&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":d.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(x(Object(t))?yt.merge(i,"string"==typeof t?[t]:t):h.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:l.call(e,t,i)},merge:function(t,e){var i=e.length,n=t.length,r=0;if("number"==typeof i)for(;r<i;r++)t[n++]=e[r];else for(;e[r]!==I;)t[n++]=e[r++];return t.length=n,t},grep:function(t,e,i){var n=[],r=0,s=t.length;for(i=!!i;r<s;r++)i!==!!e(t[r],r)&&n.push(t[r]);return n},map:function(t,e,i){var n,r=0,s=t.length,o=[];if(x(t))for(;r<s;r++)null!=(n=e(t[r],r,i))&&(o[o.length]=n);else for(r in t)null!=(n=e(t[r],r,i))&&(o[o.length]=n);return m.apply([],o)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(i=t[e],e=t,t=i),yt.isFunction(t)?(n=u.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(u.call(arguments)))}).guid=t.guid=t.guid||yt.guid++,r):I},access:function(t,e,i,n,r,s,o){var a=0,c=t.length,h=null==i;if("object"===yt.type(i))for(a in r=!0,i)yt.access(t,e,a,i[a],!0,s,o);else if(n!==I&&(r=!0,yt.isFunction(n)||(o=!0),h&&(e=o?(e.call(t,n),null):(h=e,function(t,e,i){return h.call(yt(t),i)})),e))for(;a<c;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return r?t:h?e.call(t):c?e(t[0],i):s},now:Date.now,swap:function(t,e,i,n){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];for(s in r=i.apply(t,n||[]),e)t.style[s]=o[s];return r}}),yt.ready.promise=function(t){return e||(e=yt.Deferred(),"complete"===g.readyState?setTimeout(yt.ready):(g.addEventListener("DOMContentLoaded",A,!1),f.addEventListener("load",A,!1))),e.promise(t)},yt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){o["[object "+e+"]"]=e.toLowerCase()}),i=yt(g),function(i,r){var t,f,b,E,s,n,g,I,h,m,v,o,_,w,a,u,S,C="sizzle"+-new Date,y=i.document,T=0,l=0,c=rt(),p=rt(),d=rt(),A=!1,x=function(t,e){return t===e&&(A=!0),0},P=typeof r,D={}.hasOwnProperty,e=[],M=e.pop,N=e.push,L=e.push,B=e.slice,R=e.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",G=j.replace("w","w#"),z="\\["+k+"*("+j+")"+k+"*(?:([*^$|!~]?=)"+k+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+G+")|)|)"+k+"*\\]",U=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+z.replace(3,8)+")*)|.*)\\)|)",F=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),Y=new RegExp("^"+k+"*,"+k+"*"),q=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),$=new RegExp(k+"*[+~]"),H=new RegExp("="+k+"*([^\\]'\"]*)"+k+"*\\]","g"),V=new RegExp(U),W=new RegExp("^"+G+"$"),K={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},X=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,tt=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+k+"?|("+k+")|.)","ig"),it=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{L.apply(e=B.call(y.childNodes),y.childNodes),e[y.childNodes.length].nodeType}catch(t){L={apply:e.length?function(t,e){N.apply(t,B.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function nt(t,e,i,n){var r,s,o,a,c,h,u,l,p,d;if((e?e.ownerDocument||e:y)!==v&&m(e),i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=(e=e||v).nodeType)&&9!==a)return[];if(_&&!n){if(r=Z.exec(t))if(o=r[1]){if(9===a){if(!(s=e.getElementById(o))||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(o))&&S(e,s)&&s.id===o)return i.push(s),i}else{if(r[2])return L.apply(i,e.getElementsByTagName(t)),i;if((o=r[3])&&f.getElementsByClassName&&e.getElementsByClassName)return L.apply(i,e.getElementsByClassName(o)),i}if(f.qsa&&(!w||!w.test(t))){if(l=u=C,p=e,d=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(h=dt(t),(u=e.getAttribute("id"))?l=u.replace(tt,"\\$&"):e.setAttribute("id",l),l="[id='"+l+"'] ",c=h.length;c--;)h[c]=l+ft(h[c]);p=$.test(t)&&e.parentNode||e,d=h.join(",")}if(d)try{return L.apply(i,p.querySelectorAll(d)),i}catch(t){}finally{u||e.removeAttribute("id")}}}return function(t,e,i,n){var r,s,o,a,c,h=dt(t);if(!n&&1===h.length){if(2<(s=h[0]=h[0].slice(0)).length&&"ID"===(o=s[0]).type&&f.getById&&9===e.nodeType&&_&&E.relative[s[1].type]){if(!(e=(E.find.ID(o.matches[0].replace(et,it),e)||[])[0]))return i;t=t.slice(s.shift().value.length)}for(r=K.needsContext.test(t)?0:s.length;r--&&(o=s[r],!E.relative[a=o.type]);)if((c=E.find[a])&&(n=c(o.matches[0].replace(et,it),$.test(s[0].type)&&e.parentNode||e))){if(s.splice(r,1),!(t=n.length&&ft(s)))return L.apply(i,n),i;break}}return g(t,h)(n,e,!_,i,$.test(t)),i}(t.replace(F,"$1"),e,i,n)}function rt(){var n=[];return function t(e,i){return n.push(e+=" ")>E.cacheLength&&delete t[n.shift()],t[e]=i}}function st(t){return t[C]=!0,t}function ot(t){var e=v.createElement("div");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function at(t,e){for(var i=t.split("|"),n=t.length;n--;)E.attrHandle[i[n]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ht(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ut(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}function lt(o){return st(function(s){return s=+s,st(function(t,e){for(var i,n=o([],t.length,s),r=n.length;r--;)t[i=n[r]]&&(t[i]=!(e[i]=t[i]))})})}for(t in n=nt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=nt.support={},m=nt.setDocument=function(t){var c=t?t.ownerDocument||t:y,e=c.defaultView;return c!==v&&9===c.nodeType&&c.documentElement?(o=(v=c).documentElement,_=!n(c),e&&e.attachEvent&&e!==e.top&&e.attachEvent("onbeforeunload",function(){m()}),f.attributes=ot(function(t){return t.className="i",!t.getAttribute("className")}),f.getElementsByTagName=ot(function(t){return t.appendChild(c.createComment("")),!t.getElementsByTagName("*").length}),f.getElementsByClassName=ot(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),f.getById=ot(function(t){return o.appendChild(t).id=C,!c.getElementsByName||!c.getElementsByName(C).length}),f.getById?(E.find.ID=function(t,e){if(typeof e.getElementById!==P&&_){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},E.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}}):(delete E.find.ID,E.filter.ID=function(t){var i=t.replace(et,it);return function(t){var e=typeof t.getAttributeNode!==P&&t.getAttributeNode("id");return e&&e.value===i}}),E.find.TAG=f.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!==P)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],r=0,s=e.getElementsByTagName(t);if("*"!==t)return s;for(;i=s[r++];)1===i.nodeType&&n.push(i);return n},E.find.CLASS=f.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!==P&&_)return e.getElementsByClassName(t)},a=[],w=[],(f.qsa=X.test(c.querySelectorAll))&&(ot(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||w.push("\\["+k+"*(?:value|"+O+")"),t.querySelectorAll(":checked").length||w.push(":checked")}),ot(function(t){var e=c.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&w.push("[*^$]="+k+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||w.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),w.push(",.*:")})),(f.matchesSelector=X.test(u=o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ot(function(t){f.disconnectedMatch=u.call(t,"div"),u.call(t,"[s!='']:x"),a.push("!=",U)}),w=w.length&&new RegExp(w.join("|")),a=a.length&&new RegExp(a.join("|")),S=X.test(o.contains)||o.compareDocumentPosition?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},x=o.compareDocumentPosition?function(t,e){if(t===e)return A=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!f.sortDetached&&e.compareDocumentPosition(t)===i?t===c||S(y,t)?-1:e===c||S(y,e)?1:h?R.call(h,t)-R.call(h,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,n=0,r=t.parentNode,s=e.parentNode,o=[t],a=[e];if(t===e)return A=!0,0;if(!r||!s)return t===c?-1:e===c?1:r?-1:s?1:h?R.call(h,t)-R.call(h,e):0;if(r===s)return ct(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?ct(o[n],a[n]):o[n]===y?-1:a[n]===y?1:0},c):v},nt.matches=function(t,e){return nt(t,null,null,e)},nt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==v&&m(t),e=e.replace(H,"='$1']"),f.matchesSelector&&_&&(!a||!a.test(e))&&(!w||!w.test(e)))try{var i=u.call(t,e);if(i||f.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return 0<nt(e,v,null,[t]).length},nt.contains=function(t,e){return(t.ownerDocument||t)!==v&&m(t),S(t,e)},nt.attr=function(t,e){(t.ownerDocument||t)!==v&&m(t);var i=E.attrHandle[e.toLowerCase()],n=i&&D.call(E.attrHandle,e.toLowerCase())?i(t,e,!_):r;return n===r?f.attributes||!_?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null:n},nt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},nt.uniqueSort=function(t){var e,i=[],n=0,r=0;if(A=!f.detectDuplicates,h=!f.sortStable&&t.slice(0),t.sort(x),A){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return t},s=nt.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n];n++)i+=s(e);return i},(E=nt.selectors={cacheLength:50,createPseudo:st,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||nt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&nt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return K.CHILD.test(t[0])?null:(t[3]&&t[4]!==r?t[2]=t[4]:i&&V.test(i)&&(e=dt(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=c[t+" "];return e||(e=new RegExp("(^|"+k+")"+t+"("+k+"|$)"))&&c(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==P&&t.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(t){var e=nt.attr(t,i);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(d,t,e,f,g){var m="nth"!==d.slice(0,3),_="last"!==d.slice(-4),w="of-type"===t;return 1===f&&0===g?function(t){return!!t.parentNode}:function(t,e,i){var n,r,s,o,a,c,h=m!==_?"nextSibling":"previousSibling",u=t.parentNode,l=w&&t.nodeName.toLowerCase(),p=!i&&!w;if(u){if(m){for(;h;){for(s=t;s=s[h];)if(w?s.nodeName.toLowerCase()===l:1===s.nodeType)return!1;c=h="only"===d&&!c&&"nextSibling"}return!0}if(c=[_?u.firstChild:u.lastChild],_&&p){for(a=(n=(r=u[C]||(u[C]={}))[d]||[])[0]===T&&n[1],o=n[0]===T&&n[2],s=a&&u.childNodes[a];s=++a&&s&&s[h]||(o=a=0)||c.pop();)if(1===s.nodeType&&++o&&s===t){r[d]=[T,a,o];break}}else if(p&&(n=(t[C]||(t[C]={}))[d])&&n[0]===T)o=n[1];else for(;(s=++a&&s&&s[h]||(o=a=0)||c.pop())&&((w?s.nodeName.toLowerCase()!==l:1!==s.nodeType)||!++o||(p&&((s[C]||(s[C]={}))[d]=[T,o]),s!==t)););return(o-=g)===f||o%f==0&&0<=o/f}}},PSEUDO:function(t,s){var e,o=E.pseudos[t]||E.setFilters[t.toLowerCase()]||nt.error("unsupported pseudo: "+t);return o[C]?o(s):1<o.length?(e=[t,t,"",s],E.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,e){for(var i,n=o(t,s),r=n.length;r--;)t[i=R.call(t,n[r])]=!(e[i]=n[r])}):function(t){return o(t,0,e)}):o}},pseudos:{not:st(function(t){var n=[],r=[],a=g(t.replace(F,"$1"));return a[C]?st(function(t,e,i,n){for(var r,s=a(t,null,n,[]),o=t.length;o--;)(r=s[o])&&(t[o]=!(e[o]=r))}):function(t,e,i){return n[0]=t,a(n,null,i,r),!r.pop()}}),has:st(function(e){return function(t){return 0<nt(e,t).length}}),contains:st(function(e){return function(t){return-1<(t.textContent||t.innerText||s(t)).indexOf(e)}}),lang:st(function(i){return W.test(i||"")||nt.error("unsupported lang: "+i),i=i.replace(et,it).toLowerCase(),function(t){var e;do{if(e=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===o},focus:function(t){return t===v.activeElement&&(!v.hasFocus||v.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if("@"<t.nodeName||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:lt(function(){return[0]}),last:lt(function(t,e){return[e-1]}),eq:lt(function(t,e,i){return[i<0?i+e:i]}),even:lt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:lt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:lt(function(t,e,i){for(var n=i<0?i+e:i;0<=--n;)t.push(n);return t}),gt:lt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})E.pseudos[t]=ut(t);function pt(){}function dt(t,e){var i,n,r,s,o,a,c,h=p[t+" "];if(h)return e?0:h.slice(0);for(o=t,a=[],c=E.preFilter;o;){for(s in i&&!(n=Y.exec(o))||(n&&(o=o.slice(n[0].length)||o),a.push(r=[])),i=!1,(n=q.exec(o))&&(i=n.shift(),r.push({value:i,type:n[0].replace(F," ")}),o=o.slice(i.length)),E.filter)!(n=K[s].exec(o))||c[s]&&!(n=c[s](n))||(i=n.shift(),r.push({value:i,type:s,matches:n}),o=o.slice(i.length));if(!i)break}return e?o.length:o?nt.error(t):p(t,a).slice(0)}function ft(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function gt(a,t,e){var c=t.dir,h=e&&"parentNode"===c,u=l++;return t.first?function(t,e,i){for(;t=t[c];)if(1===t.nodeType||h)return a(t,e,i)}:function(t,e,i){var n,r,s,o=T+" "+u;if(i){for(;t=t[c];)if((1===t.nodeType||h)&&a(t,e,i))return!0}else for(;t=t[c];)if(1===t.nodeType||h)if((r=(s=t[C]||(t[C]={}))[c])&&r[0]===o){if(!0===(n=r[1])||n===b)return!0===n}else if((r=s[c]=[o])[1]=a(t,e,i)||b,!0===r[1])return!0}}function mt(r){return 1<r.length?function(t,e,i){for(var n=r.length;n--;)if(!r[n](t,e,i))return!1;return!0}:r[0]}function _t(t,e,i,n,r){for(var s,o=[],a=0,c=t.length,h=null!=e;a<c;a++)(s=t[a])&&(i&&!i(s,n,r)||(o.push(s),h&&e.push(a)));return o}function wt(d,f,g,m,_,t){return m&&!m[C]&&(m=wt(m)),_&&!_[C]&&(_=wt(_,t)),st(function(t,e,i,n){var r,s,o,a=[],c=[],h=e.length,u=t||function(t,e,i){for(var n=0,r=e.length;n<r;n++)nt(t,e[n],i);return i}(f||"*",i.nodeType?[i]:i,[]),l=!d||!t&&f?u:_t(u,a,d,i,n),p=g?_||(t?d:h||m)?[]:e:l;if(g&&g(l,p,i,n),m)for(r=_t(p,c),m(r,[],i,n),s=r.length;s--;)(o=r[s])&&(p[c[s]]=!(l[c[s]]=o));if(t){if(_||d){if(_){for(r=[],s=p.length;s--;)(o=p[s])&&r.push(l[s]=o);_(null,p=[],r,n)}for(s=p.length;s--;)(o=p[s])&&-1<(r=_?R.call(t,o):a[s])&&(t[r]=!(e[r]=o))}}else p=_t(p===e?p.splice(h,p.length):p),_?_(null,e,p,n):L.apply(e,p)})}function St(t){for(var n,e,i,r=t.length,s=E.relative[t[0].type],o=s||E.relative[" "],a=s?1:0,c=gt(function(t){return t===n},o,!0),h=gt(function(t){return-1<R.call(n,t)},o,!0),u=[function(t,e,i){return!s&&(i||e!==I)||((n=e).nodeType?c(t,e,i):h(t,e,i))}];a<r;a++)if(e=E.relative[t[a].type])u=[gt(mt(u),e)];else{if((e=E.filter[t[a].type].apply(null,t[a].matches))[C]){for(i=++a;i<r&&!E.relative[t[i].type];i++);return wt(1<a&&mt(u),1<a&&ft(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(F,"$1"),e,a<i&&St(t.slice(a,i)),i<r&&St(t=t.slice(i)),i<r&&ft(t))}u.push(e)}return mt(u)}pt.prototype=E.filters=E.pseudos,E.setFilters=new pt,g=nt.compile=function(t,e){var i,m,_,w,S,y,n,r=[],s=[],o=d[t+" "];if(!o){for(e||(e=dt(t)),i=e.length;i--;)(o=St(e[i]))[C]?r.push(o):s.push(o);o=d(t,(m=s,S=(w=0)<(_=r).length,y=0<m.length,n=function(t,e,i,n,r){var s,o,a,c=[],h=0,u="0",l=t&&[],p=null!=r,d=I,f=t||y&&E.find.TAG("*",r&&e.parentNode||e),g=T+=null==d?1:Math.random()||.1;for(p&&(I=e!==v&&e,b=w);null!=(s=f[u]);u++){if(y&&s){for(o=0;a=m[o++];)if(a(s,e,i)){n.push(s);break}p&&(T=g,b=++w)}S&&((s=!a&&s)&&h--,t&&l.push(s))}if(h+=u,S&&u!==h){for(o=0;a=_[o++];)a(l,c,e,i);if(t){if(0<h)for(;u--;)l[u]||c[u]||(c[u]=M.call(n));c=_t(c)}L.apply(n,c),p&&!t&&0<c.length&&1<h+_.length&&nt.uniqueSort(n)}return p&&(T=g,I=d),l},S?st(n):n))}return o},f.sortStable=C.split("").sort(x).join("")===C,f.detectDuplicates=A,m(),f.sortDetached=ot(function(t){return 1&t.compareDocumentPosition(v.createElement("div"))}),ot(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||at("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),f.attributes&&ot(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||at("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ot(function(t){return null==t.getAttribute("disabled")})||at(O,function(t,e,i){var n;if(!i)return(n=t.getAttributeNode(e))&&n.specified?n.value:!0===t[e]?e.toLowerCase():null}),yt.find=nt,yt.expr=nt.selectors,yt.expr[":"]=yt.expr.pseudos,yt.unique=nt.uniqueSort,yt.text=nt.getText,yt.isXMLDoc=nt.isXML,yt.contains=nt.contains}(f);var P,D,M,N,L,B,R={};yt.Callbacks=function(r){var t,i;r="string"==typeof r?R[r]||(i=R[t=r]={},yt.each(t.match(v)||[],function(t,e){i[e]=!0}),i):yt.extend({},r);var e,n,s,o,a,c,h=[],u=!r.once&&[],l=function(t){for(e=r.memory&&t,n=!0,c=o||0,o=0,a=h.length,s=!0;h&&c<a;c++)if(!1===h[c].apply(t[0],t[1])&&r.stopOnFalse){e=!1;break}s=!1,h&&(u?u.length&&l(u.shift()):e?h=[]:p.disable())},p={add:function(){if(h){var t=h.length;!function n(t){yt.each(t,function(t,e){var i=yt.type(e);"function"===i?r.unique&&p.has(e)||h.push(e):e&&e.length&&"string"!==i&&n(e)})}(arguments),s?a=h.length:e&&(o=t,l(e))}return this},remove:function(){return h&&yt.each(arguments,function(t,e){for(var i;-1<(i=yt.inArray(e,h,i));)h.splice(i,1),s&&(i<=a&&a--,i<=c&&c--)}),this},has:function(t){return t?-1<yt.inArray(t,h):!(!h||!h.length)},empty:function(){return h=[],a=0,this},disable:function(){return h=u=e=I,this},disabled:function(){return!h},lock:function(){return u=I,e||p.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!h||n&&!u||(e=[t,(e=e||[]).slice?e.slice():e],s?u.push(e):l(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p},yt.extend({Deferred:function(t){var o=[["resolve","done",yt.Callbacks("once memory"),"resolved"],["reject","fail",yt.Callbacks("once memory"),"rejected"],["notify","progress",yt.Callbacks("memory")]],r="pending",a={state:function(){return r},always:function(){return c.done(arguments).fail(arguments),this},then:function(){var s=arguments;return yt.Deferred(function(r){yt.each(o,function(t,e){var i=e[0],n=yt.isFunction(s[t])&&s[t];c[e[1]](function(){var t=n&&n.apply(this,arguments);t&&yt.isFunction(t.promise)?t.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[i+"With"](this===a?r.promise():this,n?[t]:arguments)})}),s=null}).promise()},promise:function(t){return null!=t?yt.extend(t,a):a}},c={};return a.pipe=a.then,yt.each(o,function(t,e){var i=e[2],n=e[3];a[e[1]]=i.add,n&&i.add(function(){r=n},o[1^t][2].disable,o[2][2].lock),c[e[0]]=function(){return c[e[0]+"With"](this===c?a:this,arguments),this},c[e[0]+"With"]=i.fireWith}),a.promise(c),t&&t.call(c,c),c},when:function(t){var r,e,i,n=0,s=u.call(arguments),o=s.length,a=1!==o||t&&yt.isFunction(t.promise)?o:0,c=1===a?t:yt.Deferred(),h=function(e,i,n){return function(t){i[e]=this,n[e]=1<arguments.length?u.call(arguments):t,n===r?c.notifyWith(i,n):--a||c.resolveWith(i,n)}};if(1<o)for(r=new Array(o),e=new Array(o),i=new Array(o);n<o;n++)s[n]&&yt.isFunction(s[n].promise)?s[n].promise().done(h(n,i,s)).fail(c.reject).progress(h(n,e,r)):--a;return a||c.resolveWith(i,s),c.promise()}}),yt.support=(P={},D=g.createElement("input"),M=g.createDocumentFragment(),N=g.createElement("div"),L=g.createElement("select"),B=L.appendChild(g.createElement("option")),D.type&&(D.type="checkbox",P.checkOn=""!==D.value,P.optSelected=B.selected,P.reliableMarginRight=!0,P.boxSizingReliable=!0,P.pixelPosition=!1,D.checked=!0,P.noCloneChecked=D.cloneNode(!0).checked,L.disabled=!0,P.optDisabled=!B.disabled,(D=g.createElement("input")).value="t",D.type="radio",P.radioValue="t"===D.value,D.setAttribute("checked","t"),D.setAttribute("name","t"),M.appendChild(D),P.checkClone=M.cloneNode(!0).cloneNode(!0).lastChild.checked,P.focusinBubbles="onfocusin"in f,N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",P.clearCloneStyle="content-box"===N.style.backgroundClip,yt(function(){var t,e,i=g.getElementsByTagName("body")[0];i&&((t=g.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",i.appendChild(t).appendChild(N),N.innerHTML="",N.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",yt.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){P.boxSizing=4===N.offsetWidth}),f.getComputedStyle&&(P.pixelPosition="1%"!==(f.getComputedStyle(N,null)||{}).top,P.boxSizingReliable="4px"===(f.getComputedStyle(N,null)||{width:"4px"}).width,(e=N.appendChild(g.createElement("div"))).style.cssText=N.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",e.style.marginRight=e.style.width="0",N.style.width="1px",P.reliableMarginRight=!parseFloat((f.getComputedStyle(e,null)||{}).marginRight)),i.removeChild(t))})),P);var O,k,j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,G=/([A-Z])/g;function z(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=yt.expando+Math.random()}function U(t,e,i){var n;if(i===I&&1===t.nodeType)if(n="data-"+e.replace(G,"-$1").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:j.test(i)?JSON.parse(i):i)}catch(t){}O.set(t,e,i)}else i=I;return i}z.uid=1,z.accepts=function(t){return!t.nodeType||(1===t.nodeType||9===t.nodeType)},z.prototype={key:function(e){if(!z.accepts(e))return 0;var i={},n=e[this.expando];if(!n){n=z.uid++;try{i[this.expando]={value:n},Object.defineProperties(e,i)}catch(t){i[this.expando]=n,yt.extend(e,i)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,i){var n,r=this.key(t),s=this.cache[r];if("string"==typeof e)s[e]=i;else if(yt.isEmptyObject(s))yt.extend(this.cache[r],e);else for(n in e)s[n]=e[n];return s},get:function(t,e){var i=this.cache[this.key(t)];return e===I?i:i[e]},access:function(t,e,i){var n;return e===I||e&&"string"==typeof e&&i===I?(n=this.get(t,e))!==I?n:this.get(t,yt.camelCase(e)):(this.set(t,e,i),i!==I?i:e)},remove:function(t,e){var i,n,r,s=this.key(t),o=this.cache[s];if(e===I)this.cache[s]={};else{i=(n=yt.isArray(e)?e.concat(e.map(yt.camelCase)):(r=yt.camelCase(e),e in o?[e,r]:(n=r)in o?[n]:n.match(v)||[])).length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!yt.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},O=new z,k=new z,yt.extend({acceptData:z.accepts,hasData:function(t){return O.hasData(t)||k.hasData(t)},data:function(t,e,i){return O.access(t,e,i)},removeData:function(t,e){O.remove(t,e)},_data:function(t,e,i){return k.access(t,e,i)},_removeData:function(t,e){k.remove(t,e)}}),yt.fn.extend({data:function(n,t){var e,i,r=this[0],s=0,o=null;if(n!==I)return"object"==typeof n?this.each(function(){O.set(this,n)}):yt.access(this,function(e){var t,i=yt.camelCase(n);if(r&&e===I)return(t=O.get(r,n))!==I?t:(t=O.get(r,i))!==I?t:(t=U(r,i,I))!==I?t:void 0;this.each(function(){var t=O.get(this,i);O.set(this,i,e),-1!==n.indexOf("-")&&t!==I&&O.set(this,n,e)})},null,t,1<arguments.length,null,!0);if(this.length&&(o=O.get(r),1===r.nodeType&&!k.get(r,"hasDataAttrs"))){for(e=r.attributes;s<e.length;s++)0===(i=e[s].name).indexOf("data-")&&(i=yt.camelCase(i.slice(5)),U(r,i,o[i]));k.set(r,"hasDataAttrs",!0)}return o},removeData:function(t){return this.each(function(){O.remove(this,t)})}}),yt.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=k.get(t,e),i&&(!n||yt.isArray(i)?n=k.access(t,e,yt.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=yt.queue(t,e),n=i.length,r=i.shift(),s=yt._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete s.stop,r.call(t,function(){yt.dequeue(t,e)},s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return k.get(t,i)||k.access(t,i,{empty:yt.Callbacks("once memory").add(function(){k.remove(t,[e+"queue",i])})})}}),yt.fn.extend({queue:function(e,i){var t=2;return"string"!=typeof e&&(i=e,e="fx",t--),arguments.length<t?yt.queue(this[0],e):i===I?this:this.each(function(){var t=yt.queue(this,e,i);yt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&yt.dequeue(this,e)})},dequeue:function(t){return this.each(function(){yt.dequeue(this,t)})},delay:function(n,t){return n=yt.fx&&yt.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,e){var i=setTimeout(t,n);e.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=yt.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=I),t=t||"fx";o--;)(i=k.get(s[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var F,Y=/[\t\r\n\f]/g,q=/\r/g,$=/^(?:input|select|textarea|button)$/i;yt.fn.extend({attr:function(t,e){return yt.access(this,yt.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){yt.removeAttr(this,t)})},prop:function(t,e){return yt.access(this,yt.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[yt.propFix[t]||t]})},addClass:function(e){var t,i,n,r,s,o=0,a=this.length,c="string"==typeof e&&e;if(yt.isFunction(e))return this.each(function(t){yt(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(v)||[];o<a;o++)if(n=1===(i=this[o]).nodeType&&(i.className?(" "+i.className+" ").replace(Y," "):" ")){for(s=0;r=t[s++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");i.className=yt.trim(n)}return this},removeClass:function(e){var t,i,n,r,s,o=0,a=this.length,c=0===arguments.length||"string"==typeof e&&e;if(yt.isFunction(e))return this.each(function(t){yt(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(v)||[];o<a;o++)if(n=1===(i=this[o]).nodeType&&(i.className?(" "+i.className+" ").replace(Y," "):"")){for(s=0;r=t[s++];)for(;0<=n.indexOf(" "+r+" ");)n=n.replace(" "+r+" "," ");i.className=e?yt.trim(n):""}return this},toggleClass:function(r,e){var s=typeof r;return"boolean"==typeof e&&"string"===s?e?this.addClass(r):this.removeClass(r):yt.isFunction(r)?this.each(function(t){yt(this).toggleClass(r.call(this,t,this.className,e),e)}):this.each(function(){if("string"===s)for(var t,e=0,i=yt(this),n=r.match(v)||[];t=n[e++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else s!==_&&"boolean"!==s||(this.className&&k.set(this,"__className__",this.className),this.className=this.className||!1===r?"":k.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(Y," ").indexOf(e))return!0;return!1},val:function(i){var n,t,r,e=this[0];return arguments.length?(r=yt.isFunction(i),this.each(function(t){var e;1===this.nodeType&&(null==(e=r?i.call(this,t,yt(this).val()):i)?e="":"number"==typeof e?e+="":yt.isArray(e)&&(e=yt.map(e,function(t){return null==t?"":t+""})),(n=yt.valHooks[this.type]||yt.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,e,"value")!==I||(this.value=e))})):e?(n=yt.valHooks[e.type]||yt.valHooks[e.nodeName.toLowerCase()])&&"get"in n&&(t=n.get(e,"value"))!==I?t:"string"==typeof(t=e.value)?t.replace(q,""):null==t?"":t:void 0}}),yt.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,s="select-one"===t.type||r<0,o=s?null:[],a=s?r+1:n.length,c=r<0?a:s?r:0;c<a;c++)if(((i=n[c]).selected||c===r)&&(yt.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!yt.nodeName(i.parentNode,"optgroup"))){if(e=yt(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,s=yt.makeArray(e),o=r.length;o--;)((n=r[o]).selected=0<=yt.inArray(yt(n).val(),s))&&(i=!0);return i||(t.selectedIndex=-1),s}}},attr:function(t,e,i){var n,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===_?yt.prop(t,e,i):(1===s&&yt.isXMLDoc(t)||(e=e.toLowerCase(),n=yt.attrHooks[e]||(yt.expr.match.bool.test(e)?F:void 0)),i===I?n&&"get"in n&&null!==(r=n.get(t,e))?r:null==(r=yt.find.attr(t,e))?I:r:null!==i?n&&"set"in n&&(r=n.set(t,i,e))!==I?r:(t.setAttribute(e,i+""),i):void yt.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,s=e&&e.match(v);if(s&&1===t.nodeType)for(;i=s[r++];)n=yt.propFix[i]||i,yt.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!yt.support.radioValue&&"radio"===e&&yt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return(1!==s||!yt.isXMLDoc(t))&&(e=yt.propFix[e]||e,r=yt.propHooks[e]),i!==I?r&&"set"in r&&(n=r.set(t,i,e))!==I?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||$.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),F={set:function(t,e,i){return!1===e?yt.removeAttr(t,i):t.setAttribute(i,i),i}},yt.each(yt.expr.match.bool.source.match(/\w+/g),function(t,e){var s=yt.expr.attrHandle[e]||yt.find.attr;yt.expr.attrHandle[e]=function(t,e,i){var n=yt.expr.attrHandle[e],r=i?I:(yt.expr.attrHandle[e]=I)!=s(t,e,i)?e.toLowerCase():null;return yt.expr.attrHandle[e]=n,r}}),yt.support.optSelected||(yt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),yt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){yt.propFix[this.toLowerCase()]=this}),yt.each(["radio","checkbox"],function(){yt.valHooks[this]={set:function(t,e){if(yt.isArray(e))return t.checked=0<=yt.inArray(yt(t).val(),e)}},yt.support.checkOn||(yt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var H=/^key/,V=/^(?:mouse|contextmenu)|click/,W=/^(?:focusinfocus|focusoutblur)$/,K=/^([^.]*)(?:\.(.+)|)$/;function X(){return!0}function Z(){return!1}function Q(){try{return g.activeElement}catch(t){}}yt.event={global:{},add:function(t,e,i,n,r){var s,o,a,c,h,u,l,p,d,f,g,m=k.get(t);if(m){for(i.handler&&(i=(s=i).handler,r=s.selector),i.guid||(i.guid=yt.guid++),(c=m.events)||(c=m.events={}),(o=m.handle)||((o=m.handle=function(t){return typeof yt===_||t&&yt.event.triggered===t.type?I:yt.event.dispatch.apply(o.elem,arguments)}).elem=t),h=(e=(e||"").match(v)||[""]).length;h--;)d=g=(a=K.exec(e[h])||[])[1],f=(a[2]||"").split(".").sort(),d&&(l=yt.event.special[d]||{},d=(r?l.delegateType:l.bindType)||d,l=yt.event.special[d]||{},u=yt.extend({type:d,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&yt.expr.match.needsContext.test(r),namespace:f.join(".")},s),(p=c[d])||((p=c[d]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,n,f,o)||t.addEventListener&&t.addEventListener(d,o,!1)),l.add&&(l.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),yt.event.global[d]=!0);t=null}},remove:function(t,e,i,n,r){var s,o,a,c,h,u,l,p,d,f,g,m=k.hasData(t)&&k.get(t);if(m&&(c=m.events)){for(h=(e=(e||"").match(v)||[""]).length;h--;)if(d=g=(a=K.exec(e[h])||[])[1],f=(a[2]||"").split(".").sort(),d){for(l=yt.event.special[d]||{},p=c[d=(n?l.delegateType:l.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)u=p[s],!r&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(p.splice(s,1),u.selector&&p.delegateCount--,l.remove&&l.remove.call(t,u));o&&!p.length&&(l.teardown&&!1!==l.teardown.call(t,f,m.handle)||yt.removeEvent(t,d,m.handle),delete c[d])}else for(d in c)yt.event.remove(t,d+e[h],i,n,!0);yt.isEmptyObject(c)&&(delete m.handle,k.remove(t,"events"))}},trigger:function(t,e,i,n){var r,s,o,a,c,h,u,l=[i||g],p=w.call(t,"type")?t.type:t,d=w.call(t,"namespace")?t.namespace.split("."):[];if(s=o=i=i||g,3!==i.nodeType&&8!==i.nodeType&&!W.test(p+yt.event.triggered)&&(0<=p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,(t=t[yt.expando]?t:new yt.Event(p,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=I,t.target||(t.target=i),e=null==e?[t]:yt.makeArray(e,[t]),u=yt.event.special[p]||{},n||!u.trigger||!1!==u.trigger.apply(i,e))){if(!n&&!u.noBubble&&!yt.isWindow(i)){for(a=u.delegateType||p,W.test(a+p)||(s=s.parentNode);s;s=s.parentNode)l.push(s),o=s;o===(i.ownerDocument||g)&&l.push(o.defaultView||o.parentWindow||f)}for(r=0;(s=l[r++])&&!t.isPropagationStopped();)t.type=1<r?a:u.bindType||p,(h=(k.get(s,"events")||{})[t.type]&&k.get(s,"handle"))&&h.apply(s,e),(h=c&&s[c])&&yt.acceptData(s)&&h.apply&&!1===h.apply(s,e)&&t.preventDefault();return t.type=p,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(l.pop(),e)||!yt.acceptData(i)||c&&yt.isFunction(i[p])&&!yt.isWindow(i)&&((o=i[c])&&(i[c]=null),i[yt.event.triggered=p](),yt.event.triggered=I,o&&(i[c]=o)),t.result}},dispatch:function(t){t=yt.event.fix(t);var e,i,n,r,s,o,a=u.call(arguments),c=(k.get(this,"events")||{})[t.type]||[],h=yt.event.special[t.type]||{};if((a[0]=t).delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,t)){for(o=yt.event.handlers.call(this,t,c),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(s.namespace)||(t.handleObj=s,t.data=s.data,(n=((yt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))!==I&&!1===(t.result=n)&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,s,o=[],a=e.delegateCount,c=t.target;if(a&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(!0!==c.disabled||"click"!==t.type){for(n=[],i=0;i<a;i++)n[r=(s=e[i]).selector+" "]===I&&(n[r]=s.needsContext?0<=yt(r,this).index(c):yt.find(r,this,null,[c]).length),n[r]&&n.push(s);n.length&&o.push({elem:c,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||g).documentElement,r=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),t.which||s===I||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[yt.expando])return t;var e,i,n,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=V.test(r)?this.mouseHooks:H.test(r)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new yt.Event(s),e=n.length;e--;)t[i=n[e]]=s[i];return t.target||(t.target=g),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&yt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return yt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==I&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=yt.extend(new yt.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?yt.event.trigger(r,null,e):yt.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},yt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},yt.Event=function(t,e){if(!(this instanceof yt.Event))return new yt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?X:Z):this.type=t,e&&yt.extend(this,e),this.timeStamp=t&&t.timeStamp||yt.now(),this[yt.expando]=!0},yt.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=X,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=X,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=X,this.stopPropagation()}},yt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,r){yt.event.special[t]={delegateType:r,bindType:r,handle:function(t){var e,i=t.relatedTarget,n=t.handleObj;return i&&(i===this||yt.contains(this,i))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=r),e}}}),yt.support.focusinBubbles||yt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){yt.event.simulate(e,t.target,yt.event.fix(t),!0)};yt.event.special[e]={setup:function(){0==i++&&g.addEventListener(t,n,!0)},teardown:function(){0==--i&&g.removeEventListener(t,n,!0)}}}),yt.fn.extend({on:function(t,e,i,n,r){var s,o;if("object"==typeof t){for(o in"string"!=typeof e&&(i=i||e,e=I),t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=I):null==n&&("string"==typeof e?(n=i,i=I):(n=i,i=e,e=I)),!1===n)n=Z;else if(!n)return this;return 1===r&&(s=n,(n=function(t){return yt().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=yt.guid++)),this.each(function(){yt.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,yt(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(i=e,e=I),!1===i&&(i=Z),this.each(function(){yt.event.remove(this,t,i,e)});for(r in t)this.off(r,e,t[r]);return this},trigger:function(t,e){return this.each(function(){yt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return yt.event.trigger(t,e,i,!0)}});var J=/^.[^:#\[\.,]*$/,tt=/^(?:parents|prev(?:Until|All))/,et=yt.expr.match.needsContext,it={children:!0,contents:!0,next:!0,prev:!0};function nt(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function rt(t,i,n){if(yt.isFunction(i))return yt.grep(t,function(t,e){return!!i.call(t,e,t)!==n});if(i.nodeType)return yt.grep(t,function(t){return t===i!==n});if("string"==typeof i){if(J.test(i))return yt.filter(i,t,n);i=yt.filter(i,t)}return yt.grep(t,function(t){return 0<=l.call(i,t)!==n})}yt.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(yt(t).filter(function(){for(e=0;e<r;e++)if(yt.contains(n[e],this))return!0}));for(e=0;e<r;e++)yt.find(t,n[e],i);return(i=this.pushStack(1<r?yt.unique(i):i)).selector=this.selector?this.selector+" "+t:t,i},has:function(t){var e=yt(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(yt.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(rt(this,t||[],!0))},filter:function(t){return this.pushStack(rt(this,t||[],!1))},is:function(t){return!!rt(this,"string"==typeof t&&et.test(t)?yt(t):t||[],!1).length},closest:function(t,e){for(var i,n=0,r=this.length,s=[],o=et.test(t)||"string"!=typeof t?yt(t,e||this.context):0;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&yt.find.matchesSelector(i,t))){i=s.push(i);break}return this.pushStack(1<s.length?yt.unique(s):s)},index:function(t){return t?"string"==typeof t?l.call(yt(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var i="string"==typeof t?yt(t,e):yt.makeArray(t&&t.nodeType?[t]:t),n=yt.merge(this.get(),i);return this.pushStack(yt.unique(n))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),yt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return yt.dir(t,"parentNode")},parentsUntil:function(t,e,i){return yt.dir(t,"parentNode",i)},next:function(t){return nt(t,"nextSibling")},prev:function(t){return nt(t,"previousSibling")},nextAll:function(t){return yt.dir(t,"nextSibling")},prevAll:function(t){return yt.dir(t,"previousSibling")},nextUntil:function(t,e,i){return yt.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return yt.dir(t,"previousSibling",i)},siblings:function(t){return yt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return yt.sibling(t.firstChild)},contents:function(t){return t.contentDocument||yt.merge([],t.childNodes)}},function(n,r){yt.fn[n]=function(t,e){var i=yt.map(this,r,t);return"Until"!==n.slice(-5)&&(e=t),e&&"string"==typeof e&&(i=yt.filter(e,i)),1<this.length&&(it[n]||yt.unique(i),tt.test(n)&&i.reverse()),this.pushStack(i)}}),yt.extend({filter:function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?yt.find.matchesSelector(n,t)?[n]:[]:yt.find.matches(t,yt.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,e,i){for(var n=[],r=i!==I;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&yt(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var st=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ot=/<([\w:]+)/,at=/<|&#?\w+;/,ct=/<(?:script|style|link)/i,ht=/^(?:checkbox|radio)$/i,ut=/checked\s*(?:[^=]|=\s*.checked.)/i,lt=/^$|\/(?:java|ecma)script/i,pt=/^true\/(.*)/,dt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function gt(t,e){return yt.nodeName(t,"table")&&yt.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function mt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function _t(t){var e=pt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function wt(t,e){for(var i=t.length,n=0;n<i;n++)k.set(t[n],"globalEval",!e||k.get(e[n],"globalEval"))}function St(t,e){var i,n,r,s,o,a,c,h;if(1===e.nodeType){if(k.hasData(t)&&(s=k.access(t),o=k.set(e,s),h=s.events))for(r in delete o.handle,o.events={},h)for(i=0,n=h[r].length;i<n;i++)yt.event.add(e,r,h[r][i]);O.hasData(t)&&(a=O.access(t),c=yt.extend({},a),O.set(e,c))}}function bt(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return e===I||e&&yt.nodeName(t,e)?yt.merge([t],i):i}function Et(t,e){var i=e.nodeName.toLowerCase();"input"===i&&ht.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,yt.fn.extend({text:function(t){return yt.access(this,function(t){return t===I?yt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||g).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||gt(this,t).appendChild(t)})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=gt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?yt.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||yt.cleanData(bt(i)),i.parentNode&&(e&&yt.contains(i.ownerDocument,i)&&wt(bt(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(yt.cleanData(bt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return yt.clone(this,t,e)})},html:function(t){return yt.access(this,function(t){var e=this[0]||{},i=0,n=this.length;if(t===I&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!ct.test(t)&&!ft[(ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(st,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(yt.cleanData(bt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=yt.map(this,function(t){return[t.nextSibling,t.parentNode]}),r=0;return this.domManip(arguments,function(t){var e=n[r++],i=n[r++];i&&(e&&e.parentNode!==i&&(e=this.nextSibling),yt(this).remove(),i.insertBefore(t,e))},!0),r?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(i,n,r){i=m.apply([],i);var t,e,s,o,a,c,h=0,u=this.length,l=this,p=u-1,d=i[0],f=yt.isFunction(d);if(f||!(u<=1||"string"!=typeof d||yt.support.checkClone)&&ut.test(d))return this.each(function(t){var e=l.eq(t);f&&(i[0]=d.call(this,t,e.html())),e.domManip(i,n,r)});if(u&&(e=(t=yt.buildFragment(i,this[0].ownerDocument,!1,!r&&this)).firstChild,1===t.childNodes.length&&(t=e),e)){for(o=(s=yt.map(bt(t,"script"),mt)).length;h<u;h++)a=t,h!==p&&(a=yt.clone(a,!0,!0),o&&yt.merge(s,bt(a,"script"))),n.call(this[h],a,h);if(o)for(c=s[s.length-1].ownerDocument,yt.map(s,_t),h=0;h<o;h++)a=s[h],lt.test(a.type||"")&&!k.access(a,"globalEval")&&yt.contains(c,a)&&(a.src?yt._evalUrl(a.src):yt.globalEval(a.textContent.replace(dt,"")))}return this}}),yt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,o){yt.fn[t]=function(t){for(var e,i=[],n=yt(t),r=n.length-1,s=0;s<=r;s++)e=s===r?this:this.clone(!0),yt(n[s])[o](e),h.apply(i,e.get());return this.pushStack(i)}}),yt.extend({clone:function(t,e,i){var n,r,s,o,a=t.cloneNode(!0),c=yt.contains(t.ownerDocument,t);if(!(yt.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||yt.isXMLDoc(t)))for(o=bt(a),n=0,r=(s=bt(t)).length;n<r;n++)Et(s[n],o[n]);if(e)if(i)for(s=s||bt(t),o=o||bt(a),n=0,r=s.length;n<r;n++)St(s[n],o[n]);else St(t,a);return 0<(o=bt(a,"script")).length&&wt(o,!c&&bt(t,"script")),a},buildFragment:function(t,e,i,n){for(var r,s,o,a,c,h,u=0,l=t.length,p=e.createDocumentFragment(),d=[];u<l;u++)if((r=t[u])||0===r)if("object"===yt.type(r))yt.merge(d,r.nodeType?[r]:r);else if(at.test(r)){for(s=s||p.appendChild(e.createElement("div")),o=(ot.exec(r)||["",""])[1].toLowerCase(),a=ft[o]||ft._default,s.innerHTML=a[1]+r.replace(st,"<$1></$2>")+a[2],h=a[0];h--;)s=s.lastChild;yt.merge(d,s.childNodes),(s=p.firstChild).textContent=""}else d.push(e.createTextNode(r));for(p.textContent="",u=0;r=d[u++];)if((!n||-1===yt.inArray(r,n))&&(c=yt.contains(r.ownerDocument,r),s=bt(p.appendChild(r),"script"),c&&wt(s),i))for(h=0;r=s[h++];)lt.test(r.type||"")&&i.push(r);return p},cleanData:function(t){for(var e,i,n,r,s,o,a=yt.event.special,c=0;(i=t[c])!==I;c++){if(z.accepts(i)&&(s=i[k.expando])&&(e=k.cache[s])){if((n=Object.keys(e.events||{})).length)for(o=0;(r=n[o])!==I;o++)a[r]?yt.event.remove(i,r):yt.removeEvent(i,r,e.handle);k.cache[s]&&delete k.cache[s]}delete O.cache[i[O.expando]]}},_evalUrl:function(t){return yt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}}),yt.fn.extend({wrapAll:function(e){var t;return yt.isFunction(e)?this.each(function(t){yt(this).wrapAll(e.call(this,t))}):(this[0]&&(t=yt(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(i){return yt.isFunction(i)?this.each(function(t){yt(this).wrapInner(i.call(this,t))}):this.each(function(){var t=yt(this),e=t.contents();e.length?e.wrapAll(i):t.append(i)})},wrap:function(e){var i=yt.isFunction(e);return this.each(function(t){yt(this).wrapAll(i?e.call(this,t):e)})},unwrap:function(){return this.parent().each(function(){yt.nodeName(this,"body")||yt(this).replaceWith(this.childNodes)}).end()}});var It,vt,Ct=/^(none|table(?!-c[ea]).+)/,Tt=/^margin/,At=new RegExp("^("+S+")(.*)$","i"),xt=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Pt=new RegExp("^([+-])=("+S+")","i"),Dt={BODY:"block"},Mt={position:"absolute",visibility:"hidden",display:"block"},Nt={letterSpacing:0,fontWeight:400},Lt=["Top","Right","Bottom","Left"],Bt=["Webkit","O","Moz","ms"];function Rt(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=Bt.length;r--;)if((e=Bt[r]+i)in t)return e;return n}function Ot(t,e){return t=e||t,"none"===yt.css(t,"display")||!yt.contains(t.ownerDocument,t)}function kt(t){return f.getComputedStyle(t,null)}function jt(t,e){for(var i,n,r,s=[],o=0,a=t.length;o<a;o++)(n=t[o]).style&&(s[o]=k.get(n,"olddisplay"),i=n.style.display,e?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Ot(n)&&(s[o]=k.access(n,"olddisplay",Ft(n.nodeName)))):s[o]||(r=Ot(n),(i&&"none"!==i||!r)&&k.set(n,"olddisplay",r?i:yt.css(n,"display"))));for(o=0;o<a;o++)(n=t[o]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[o]||"":"none"));return t}function Gt(t,e,i){var n=At.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function zt(t,e,i,n,r){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,o=0;s<4;s+=2)"margin"===i&&(o+=yt.css(t,i+Lt[s],!0,r)),n?("content"===i&&(o-=yt.css(t,"padding"+Lt[s],!0,r)),"margin"!==i&&(o-=yt.css(t,"border"+Lt[s]+"Width",!0,r))):(o+=yt.css(t,"padding"+Lt[s],!0,r),"padding"!==i&&(o+=yt.css(t,"border"+Lt[s]+"Width",!0,r)));return o}function Ut(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,s=kt(t),o=yt.support.boxSizing&&"border-box"===yt.css(t,"boxSizing",!1,s);if(r<=0||null==r){if(((r=It(t,e,s))<0||null==r)&&(r=t.style[e]),xt.test(r))return r;n=o&&(yt.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+zt(t,e,i||(o?"border":"content"),n,s)+"px"}function Ft(t){var e=g,i=Dt[t];return i||("none"!==(i=Yt(t,e))&&i||((e=((vt=(vt||yt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement))[0].contentWindow||vt[0].contentDocument).document).write("<!doctype html><html><body>"),e.close(),i=Yt(t,e),vt.detach()),Dt[t]=i),i}function Yt(t,e){var i=yt(e.createElement(t)).appendTo(e.body),n=yt.css(i[0],"display");return i.remove(),n}yt.fn.extend({css:function(t,e){return yt.access(this,function(t,e,i){var n,r,s={},o=0;if(yt.isArray(e)){for(n=kt(t),r=e.length;o<r;o++)s[e[o]]=yt.css(t,e[o],!1,n);return s}return i!==I?yt.style(t,e,i):yt.css(t,e)},t,e,1<arguments.length)},show:function(){return jt(this,!0)},hide:function(){return jt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ot(this)?yt(this).show():yt(this).hide()})}}),yt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=It(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=yt.camelCase(e),c=t.style;if(e=yt.cssProps[a]||(yt.cssProps[a]=Rt(c,a)),o=yt.cssHooks[e]||yt.cssHooks[a],i===I)return o&&"get"in o&&(r=o.get(t,!1,n))!==I?r:c[e];"string"===(s=typeof i)&&(r=Pt.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(yt.css(t,e)),s="number"),null==i||"number"===s&&isNaN(i)||("number"!==s||yt.cssNumber[a]||(i+="px"),yt.support.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&(i=o.set(t,i,n))===I||(c[e]=i))}},css:function(t,e,i,n){var r,s,o,a=yt.camelCase(e);return e=yt.cssProps[a]||(yt.cssProps[a]=Rt(t.style,a)),(o=yt.cssHooks[e]||yt.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,i)),r===I&&(r=It(t,e,n)),"normal"===r&&e in Nt&&(r=Nt[e]),""===i||i?(s=parseFloat(r),!0===i||yt.isNumeric(s)?s||0:r):r}}),It=function(t,e,i){var n,r,s,o=i||kt(t),a=o?o.getPropertyValue(e)||o[e]:I,c=t.style;return o&&(""!==a||yt.contains(t.ownerDocument,t)||(a=yt.style(t,e)),xt.test(a)&&Tt.test(e)&&(n=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=a,a=o.width,c.width=n,c.minWidth=r,c.maxWidth=s)),a},yt.each(["height","width"],function(t,r){yt.cssHooks[r]={get:function(t,e,i){if(e)return 0===t.offsetWidth&&Ct.test(yt.css(t,"display"))?yt.swap(t,Mt,function(){return Ut(t,r,i)}):Ut(t,r,i)},set:function(t,e,i){var n=i&&kt(t);return Gt(0,e,i?zt(t,r,i,yt.support.boxSizing&&"border-box"===yt.css(t,"boxSizing",!1,n),n):0)}}}),yt(function(){yt.support.reliableMarginRight||(yt.cssHooks.marginRight={get:function(t,e){if(e)return yt.swap(t,{display:"inline-block"},It,[t,"marginRight"])}}),!yt.support.pixelPosition&&yt.fn.position&&yt.each(["top","left"],function(t,i){yt.cssHooks[i]={get:function(t,e){if(e)return e=It(t,i),xt.test(e)?yt(t).position()[i]+"px":e}}})}),yt.expr&&yt.expr.filters&&(yt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},yt.expr.filters.visible=function(t){return!yt.expr.filters.hidden(t)}),yt.each({margin:"",padding:"",border:"Width"},function(r,s){yt.cssHooks[r+s]={expand:function(t){for(var e=0,i={},n="string"==typeof t?t.split(" "):[t];e<4;e++)i[r+Lt[e]+s]=n[e]||n[e-2]||n[0];return i}},Tt.test(r)||(yt.cssHooks[r+s].set=Gt)});var qt=/%20/g,$t=/\[\]$/,Ht=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Wt=/^(?:input|select|textarea|keygen)/i;function Kt(i,t,n,r){var e;if(yt.isArray(t))yt.each(t,function(t,e){n||$t.test(i)?r(i,e):Kt(i+"["+("object"==typeof e?t:"")+"]",e,n,r)});else if(n||"object"!==yt.type(t))r(i,t);else for(e in t)Kt(i+"["+e+"]",t[e],n,r)}yt.fn.extend({serialize:function(){return yt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=yt.prop(this,"elements");return t?yt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!yt(this).is(":disabled")&&Wt.test(this.nodeName)&&!Vt.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var i=yt(this).val();return null==i?null:yt.isArray(i)?yt.map(i,function(t){return{name:e.name,value:t.replace(Ht,"\r\n")}}):{name:e.name,value:i.replace(Ht,"\r\n")}}).get()}}),yt.param=function(t,e){var i,n=[],r=function(t,e){e=yt.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(e===I&&(e=yt.ajaxSettings&&yt.ajaxSettings.traditional),yt.isArray(t)||t.jquery&&!yt.isPlainObject(t))yt.each(t,function(){r(this.name,this.value)});else for(i in t)Kt(i,t[i],e,r);return n.join("&").replace(qt,"+")},yt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,i){yt.fn[i]=function(t,e){return 0<arguments.length?this.on(i,null,t,e):this.trigger(i)}}),yt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Xt,Zt,Qt=yt.now(),Jt=/\?/,te=/#.*$/,ee=/([?&])_=[^&]*/,ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,ne=/^(?:GET|HEAD)$/,re=/^\/\//,se=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,oe=yt.fn.load,ae={},ce={},he="*/".concat("*");try{Zt=t.href}catch(t){(Zt=g.createElement("a")).href="",Zt=Zt.href}function ue(s){return function(t,e){"string"!=typeof t&&(e=t,t="*");var i,n=0,r=t.toLowerCase().match(v)||[];if(yt.isFunction(e))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(s[i]=s[i]||[]).unshift(e)):(s[i]=s[i]||[]).push(e)}}function le(e,r,s,o){var a={},c=e===ce;function h(t){var n;return a[t]=!0,yt.each(e[t]||[],function(t,e){var i=e(r,s,o);return"string"!=typeof i||c||a[i]?c?!(n=i):void 0:(r.dataTypes.unshift(i),h(i),!1)}),n}return h(r.dataTypes[0])||!a["*"]&&h("*")}function pe(t,e){var i,n,r=yt.ajaxSettings.flatOptions||{};for(i in e)e[i]!==I&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&yt.extend(!0,t,n),t}Xt=se.exec(Zt.toLowerCase())||[],yt.fn.load=function(t,e,i){if("string"!=typeof t&&oe)return oe.apply(this,arguments);var n,r,s,o=this,a=t.indexOf(" ");return 0<=a&&(n=t.slice(a),t=t.slice(0,a)),yt.isFunction(e)?(i=e,e=I):e&&"object"==typeof e&&(r="POST"),0<o.length&&yt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){s=arguments,o.html(n?yt("<div>").append(yt.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){o.each(i,s||[t.responseText,e,t])}),this},yt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){yt.fn[e]=function(t){return this.on(e,t)}}),yt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":he,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":yt.parseJSON,"text xml":yt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?pe(pe(t,yt.ajaxSettings),e):pe(yt.ajaxSettings,t)},ajaxPrefilter:ue(ae),ajaxTransport:ue(ce),ajax:function(t,e){"object"==typeof t&&(e=t,t=I),e=e||{};var u,l,p,i,d,n,f,r,g=yt.ajaxSetup({},e),m=g.context||g,_=g.context&&(m.nodeType||m.jquery)?yt(m):yt.event,w=yt.Deferred(),S=yt.Callbacks("once memory"),y=g.statusCode||{},s={},o={},b=0,a="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!i)for(i={};e=ie.exec(p);)i[e[1].toLowerCase()]=e[2];e=i[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?p:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=o[i]=o[i]||t,s[t]=e),this},overrideMimeType:function(t){return b||(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(b<2)for(e in t)y[e]=[y[e],t[e]];else E.always(t[E.status]);return this},abort:function(t){var e=t||a;return u&&u.abort(e),c(0,e),this}};if(w.promise(E).complete=S.add,E.success=E.done,E.error=E.fail,g.url=((t||g.url||Zt)+"").replace(te,"").replace(re,Xt[1]+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=yt.trim(g.dataType||"*").toLowerCase().match(v)||[""],null==g.crossDomain&&(n=se.exec(g.url.toLowerCase()),g.crossDomain=!(!n||n[1]===Xt[1]&&n[2]===Xt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=yt.param(g.data,g.traditional)),le(ae,g,e,E),2===b)return E;for(r in(f=g.global)&&0==yt.active++&&yt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ne.test(g.type),l=g.url,g.hasContent||(g.data&&(l=g.url+=(Jt.test(l)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=ee.test(l)?l.replace(ee,"$1_="+Qt++):l+(Jt.test(l)?"&":"?")+"_="+Qt++)),g.ifModified&&(yt.lastModified[l]&&E.setRequestHeader("If-Modified-Since",yt.lastModified[l]),yt.etag[l]&&E.setRequestHeader("If-None-Match",yt.etag[l])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&E.setRequestHeader("Content-Type",g.contentType),E.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+he+"; q=0.01":""):g.accepts["*"]),g.headers)E.setRequestHeader(r,g.headers[r]);if(g.beforeSend&&(!1===g.beforeSend.call(m,E,g)||2===b))return E.abort();for(r in a="abort",{success:1,error:1,complete:1})E[r](g[r]);if(u=le(ce,g,e,E)){E.readyState=1,f&&_.trigger("ajaxSend",[E,g]),g.async&&0<g.timeout&&(d=setTimeout(function(){E.abort("timeout")},g.timeout));try{b=1,u.send(s,c)}catch(t){if(!(b<2))throw t;c(-1,t)}}else c(-1,"No Transport");function c(t,e,i,n){var r,s,o,a,c,h=e;2!==b&&(b=2,d&&clearTimeout(d),u=I,p=n||"",E.readyState=0<t?4:0,r=200<=t&&t<300||304===t,i&&(a=function(t,e,i){var n,r,s,o,a=t.contents,c=t.dataTypes;for(;"*"===c[0];)c.shift(),n===I&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){c.unshift(r);break}if(c[0]in i)s=c[0];else{for(r in i){if(!c[0]||t.converters[r+" "+c[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==c[0]&&c.unshift(s),i[s]}(g,E,i)),a=function(t,e,i,n){var r,s,o,a,c,h={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];s=u.shift();for(;s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!c&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),c=s,s=u.shift())if("*"===s)s=c;else if("*"!==c&&c!==s){if(!(o=h[c+" "+s]||h["* "+s]))for(r in h)if((a=r.split(" "))[1]===s&&(o=h[c+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[r]:!0!==h[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+c+" to "+s}}}return{state:"success",data:e}}(g,a,E,r),r?(g.ifModified&&((c=E.getResponseHeader("Last-Modified"))&&(yt.lastModified[l]=c),(c=E.getResponseHeader("etag"))&&(yt.etag[l]=c)),204===t||"HEAD"===g.type?h="nocontent":304===t?h="notmodified":(h=a.state,s=a.data,r=!(o=a.error))):(o=h,!t&&h||(h="error",t<0&&(t=0))),E.status=t,E.statusText=(e||h)+"",r?w.resolveWith(m,[s,h,E]):w.rejectWith(m,[E,h,o]),E.statusCode(y),y=I,f&&_.trigger(r?"ajaxSuccess":"ajaxError",[E,g,r?s:o]),S.fireWith(m,[E,h]),f&&(_.trigger("ajaxComplete",[E,g]),--yt.active||yt.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,i){return yt.get(t,e,i,"json")},getScript:function(t,e){return yt.get(t,I,e,"script")}}),yt.each(["get","post"],function(t,r){yt[r]=function(t,e,i,n){return yt.isFunction(e)&&(n=n||i,i=e,e=I),yt.ajax({url:t,type:r,dataType:n,data:e,success:i})}}),yt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return yt.globalEval(t),t}}}),yt.ajaxPrefilter("script",function(t){t.cache===I&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),yt.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(t,e){n=yt("<script>").prop({async:!0,charset:i.scriptCharset,src:i.url}).on("load error",r=function(t){n.remove(),r=null,t&&e("error"===t.type?404:200,t.type)}),g.head.appendChild(n[0])},abort:function(){r&&r()}}});var de=[],fe=/(=)\?(?=&|$)|\?\?/;yt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=de.pop()||yt.expando+"_"+Qt++;return this[t]=!0,t}}),yt.ajaxPrefilter("json jsonp",function(t,e,i){var n,r,s,o=!1!==t.jsonp&&(fe.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&fe.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=yt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(fe,"$1"+n):!1!==t.jsonp&&(t.url+=(Jt.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||yt.error(n+" was not called"),s[0]},t.dataTypes[0]="json",r=f[n],f[n]=function(){s=arguments},i.always(function(){f[n]=r,t[n]&&(t.jsonpCallback=e.jsonpCallback,de.push(n)),s&&yt.isFunction(r)&&r(s[0]),s=r=I}),"script"}),yt.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var ge=yt.ajaxSettings.xhr(),me={0:200,1223:204},_e=0,we={};f.ActiveXObject&&yt(f).on("unload",function(){for(var t in we)we[t]();we=I}),yt.support.cors=!!ge&&"withCredentials"in ge,yt.support.ajax=ge=!!ge,yt.ajaxTransport(function(s){var o;if(yt.support.cors||ge&&!s.crossDomain)return{send:function(t,e){var i,n,r=s.xhr();if(r.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(i in s.xhrFields)r[i]=s.xhrFields[i];for(i in s.mimeType&&r.overrideMimeType&&r.overrideMimeType(s.mimeType),s.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(i,t[i]);o=function(t){return function(){o&&(delete we[n],o=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?e(r.status||404,r.statusText):e(me[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:I,r.getAllResponseHeaders()))}},r.onload=o(),r.onerror=o("error"),o=we[n=_e++]=o("abort"),r.send(s.hasContent&&s.data||null)},abort:function(){o&&o()}}});var Se,ye,be=/^(?:toggle|show|hide)$/,Ee=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),Ie=/queueHooks$/,ve=[function(e,t,i){var n,r,s,o,a,c,h=this,u={},l=e.style,p=e.nodeType&&Ot(e),d=k.get(e,"fxshow");i.queue||(null==(a=yt._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,yt.queue(e,"fx").length||a.empty.fire()})}));1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===yt.css(e,"display")&&"none"===yt.css(e,"float")&&(l.display="inline-block"));i.overflow&&(l.overflow="hidden",h.always(function(){l.overflow=i.overflow[0],l.overflowX=i.overflow[1],l.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],be.exec(r)){if(delete t[n],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!d||d[n]===I)continue;p=!0}u[n]=d&&d[n]||yt.style(e,n)}if(!yt.isEmptyObject(u))for(n in d?"hidden"in d&&(p=d.hidden):d=k.access(e,"fxshow",{}),s&&(d.hidden=!p),p?yt(e).show():h.done(function(){yt(e).hide()}),h.done(function(){var t;for(t in k.remove(e,"fxshow"),u)yt.style(e,t,u[t])}),u)o=Ae(p?d[n]:0,n,h),n in d||(d[n]=o.start,p&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],Ce={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=Ee.exec(e),s=r&&r[3]||(yt.cssNumber[t]?"":"px"),o=(yt.cssNumber[t]||"px"!==s&&+n)&&Ee.exec(yt.css(i.elem,t)),a=1,c=20;if(o&&o[3]!==s)for(s=s||o[3],r=r||[],o=+n||1;o/=a=a||".5",yt.style(i.elem,t,o+s),a!==(a=i.cur()/n)&&1!==a&&--c;);return r&&(o=i.start=+o||+n||0,i.unit=s,i.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),i}]};function Te(){return setTimeout(function(){Se=I}),Se=yt.now()}function Ae(t,e,i){for(var n,r=(Ce[e]||[]).concat(Ce["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,e,t))return n}function xe(s,t,e){var i,o,n=0,r=ve.length,a=yt.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=Se||Te(),e=Math.max(0,h.startTime+h.duration-t),i=1-(e/h.duration||0),n=0,r=h.tweens.length;n<r;n++)h.tweens[n].run(i);return a.notifyWith(s,[h,i,e]),i<1&&r?e:(a.resolveWith(s,[h]),!1)},h=a.promise({elem:s,props:yt.extend({},t),opts:yt.extend(!0,{specialEasing:{}},e),originalProperties:t,originalOptions:e,startTime:Se||Te(),duration:e.duration,tweens:[],createTween:function(t,e){var i=yt.Tween(s,h.opts,t,e,h.opts.specialEasing[t]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var e=0,i=t?h.tweens.length:0;if(o)return this;for(o=!0;e<i;e++)h.tweens[e].run(1);return t?a.resolveWith(s,[h,t]):a.rejectWith(s,[h,t]),this}}),u=h.props;for(!function(t,e){var i,n,r,s,o;for(i in t)if(n=yt.camelCase(i),r=e[n],s=t[i],yt.isArray(s)&&(r=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),(o=yt.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete t[n],s)i in t||(t[i]=s[i],e[i]=r);else e[n]=r}(u,h.opts.specialEasing);n<r;n++)if(i=ve[n].call(h,s,u,h.opts))return i;return yt.map(u,Ae,h),yt.isFunction(h.opts.start)&&h.opts.start.call(s,h),yt.fx.timer(yt.extend(c,{elem:s,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function Pe(t,e,i,n,r){return new Pe.prototype.init(t,e,i,n,r)}function De(t,e){var i,n={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)n["margin"+(i=Lt[r])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function Me(t){return yt.isWindow(t)?t:9===t.nodeType&&t.defaultView}yt.Animation=yt.extend(xe,{tweener:function(t,e){for(var i,n=0,r=(t=yt.isFunction(t)?(e=t,["*"]):t.split(" ")).length;n<r;n++)i=t[n],Ce[i]=Ce[i]||[],Ce[i].unshift(e)},prefilter:function(t,e){e?ve.unshift(t):ve.push(t)}}),((yt.Tween=Pe).prototype={constructor:Pe,init:function(t,e,i,n,r,s){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(yt.cssNumber[i]?"":"px")},cur:function(){var t=Pe.propHooks[this.prop];return t&&t.get?t.get(this):Pe.propHooks._default.get(this)},run:function(t){var e,i=Pe.propHooks[this.prop];return this.options.duration?this.pos=e=yt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Pe.propHooks._default.set(this),this}}).init.prototype=Pe.prototype,(Pe.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=yt.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){yt.fx.step[t.prop]?yt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[yt.cssProps[t.prop]]||yt.cssHooks[t.prop])?yt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=Pe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},yt.each(["toggle","show","hide"],function(t,n){var r=yt.fn[n];yt.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(De(n,!0),t,e,i)}}),yt.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(e,t,i,n){var r=yt.isEmptyObject(e),s=yt.speed(t,i,n),o=function(){var t=xe(this,yt.extend({},e),s);(r||k.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(r,t,s){var o=function(t){var e=t.stop;delete t.stop,e(s)};return"string"!=typeof r&&(s=t,t=r,r=I),t&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var t=!0,e=null!=r&&r+"queueHooks",i=yt.timers,n=k.get(this);if(e)n[e]&&n[e].stop&&o(n[e]);else for(e in n)n[e]&&n[e].stop&&Ie.test(e)&&o(n[e]);for(e=i.length;e--;)i[e].elem!==this||null!=r&&i[e].queue!==r||(i[e].anim.stop(s),t=!1,i.splice(e,1));!t&&s||yt.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var t,e=k.get(this),i=e[o+"queue"],n=e[o+"queueHooks"],r=yt.timers,s=i?i.length:0;for(e.finish=!0,yt.queue(this,o,[]),n&&n.stop&&n.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===o&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete e.finish})}}),yt.each({slideDown:De("show"),slideUp:De("hide"),slideToggle:De("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){yt.fn[t]=function(t,e,i){return this.animate(n,t,e,i)}}),yt.speed=function(t,e,i){var n=t&&"object"==typeof t?yt.extend({},t):{complete:i||!i&&e||yt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!yt.isFunction(e)&&e};return n.duration=yt.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in yt.fx.speeds?yt.fx.speeds[n.duration]:yt.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){yt.isFunction(n.old)&&n.old.call(this),n.queue&&yt.dequeue(this,n.queue)},n},yt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},yt.timers=[],yt.fx=Pe.prototype.init,yt.fx.tick=function(){var t,e=yt.timers,i=0;for(Se=yt.now();i<e.length;i++)(t=e[i])()||e[i]!==t||e.splice(i--,1);e.length||yt.fx.stop(),Se=I},yt.fx.timer=function(t){t()&&yt.timers.push(t)&&yt.fx.start()},yt.fx.interval=13,yt.fx.start=function(){ye||(ye=setInterval(yt.fx.tick,yt.fx.interval))},yt.fx.stop=function(){clearInterval(ye),ye=null},yt.fx.speeds={slow:600,fast:200,_default:400},yt.fx.step={},yt.expr&&yt.expr.filters&&(yt.expr.filters.animated=function(e){return yt.grep(yt.timers,function(t){return e===t.elem}).length}),yt.fn.offset=function(e){if(arguments.length)return e===I?this:this.each(function(t){yt.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},s=n&&n.ownerDocument;return s?(t=s.documentElement,yt.contains(t,n)?(typeof n.getBoundingClientRect!==_&&(r=n.getBoundingClientRect()),i=Me(s),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r):void 0},yt.offset={setOffset:function(t,e,i){var n,r,s,o,a,c,h=yt.css(t,"position"),u=yt(t),l={};"static"===h&&(t.style.position="relative"),a=u.offset(),s=yt.css(t,"top"),c=yt.css(t,"left"),r=("absolute"===h||"fixed"===h)&&-1<(s+c).indexOf("auto")?(o=(n=u.position()).top,n.left):(o=parseFloat(s)||0,parseFloat(c)||0),yt.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(l.top=e.top-a.top+o),null!=e.left&&(l.left=e.left-a.left+r),"using"in e?e.using.call(t,l):u.css(l)}},yt.fn.extend({position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===yt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),yt.nodeName(t[0],"html")||(n=t.offset()),n.top+=yt.css(t[0],"borderTopWidth",!0),n.left+=yt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-yt.css(i,"marginTop",!0),left:e.left-n.left-yt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||n;t&&!yt.nodeName(t,"html")&&"static"===yt.css(t,"position");)t=t.offsetParent;return t||n})}}),yt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,r){var s="pageYOffset"===r;yt.fn[e]=function(t){return yt.access(this,function(t,e,i){var n=Me(t);if(i===I)return n?n[r]:t[e];n?n.scrollTo(s?f.pageXOffset:i,s?i:f.pageYOffset):t[e]=i},e,t,arguments.length,null)}}),yt.each({Height:"height",Width:"width"},function(s,o){yt.each({padding:"inner"+s,content:o,"":"outer"+s},function(n,t){yt.fn[t]=function(t,e){var i=arguments.length&&(n||"boolean"!=typeof t),r=n||(!0===t||!0===e?"margin":"border");return yt.access(this,function(t,e,i){var n;return yt.isWindow(t)?t.document.documentElement["client"+s]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+s],n["scroll"+s],t.body["offset"+s],n["offset"+s],n["client"+s])):i===I?yt.css(t,e,r):yt.style(t,e,i,r)},o,i?t:I,i,null)}})}),yt.fn.size=function(){return this.length},yt.fn.andSelf=yt.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=yt:"function"==typeof define&&define.amd&&define("jquery",[],function(){return yt}),"object"==typeof f&&"object"==typeof f.document&&(f.jQuery=f.$=yt)}(window),function(o){var e=["DOMMouseScroll","mousewheel"];if(o.event.fixHooks)for(var t=e.length;t;)o.event.fixHooks[e[--t]]=o.event.mouseHooks;function i(t){var e=t||window.event,i=[].slice.call(arguments,1),n=0,r=0,s=0;return(t=o.event.fix(e)).type="mousewheel",e.wheelDelta&&(n=e.wheelDelta/120),e.detail&&(n=-e.detail/3),s=n,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(s=0,r=-1*n),void 0!==e.wheelDeltaY&&(s=e.wheelDeltaY/120),void 0!==e.wheelDeltaX&&(r=-1*e.wheelDeltaX/120),i.unshift(t,n,r,s),(o.event.dispatch||o.event.handle).apply(this,i)}o.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=e.length;t;)this.addEventListener(e[--t],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var t=e.length;t;)this.removeEventListener(e[--t],i,!1);else this.onmousewheel=null}},o.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),function(m){function _(t){t.startMove=t.startMove?t.startMove:{startX:null,startY:null,timestamp:null};var e=(new Date).getTime();if(t.touches){var i=[{lastX:t.deltaX,lastY:t.deltaY,moved:null,startX:t.screenX-t.startMove.screenX,startY:t.screenY-t.startMove.screenY}],n={vector:t.vector,orientation:window.orientation||null,lastX:0<i[0].lastX?1:i[0].lastX<0?-1:0,lastY:0<i[0].lastY?1:i[0].lastY<0?-1:0,startX:0<i[0].startX?1:i[0].startX<0?-1:0,startY:0<i[0].startY?1:i[0].startY<0?-1:0};i[0].moved=Math.sqrt(Math.pow(Math.abs(i[0].startX),2)+Math.pow(Math.abs(i[0].startY),2))}return{type:t.type||null,originalEvent:t.event||null,delta:i||null,direction:n||{orientation:window.orientation||null,vector:t.vector||null},duration:t.startMove.timestamp?e-t.timestamp:null,rotation:t.rotation||null,scale:t.scale||null,description:t.description||[t.type,":",t.touches,":",0!=i[0].lastX?0<i[0].lastX?"right":"left":"steady",":",0!=i[0].lastY?0<i[0].lastY?"down":"up":"steady"].join("")}}function a(t){m(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"][window.orientation/90+1],window.orientation].join("")})}function c(t){var e=jQuery(t.currentTarget);e.triggerHandler(m.jGestures.events.touchstart,t),m.hasGestures?(t.currentTarget.addEventListener("touchmove",w,!1),t.currentTarget.addEventListener("touchend",S,!1)):(e.bind("mousemove",w),e.bind("mouseup",S));var i=e.data("ojQueryGestures"),n=t.touches?t.touches[0]:t,r={};r.oLastSwipemove={screenX:n.screenX,screenY:n.screenY,timestamp:(new Date).getTime()},r.oStartTouch={screenX:n.screenX,screenY:n.screenY,timestamp:(new Date).getTime()},e.data("ojQueryGestures",m.extend(!0,i,r))}function w(t){var e=jQuery(t.currentTarget),i=e.data("ojQueryGestures"),n=!!t.touches,r=n?t.changedTouches[0].screenX:t.screenX,s=n?t.changedTouches[0].screenY:t.screenY,o=i.oLastSwipemove,a=r-o.screenX,c=s-o.screenY;if(i.oLastSwipemove){var h=_({type:"swipemove",touches:n?t.touches.length:"1",screenY:s,screenX:r,deltaY:c,deltaX:a,startMove:o,event:t,timestamp:o.timestamp});e.triggerHandler(h.type,h)}var u={},l=t.touches?t.touches[0]:t;u.oLastSwipemove={screenX:l.screenX,screenY:l.screenY,timestamp:(new Date).getTime()},e.data("ojQueryGestures",m.extend(!0,i,u))}function S(t){var e=jQuery(t.currentTarget),i=!!t.changedTouches,n=i?t.changedTouches.length:"1",r=i?t.changedTouches[0].screenX:t.screenX,s=i?t.changedTouches[0].screenY:t.screenY;e.triggerHandler(m.jGestures.events.touchendStart,t),m.hasGestures?(t.currentTarget.removeEventListener("touchmove",w,!1),t.currentTarget.removeEventListener("touchend",S,!1)):(e.unbind("mousemove",w),e.unbind("mouseup",S));var o,a=e.data("ojQueryGestures"),c=Math.abs(a.oStartTouch.screenX-r)>m.jGestures.defaults.thresholdMove||Math.abs(a.oStartTouch.screenY-s)>m.jGestures.defaults.thresholdMove,h=Math.abs(a.oStartTouch.screenX-r)>m.jGestures.defaults.thresholdSwipe||Math.abs(a.oStartTouch.screenY-s)>m.jGestures.defaults.thresholdSwipe;for(o in a){var u=a.oStartTouch,l=(r=i?t.changedTouches[0].screenX:t.screenX,s=i?t.changedTouches[0].screenY:t.screenY,r-u.screenX),p=_({type:"swipe",touches:n,screenY:s,screenX:r,deltaY:s-u.screenY,deltaX:l,startMove:u,event:t,timestamp:u.timestamp}),d=["zero","one","two","three","four"],f=!1;switch(o){case"swipeone":if(!1===i&&1==n&&!1===c)break;(!1===i||1==n&&!0===c&&!0===h)&&(f=!0,p.type=["swipe",d[n]].join(""),e.triggerHandler(p.type,p));break;case"swipetwo":i&&2==n&&!0===c&&!0===h&&(f=!0,p.type=["swipe",d[n]].join(""),e.triggerHandler(p.type,p));break;case"swipethree":i&&3==n&&!0===c&&!0===h&&(f=!0,p.type=["swipe",d[n]].join(""),e.triggerHandler(p.type,p));break;case"swipefour":i&&4==n&&!0===c&&!0===h&&(f=!0,p.type=["swipe",d[n]].join(""),e.triggerHandler(p.type,p));break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":i&&!0===c&&!0===h&&(f=!0,p.type=["swipe",0!=p.delta[0].lastX?0<p.delta[0].lastX?"right":"left":"",0!=p.delta[0].lastY?0<p.delta[0].lastY?"down":"up":""].join(""),e.triggerHandler(p.type,p));break;case"tapone":case"taptwo":case"tapthree":case"tapfour":!0!==c&&!0!==f&&d[n]==o.slice(3)&&(p.description=["tap",d[n]].join(""),p.type=["tap",d[n]].join(""),e.triggerHandler(p.type,p))}var g={};e.data("ojQueryGestures",m.extend(!0,a,g)),e.data("ojQueryGestures",m.extend(!0,a,g))}e.triggerHandler(m.jGestures.events.touchendProcessed,t)}function h(t){var e=jQuery(t.currentTarget);e.triggerHandler(m.jGestures.events.gesturestart,t);var i=e.data("ojQueryGestures"),n={};n.oStartTouch={timestamp:(new Date).getTime()},e.data("ojQueryGestures",m.extend(!0,i,n))}function u(t){var e,i,n,r,s=jQuery(t.currentTarget),o=s.data("ojQueryGestures");for(r in o)switch(r){case"pinch":((e=t.scale)<1&&e%1<1-m.jGestures.defaults.thresholdPinchclose||1<e&&e%1>m.jGestures.defaults.thresholdPinchopen)&&(i=e<1?-1:1,n=_({type:"pinch",scale:e,touches:null,startMove:o.oStartTouch,event:t,timestamp:o.oStartTouch.timestamp,vector:i,description:["pinch:",i,":",e<1?"close":"open"].join("")}),s.triggerHandler(n.type,n));break;case"rotate":((e=t.rotation)<1&&-1*e>m.jGestures.defaults.thresholdRotateccw||1<e&&e>m.jGestures.defaults.thresholdRotatecw)&&(i=e<1?-1:1,n=_({type:"rotate",rotation:e,touches:null,startMove:o.oStartTouch,event:t,timestamp:o.oStartTouch.timestamp,vector:i,description:["rotate:",i,":",e<1?"counterclockwise":"clockwise"].join("")}),s.triggerHandler(n.type,n))}}function l(t){var e,i=jQuery(t.currentTarget);i.triggerHandler(m.jGestures.events.gestureendStart,t);var n,r=i.data("ojQueryGestures");for(n in r)switch(n){case"pinchclose":(e=t.scale)<1&&e%1<1-m.jGestures.defaults.thresholdPinchclose&&i.triggerHandler("pinchclose",_({type:"pinchclose",scale:e,vector:-1,touches:null,startMove:r.oStartTouch,event:t,timestamp:r.oStartTouch.timestamp,description:"pinch:-1:close"}));break;case"pinchopen":1<(e=t.scale)&&e%1>m.jGestures.defaults.thresholdPinchopen&&i.triggerHandler("pinchopen",_({type:"pinchopen",scale:e,vector:1,touches:null,startMove:r.oStartTouch,event:t,timestamp:r.oStartTouch.timestamp,description:"pinch:+1:open"}));break;case"rotatecw":1<(e=t.rotation)&&e>m.jGestures.defaults.thresholdRotatecw&&i.triggerHandler("rotatecw",_({type:"rotatecw",rotation:e,vector:1,touches:null,startMove:r.oStartTouch,event:t,timestamp:r.oStartTouch.timestamp,description:"rotate:+1:clockwise"}));break;case"rotateccw":(e=t.rotation)<1&&-1*e>m.jGestures.defaults.thresholdRotateccw&&i.triggerHandler("rotateccw",_({type:"rotateccw",rotation:e,vector:-1,touches:null,startMove:r.oStartTouch,event:t,timestamp:r.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}i.triggerHandler(m.jGestures.events.gestureendProcessed,t)}m.jGestures={},m.jGestures.defaults={},m.jGestures.defaults.thresholdPinchopen=.05,m.jGestures.defaults.thresholdPinchmove=.05,m.jGestures.defaults.thresholdPinch=.05,m.jGestures.defaults.thresholdPinchclose=.05,m.jGestures.defaults.thresholdRotatecw=5,m.jGestures.defaults.thresholdRotateccw=5,m.jGestures.defaults.thresholdMove=20,m.jGestures.defaults.thresholdSwipe=100,m.jGestures.data={},m.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"],m.jGestures.data.hasGestures=function(){var t;for(t=0;t<m.jGestures.data.capableDevicesInUserAgentString.length;t++)if(-1!==navigator.userAgent.indexOf(m.jGestures.data.capableDevicesInUserAgentString[t]))return!0;return!1}(),m.hasGestures=m.jGestures.data.hasGestures,m.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"},jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour"},function(o,t){jQuery.event.special[t]={setup:function(){var t=o.split("_"),e=t[0],i=t[1].slice(0,t[1].length-2),n=jQuery(this);if(!n.data("ojQueryGestures")||!n.data("ojQueryGestures")[e]){var r=n.data("ojQueryGestures")||{},s={};if(s[e]=!0,m.extend(!0,r,s),n.data("ojQueryGestures",r),m.hasGestures)switch(i){case"orientationchange":n.get(0).addEventListener("orientationchange",a,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":n.get(0).addEventListener("touchstart",c,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":n.get(0).addEventListener("gesturestart",h,!1),n.get(0).addEventListener("gestureend",l,!1);break;case"pinch":case"rotate":n.get(0).addEventListener("gesturestart",h,!1),n.get(0).addEventListener("gesturechange",u,!1)}else switch(i){case"tap":case"swipe":n.bind("mousedown",c)}}return!1},add:function(t){return!(jQuery(this).data("ojQueryGestures")[t.type]={originalType:t.type})},remove:function(t){var e=jQuery(this),i=e.data("ojQueryGestures");return i[t.type]=!1,e.data("ojQueryGestures",i),!1},teardown:function(){var t=o.split("_"),e=t[0],i=t[1].slice(0,t[1].length-2),n=jQuery(this);if(!n.data("ojQueryGestures")||!n.data("ojQueryGestures")[e]){var r=n.data("ojQueryGestures")||{},s={};if(s[e]=!1,m.extend(!0,r,s),n.data("ojQueryGestures",r),m.hasGestures)switch(i){case"orientationchange":n.get(0).removeEventListener("orientationchange",a,!1);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":n.get(0).removeEventListener("touchstart",c,!1),n.get(0).removeEventListener("touchmove",w,!1),n.get(0).removeEventListener("touchend",S,!1);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":n.get(0).removeEventListener("gesturestart",h,!1),n.get(0).removeEventListener("gestureend",l,!1);break;case"pinch":case"rotate":n.get(0).removeEventListener("gesturestart",h,!1),n.get(0).removeEventListener("gesturechange",u,!1)}else switch(i){case"tap":case"swipe":n.unbind("mousedown",c),n.unbind("mousemove",w),n.unbind("mouseup",S)}}return!1}}})}(jQuery);var Pixastic=function(){function n(t,e,n){var r=new Array;null==e&&(e=document),null==n&&(n="*");var s=e.getElementsByTagName(n),o=s.length,a=new RegExp("(^|\\s)"+t+"(\\s|$)");for(i=0,j=0;i<o;i++)a.test(s[i].className)&&(r[j]=s[i],j++);return r}function w(t,e){if(Pixastic.debug){try{switch(e){case"warn":console.warn("Pixastic:",t);break;case"error":console.error("Pixastic:",t);break;default:console.log("Pixastic:",t)}}catch(t){}1}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&function(t){var e=!1,i=function(){e||(e=!0,t())};document.write('<script defer src="//:" id="__onload_ie_pixastic__"><\/script>');var n,r,s,o=document.getElementById("__onload_ie_pixastic__");o.onreadystatechange=function(){"complete"==o.readyState&&(o.parentNode.removeChild(o),i())},document.addEventListener&&document.addEventListener("DOMContentLoaded",i,!1),n=window,r="load",s=i,n.addEventListener?n.addEventListener(r,s,!1):n.attachEvent&&n.attachEvent("on"+r,s)}(function(){for(var t=n("pixastic",null,"img"),e=n("pixastic",null,"canvas"),h=t.concat(e),u=0;u<h.length;u++)!function(){for(var i=h[u],n=[],t=i.className.split(" "),e=0;e<t.length;e++){var r=t[e];if("pixastic-"==r.substring(0,9)){var s=r.substring(9);""!=s&&n.push(s)}}if(n.length)if("img"==i.tagName.toLowerCase()){var o=new Image;if(o.src=i.src,o.complete)for(var a=0;a<n.length;a++){var c=Pixastic.applyAction(i,i,n[a],null);c&&(i=c)}else o.onload=function(){for(var t=0;t<n.length;t++){var e=Pixastic.applyAction(i,i,n[t],null);e&&(i=e)}}}else setTimeout(function(){for(var t=0;t<n.length;t++){var e=Pixastic.applyAction(i,i,n[t],null);e&&(i=e)}},1)}()});var o=function(){var t=document.createElement("canvas"),e=!1;try{e=!("function"!=typeof t.getContext||!t.getContext("2d"))}catch(t){}return function(){return e}}(),a=function(){var t,e=document.createElement("canvas"),i=!1;try{"function"==typeof e.getContext&&(t=e.getContext("2d"))&&(i="function"==typeof t.getImageData)}catch(t){}return function(){return i}}(),t=function(){var t=!1,e=document.createElement("canvas");if(o()&&a()){e.width=e.height=1;var i=e.getContext("2d");i.fillStyle="rgb(255,0,0)",i.fillRect(0,0,1,1);var n=document.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");r.fillStyle="rgb(0,0,255)",r.fillRect(0,0,1,1),i.globalAlpha=.5,i.drawImage(n,0,0);var s=i.getImageData(0,0,1,1).data;t=255!=s[2]}return function(){return t}}();return{parseOnLoad:!1,debug:!1,applyAction:function(t,e,i,n){n=n||{};var r,s,o="canvas"==t.tagName.toLowerCase();if(o&&Pixastic.Client.isIE())return Pixastic.debug&&w("Tried to process a canvas element but browser is IE."),!1;var a=!1;Pixastic.Client.hasCanvas()&&(a=!!n.resultCanvas,s=(r=n.resultCanvas||document.createElement("canvas")).getContext("2d"));var c=t.offsetWidth,h=t.offsetHeight;if(o&&(c=t.width,h=t.height),0==c||0==h){if(null!=t.parentNode)return void(Pixastic.debug&&w("Image has 0 width and/or height."));var u=t.style.position,l=t.style.left;t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),c=t.offsetWidth,h=t.offsetHeight,document.body.removeChild(t),t.style.position=u,t.style.left=l}if(-1<i.indexOf("(")){var p=i;i=p.substr(0,p.indexOf("("));var d=p.match(/\((.*?)\)/);if(d[1]){d=d[1].split(";");for(var f=0;f<d.length;f++)if(thisArg=d[f].split("="),2==thisArg.length)if("rect"==thisArg[0]){var g=thisArg[1].split(",");n[thisArg[0]]={left:parseInt(g[0],10)||0,top:parseInt(g[1],10)||0,width:parseInt(g[2],10)||0,height:parseInt(g[3],10)||0}}else n[thisArg[0]]=thisArg[1]}}n.rect?(n.rect.left=Math.round(n.rect.left),n.rect.top=Math.round(n.rect.top),n.rect.width=Math.round(n.rect.width),n.rect.height=Math.round(n.rect.height)):n.rect={left:0,top:0,width:c,height:h};var m=!1;if(Pixastic.Actions[i]&&"function"==typeof Pixastic.Actions[i].process&&(m=!0),!m)return Pixastic.debug&&w('Invalid action "'+i+'". Maybe file not included?'),!1;if(!Pixastic.Actions[i].checkSupport())return Pixastic.debug&&w('Action "'+i+'" not supported by this browser.'),!1;Pixastic.Client.hasCanvas()?(r!==t&&(r.width=c,r.height=h),a||(r.style.width=c+"px",r.style.height=h+"px"),s.drawImage(e,0,0,c,h),t.__pixastic_org_image?(r.__pixastic_org_image=t.__pixastic_org_image,r.__pixastic_org_width=t.__pixastic_org_width,r.__pixastic_org_height=t.__pixastic_org_height):(r.__pixastic_org_image=t,r.__pixastic_org_width=c,r.__pixastic_org_height=h)):Pixastic.Client.isIE()&&void 0===t.__pixastic_org_style&&(t.__pixastic_org_style=t.style.cssText);var _={image:t,canvas:r,width:c,height:h,useData:!0,options:n};return!!Pixastic.Actions[i].process(_)&&(Pixastic.Client.hasCanvas()?(_.useData&&Pixastic.Client.hasCanvasImageData()&&(r.getContext("2d").putImageData(_.canvasData,n.rect.left,n.rect.top),r.getContext("2d").fillRect(0,0,0,0)),n.leaveDOM||(r.title=t.title,r.imgsrc=t.imgsrc,o||(r.alt=t.alt),o||(r.imgsrc=t.src),r.className=t.className,r.style.cssText=t.style.cssText,r.name=t.name,r.tabIndex=t.tabIndex,r.id=t.id,t.parentNode&&t.parentNode.replaceChild&&t.parentNode.replaceChild(r,t)),n.resultCanvas=r):t)},prepareData:function(t,e){var i=t.canvas.getContext("2d"),n=t.options.rect,r=i.getImageData(n.left,n.top,n.width,n.height),s=r.data;return e||(t.canvasData=r),s},process:function(e,i,n,r){if("img"==e.tagName.toLowerCase()){var s=new Image;if(s.src=e.src,s.complete){var t=Pixastic.applyAction(e,s,i,n);return r&&r(t),t}s.onload=function(){var t=Pixastic.applyAction(e,s,i,n);r&&r(t)}}if("canvas"==e.tagName.toLowerCase()){t=Pixastic.applyAction(e,e,i,n);return r&&r(t),t}},revert:function(t){if(Pixastic.Client.hasCanvas()){if("canvas"==t.tagName.toLowerCase()&&t.__pixastic_org_image)return t.width=t.__pixastic_org_width,t.height=t.__pixastic_org_height,t.getContext("2d").drawImage(t.__pixastic_org_image,0,0),t.parentNode&&t.parentNode.replaceChild&&t.parentNode.replaceChild(t.__pixastic_org_image,t),t}else Pixastic.Client.isIE()&&void 0!==t.__pixastic_org_style&&(t.style.cssText=t.__pixastic_org_style)},Client:{hasCanvas:o,hasCanvasImageData:a,hasGlobalAlpha:t,isIE:function(){return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}();"undefined"!=typeof jQuery&&jQuery&&jQuery.fn&&(jQuery.fn.pixastic=function(e,i){var n=[];return this.each(function(){if("img"!=this.tagName.toLowerCase()||this.complete){var t=Pixastic.process(this,e,i);t&&n.push(t)}}),0<n.length?jQuery(n):this}),Pixastic.Actions.blend={process:function(t){var e=parseFloat(t.options.amount),i=(t.options.mode||"normal").toLowerCase(),n=t.options.image;if(e=Math.max(0,Math.min(1,e)),!n)return!1;if(Pixastic.Client.hasCanvasImageData()){var r=t.options.rect,s=Pixastic.prepareData(t),o=r.width,a=r.height;t.useData=!1;var c=document.createElement("canvas");c.width=t.canvas.width,c.height=t.canvas.height;var h=c.getContext("2d");h.drawImage(n,0,0);var u,l,p,d,f,g,m,_,w,S,y,b,E,I,v={canvas:c,options:t.options},C=Pixastic.prepareData(v),T=v.canvasData,A=4*(M=o*a),x=!1;switch(i){case"normal":break;case"multiply":for(;M--;)C[A-=4]=s[A]*C[A]/255,C[u=A+1]=s[u]*C[u]/255,C[l=A+2]=s[l]*C[l]/255;x=!0;break;case"lighten":for(;M--;)(p=s[A-=4])>C[A]&&(C[A]=p),(d=s[u=A+1])>C[u]&&(C[u]=d),(f=s[l=A+2])>C[l]&&(C[l]=f);x=!0;break;case"darken":for(;M--;)(p=s[A-=4])<C[A]&&(C[A]=p),(d=s[u=A+1])<C[u]&&(C[u]=d),(f=s[l=A+2])<C[l]&&(C[l]=f);x=!0;break;case"darkercolor":for(;M--;).3*(p=s[A-=4])+.59*(d=s[u=A+1])+.11*(f=s[l=A+2])<=.3*C[A]+.59*C[u]+.11*C[l]&&(C[A]=p,C[u]=d,C[l]=f);x=!0;break;case"lightercolor":for(;M--;).3*(p=s[A-=4])+.59*(d=s[u=A+1])+.11*(f=s[l=A+2])>.3*C[A]+.59*C[u]+.11*C[l]&&(C[A]=p,C[u]=d,C[l]=f);x=!0;break;case"lineardodge":for(;M--;)255<(w=s[A-=4]+C[A])?C[A]=255:C[A]=w,255<(S=s[u=A+1]+C[u])?C[u]=255:C[u]=S,255<(y=s[l=A+2]+C[l])?C[l]=255:C[l]=y;x=!0;break;case"linearburn":for(;M--;)(w=s[A-=4]+C[A])<255?C[A]=0:C[A]=w-255,(S=s[u=A+1]+C[u])<255?C[u]=0:C[u]=S-255,(y=s[l=A+2]+C[l])<255?C[l]=0:C[l]=y-255;x=!0;break;case"difference":for(;M--;)(w=s[A-=4]-C[A])<0?C[A]=-w:C[A]=w,(S=s[u=A+1]-C[u])<0?C[u]=-S:C[u]=S,(y=s[l=A+2]-C[l])<0?C[l]=-y:C[l]=y;x=!0;break;case"screen":for(;M--;)C[A-=4]=255-((255-C[A])*(255-s[A])>>8),C[u=A+1]=255-((255-C[u])*(255-s[u])>>8),C[l=A+2]=255-((255-C[l])*(255-s[l])>>8);x=!0;break;case"exclusion":for(var P=2/255;M--;)C[A-=4]=(p=s[A])-(p*P-1)*C[A],C[u=A+1]=(d=s[u])-(d*P-1)*C[u],C[l=A+2]=(f=s[l])-(f*P-1)*C[l];x=!0;break;case"overlay":for(P=2/255;M--;)(p=s[A-=4])<128?C[A]=C[A]*p*P:C[A]=255-(255-C[A])*(255-p)*P,(d=s[u=A+1])<128?C[u]=C[u]*d*P:C[u]=255-(255-C[u])*(255-d)*P,(f=s[l=A+2])<128?C[l]=C[l]*f*P:C[l]=255-(255-C[l])*(255-f)*P;x=!0;break;case"softlight":for(P=2/255;M--;)(p=s[A-=4])<128?C[A]=(64+(C[A]>>1))*p*P:C[A]=255-(191-(C[A]>>1))*(255-p)*P,(d=s[u=A+1])<128?C[u]=(64+(C[u]>>1))*d*P:C[u]=255-(191-(C[u]>>1))*(255-d)*P,(f=s[l=A+2])<128?C[l]=(64+(C[l]>>1))*f*P:C[l]=255-(191-(C[l]>>1))*(255-f)*P;x=!0;break;case"hardlight":for(P=2/255;M--;)(g=C[A-=4])<128?C[A]=s[A]*g*P:C[A]=255-(255-s[A])*(255-g)*P,(m=C[u=A+1])<128?C[u]=s[u]*m*P:C[u]=255-(255-s[u])*(255-m)*P,(_=C[l=A+2])<128?C[l]=s[l]*_*P:C[l]=255-(255-s[l])*(255-_)*P;x=!0;break;case"colordodge":for(;M--;)255<(w=(s[A-=4]<<8)/(255-(g=C[A])))||255==g?C[A]=255:C[A]=w,255<(S=(s[u=A+1]<<8)/(255-(m=C[u])))||255==m?C[u]=255:C[u]=S,255<(y=(s[l=A+2]<<8)/(255-(_=C[l])))||255==_?C[l]=255:C[l]=y;x=!0;break;case"colorburn":for(;M--;)(w=255-(255-s[A-=4]<<8)/C[A])<0||0==C[A]?C[A]=0:C[A]=w,(S=255-(255-s[u=A+1]<<8)/C[u])<0||0==C[u]?C[u]=0:C[u]=S,(y=255-(255-s[l=A+2]<<8)/C[l])<0||0==C[l]?C[l]=0:C[l]=y;x=!0;break;case"linearlight":for(;M--;)(w=2*(g=C[A-=4])+s[A]-256)<0||g<128&&w<0?C[A]=0:C[A]=255<w?255:w,(S=2*(m=C[u=A+1])+s[u]-256)<0||m<128&&S<0?C[u]=0:C[u]=255<S?255:S,(y=2*(_=C[l=A+2])+s[l]-256)<0||_<128&&y<0?C[l]=0:C[l]=255<y?255:y;x=!0;break;case"vividlight":for(;M--;)(g=C[A-=4])<128?g?(w=255-(255-s[A]<<8)/(2*g))<0?C[A]=0:C[A]=w:C[A]=0:(w=b=2*g-256)<255?255<(w=(s[A]<<8)/(255-b))?C[A]=255:C[A]=w:C[A]=w<0?0:w,(m=C[u=A+1])<128?m?(S=255-(255-s[u]<<8)/(2*m))<0?C[u]=0:C[u]=S:C[u]=0:(S=E=2*m-256)<255?255<(S=(s[u]<<8)/(255-E))?C[u]=255:C[u]=S:C[u]=S<0?0:S,(_=C[l=A+2])<128?_?(y=255-(255-s[l]<<8)/(2*_))<0?C[l]=0:C[l]=y:C[l]=0:(y=I=2*_-256)<255?255<(y=(s[l]<<8)/(255-I))?C[l]=255:C[l]=y:C[l]=y<0?0:y;x=!0;break;case"pinlight":for(;M--;)(g=C[A-=4])<128?(p=s[A])<(b=2*g)?C[A]=p:C[A]=b:(p=s[A])>(b=2*g-256)?C[A]=p:C[A]=b,(m=C[u=A+1])<128?(d=s[u])<(E=2*m)?C[u]=d:C[u]=E:(d=s[u])>(E=2*m-256)?C[u]=d:C[u]=E,(g=C[l=A+2])<128?(p=s[l])<(b=2*g)?C[l]=p:C[l]=b:(p=s[l])>(b=2*g-256)?C[l]=p:C[l]=b;x=!0;break;case"hardmix":for(;M--;)(g=C[A-=4])<128?255-(255-s[A]<<8)/(2*g)<128||0==g?C[A]=0:C[A]=255:(b=2*g-256)<255&&(s[A]<<8)/(255-b)<128?C[A]=0:C[A]=255,(m=C[u=A+1])<128?255-(255-s[u]<<8)/(2*m)<128||0==m?C[u]=0:C[u]=255:(E=2*m-256)<255&&(s[u]<<8)/(255-E)<128?C[u]=0:C[u]=255,(_=C[l=A+2])<128?255-(255-s[l]<<8)/(2*_)<128||0==_?C[l]=0:C[l]=255:(I=2*_-256)<255&&(s[l]<<8)/(255-I)<128?C[l]=0:C[l]=255;x=!0}if(x&&h.putImageData(T,0,0),1==e||Pixastic.Client.hasGlobalAlpha()){var D=t.canvas.getContext("2d");D.save(),D.globalAlpha=e,D.drawImage(c,0,0,r.width,r.height,r.left,r.top,r.width,r.height),D.globalAlpha=1,D.restore()}else{for(var M=o*a,N=e,L=1-e;M--;){var B=s[A=4*M]*L+C[A]*N>>0,R=s[A+1]*L+C[A+1]*N>>0,O=s[A+2]*L+C[A+2]*N>>0;s[A]=B,s[A+1]=R,s[A+2]=O}t.useData=!0}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.blur={process:function(t){if(void 0===t.options.fixMargin&&(t.options.fixMargin=!0),Pixastic.Client.hasCanvasImageData()){for(var e=Pixastic.prepareData(t),i=Pixastic.prepareData(t,!0),n=[[0,1,0],[1,2,1],[0,1,0]],r=0,s=0;s<3;s++)for(var o=0;o<3;o++)r+=n[s][o];r=1/(2*r);var a=t.options.rect,c=a.width,h=a.height,u=4*c,l=h;do{var p=(l-1)*u,d=(1==l?0:l-2)*c*4,f=(l==h?l-1:l)*c*4,g=c;do{var m=p+(4*g-4),_=d+4*(1==g?0:g-2),w=f+4*(g==c?g-1:g);e[m]=(2*(i[_]+i[m-4]+i[m+4]+i[w])+4*i[m])*r,e[m+1]=(2*(i[_+1]+i[m-3]+i[m+5]+i[w+1])+4*i[m+1])*r,e[m+2]=(2*(i[_+2]+i[m-2]+i[m+6]+i[w+2])+4*i[m+2])*r}while(--g)}while(--l);return!0}if(Pixastic.Client.isIE())return t.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius=1.5)",t.options.fixMargin&&(t.image.style.marginLeft=(parseInt(t.image.style.marginLeft,10)||0)-2+"px",t.image.style.marginTop=(parseInt(t.image.style.marginTop,10)||0)-2+"px"),!0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}},Pixastic.Actions.blurfast={process:function(t){var e=parseFloat(t.options.amount)||0,i=!(!t.options.clear||"false"==t.options.clear);if(e=Math.max(0,Math.min(5,e)),Pixastic.Client.hasCanvas()){var n=t.options.rect,r=t.canvas.getContext("2d");r.save(),r.beginPath(),r.rect(n.left,n.top,n.width,n.height),r.clip();var s=Math.round(t.width/2),o=Math.round(t.height/2),a=document.createElement("canvas");a.width=s,a.height=o;i=!1;for(var c=Math.round(20*e),h=a.getContext("2d"),u=0;u<c;u++){var l=Math.max(1,Math.round(s-u)),p=Math.max(1,Math.round(o-u));h.clearRect(0,0,s,o),h.drawImage(t.canvas,0,0,t.width,t.height,0,0,l,p),i&&r.clearRect(n.left,n.top,n.width,n.height),r.drawImage(a,0,0,l,p,0,0,t.width,t.height)}return r.restore(),!(t.useData=!1)}if(Pixastic.Client.isIE()){var d=10*e;return t.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius="+d+")",t.options.fixMargin,t.image.style.marginLeft=(parseInt(t.image.style.marginLeft,10)||0)-Math.round(d)+"px",t.image.style.marginTop=(parseInt(t.image.style.marginTop,10)||0)-Math.round(d)+"px",!0}},checkSupport:function(){return Pixastic.Client.hasCanvas()||Pixastic.Client.isIE()}},Pixastic.Actions.brightness={process:function(t){var e=parseInt(t.options.brightness,10)||0,i=parseFloat(t.options.contrast)||0,n=!(!t.options.legacy||"false"==t.options.legacy);if(n)e=Math.min(150,Math.max(-150,e));else var r=1+Math.min(150,Math.max(-150,e))/150;if(i=Math.max(0,i+1),Pixastic.Client.hasCanvasImageData()){var s,o,a,c,h,u,l,p=Pixastic.prepareData(t),d=t.options.rect,f=d.width*d.height,g=4*f;for(c=1!=i?n?(e-128)*(a=i)+128:(a=r*i,128*-i+128):n?(a=1,e):(a=r,0);f--;)255<(h=p[g-=4]*a+c)?p[g]=255:p[g]=h<0?0:h,255<(u=p[s=g+1]*a+c)?p[s]=255:p[s]=u<0?0:u,255<(l=p[o=g+2]*a+c)?p[o]=255:p[o]=l<0?0:l;return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.coloradjust={process:function(t){var e=parseFloat(t.options.red)||0,i=parseFloat(t.options.green)||0,n=parseFloat(t.options.blue)||0;if(e=Math.round(255*e),i=Math.round(255*i),n=Math.round(255*n),Pixastic.Client.hasCanvasImageData()){for(var r,s,o,a,c,h=Pixastic.prepareData(t),u=t.options.rect,l=u.width*u.height,p=4*l;l--;)p-=4,e&&((o=h[p]+e)<0?h[p]=0:h[p]=255<o?255:o),i&&((a=h[r=p+1]+i)<0?h[r]=0:h[r]=255<a?255:a),n&&((c=h[s=p+2]+n)<0?h[s]=0:h[s]=255<c?255:c);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.colorhistogram={array256:function(t){arr=[];for(var e=0;e<256;e++)arr[e]=t;return arr},process:function(t){"object"!=typeof t.options.returnValue&&(t.options.returnValue={rvals:[],gvals:[],bvals:[]});var e=!!t.options.paint,i=t.options.returnValue;if("array"!=typeof i.values&&(i.rvals=[],i.gvals=[],i.bvals=[]),Pixastic.Client.hasCanvasImageData()){var n=Pixastic.prepareData(t);t.useData=!1;for(var r=this.array256(0),s=this.array256(0),o=this.array256(0),a=t.options.rect,c=a.width*a.height,h=4*c;c--;)r[n[h-=4]]++,s[n[h+1]]++,o[n[h+2]]++;if(i.rvals=r,i.gvals=s,i.bvals=o,e)for(var u=t.canvas.getContext("2d"),l=[r,s,o],p=0;p<3;p++){for(var d=(p+1)*t.height/3,f=0,g=0;g<256;g++)l[p][g]>f&&(f=l[p][g]);var m=t.height/3/f,_=t.width/256;0==p?u.fillStyle="rgba(255,0,0,0.5)":1==p?u.fillStyle="rgba(0,255,0,0.5)":2==p&&(u.fillStyle="rgba(0,0,255,0.5)");for(g=0;g<256;g++)u.fillRect(g*_,t.height-m*l[p][g]-t.height+d,_,l[p][g]*m)}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.crop={process:function(t){if(Pixastic.Client.hasCanvas()){var e=t.options.rect,i=e.width,n=e.height,r=e.top,s=e.left;void 0!==t.options.left&&(s=parseInt(t.options.left,10)),void 0!==t.options.top&&(r=parseInt(t.options.top,10)),void 0!==t.options.height&&(i=parseInt(t.options.width,10)),void 0!==t.options.height&&(n=parseInt(t.options.height,10)),s<0&&(s=0),s>t.width-1&&(s=t.width-1),r<0&&(r=0),r>t.height-1&&(r=t.height-1),i<1&&(i=1),s+i>t.width&&(i=t.width-s),n<1&&(n=1),r+n>t.height&&(n=t.height-r);var o=document.createElement("canvas");return o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(t.canvas,0,0),t.canvas.width=i,t.canvas.height=n,t.canvas.getContext("2d").clearRect(0,0,i,n),t.canvas.getContext("2d").drawImage(o,s,r,i,n,0,0,i,n),!(t.useData=!1)}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.desaturate={process:function(t){var e=!(!t.options.average||"false"==t.options.average);if(Pixastic.Client.hasCanvasImageData()){var i,n,r=Pixastic.prepareData(t),s=t.options.rect,o=s.width*s.height,a=4*o;if(e)for(;o--;)r[a-=4]=r[i=a+1]=r[n=a+2]=(r[a]+r[i]+r[n])/3;else for(;o--;)r[a-=4]=r[i=a+1]=r[n=a+2]=.3*r[a]+.59*r[i]+.11*r[n];return!0}if(Pixastic.Client.isIE())return t.image.style.filter+=" gray",!0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}},Pixastic.Actions.edges={process:function(t){var e=!(!t.options.mono||"false"==t.options.mono),i=!(!t.options.invert||"false"==t.options.invert);if(Pixastic.Client.hasCanvasImageData()){var n=Pixastic.prepareData(t),r=Pixastic.prepareData(t,!0),s=-1/8;weight=-8;var o=t.options.rect,a=o.width,c=o.height,h=4*a,u=c;do{var l=(u-1)*h,p=(1==u?0:u-2)*a*4,d=(u==c?u-1:u)*a*4,f=a;do{var g=l+(4*f-4),m=p+4*(1==f?0:f-2),_=d+4*(f==a?f-1:f),w=((r[m-4]+r[m]+r[m+4]+r[g-4]+r[g+4]+r[_-4]+r[_]+r[_+4])*s+r[g])*weight,S=((r[m-3]+r[m+1]+r[m+5]+r[g-3]+r[g+5]+r[_-3]+r[_+1]+r[_+5])*s+r[g+1])*weight,y=((r[m-2]+r[m+2]+r[m+6]+r[g-2]+r[g+6]+r[_-2]+r[_+2]+r[_+6])*s+r[g+2])*weight;if(e){var b=.3*w+.59*S+.11*y||0;i&&(b=255-b),b<0&&(b=0),255<b&&(b=255),w=S=y=b}else i&&(w=255-w,S=255-S,y=255-y),w<0&&(w=0),S<0&&(S=0),y<0&&(y=0),255<w&&(w=255),255<S&&(S=255),255<y&&(y=255);n[g]=w,n[g+1]=S,n[g+2]=y}while(--f)}while(--u);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.edges2={process:function(t){if(Pixastic.Client.hasCanvasImageData()){for(var e=Pixastic.prepareData(t),i=Pixastic.prepareData(t,!0),n=t.options.rect,r=n.width,s=4*r,o=s+4,a=n.height-1,c=r-1,h=1;h<a;++h){for(var u=o-4,l=u-s,p=u+s,d=-i[l]-i[u]-i[p],f=-i[++l]-i[++u]-i[++p],g=-i[++l]-i[++u]-i[++p],m=i[l+=2],_=i[++l],w=i[++l],S=i[u+=2],y=i[++u],b=i[++u],E=i[p+=2],I=i[++p],v=i[++p],C=-m-S-E,T=-_-y-I,A=-w-b-v,x=1;x<c;++x){p=(u=o+4)+s;var P=127+d-m- -8*S-E,D=127+f-_- -8*y-I,M=127+g-w- -8*b-v;d=C,f=T,g=A,m=i[l=u-s],_=i[++l],w=i[++l],S=i[u],y=i[++u],b=i[++u],255<(P+=C=-m-S-(E=i[p]))&&(P=255),255<(D+=T=-_-y-(I=i[++p]))&&(D=255),255<(M+=A=-w-b-(v=i[++p]))&&(M=255),P<0&&(P=0),D<0&&(D=0),M<0&&(M=0),e[o]=P,e[++o]=D,e[++o]=M,o+=2}o+=8}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.emboss={process:function(t){var e=parseFloat(t.options.strength)||1,i=void 0!==t.options.greyLevel?parseInt(t.options.greyLevel):180,n=t.options.direction||"topleft",r=!(!t.options.blend||"false"==t.options.blend),s=0,o=0;switch(n){case"topleft":o=s=-1;break;case"top":s=-1,o=0;break;case"topright":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottomright":o=s=1;break;case"bottom":s=1,o=0;break;case"bottomleft":o=-(s=1);break;case"left":s=0,o=-1}if(Pixastic.Client.hasCanvasImageData()){var a=Pixastic.prepareData(t),c=Pixastic.prepareData(t,!0),h=(t.options.invertAlpha,t.options.rect),u=h.width,l=h.height,p=4*u,d=l;do{var f=(d-1)*p,g=s;d+g<1&&(g=0),l<d+g&&(g=0);var m=(d-1+g)*u*4,_=u;do{var w=f+4*(_-1),S=o;_+S<1&&(S=0),u<_+S&&(S=0);var y=m+4*(_-1+S),b=c[w]-c[y],E=c[w+1]-c[y+1],I=c[w+2]-c[y+2],v=b,C=0<v?v:-v;if(C<(0<E?E:-E)&&(v=E),C<(0<I?I:-I)&&(v=I),v*=e,r){var T=a[w]+v,A=a[w+1]+v,x=a[w+2]+v;a[w]=255<T?255:T<0?0:T,a[w+1]=255<A?255:A<0?0:A,a[w+2]=255<x?255:x<0?0:x}else{var P=i-v;P<0?P=0:255<P&&(P=255),a[w]=a[w+1]=a[w+2]=P}}while(--_)}while(--d);return!0}if(Pixastic.Client.isIE())return t.image.style.filter+=" progid:DXImageTransform.Microsoft.emboss()",!0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}},Pixastic.Actions.flip={process:function(t){var e=t.options.rect,i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t.image,e.left,e.top,e.width,e.height,0,0,e.width,e.height);var n=t.canvas.getContext("2d");return n.clearRect(e.left,e.top,e.width,e.height),"horizontal"==t.options.axis?(n.scale(-1,1),n.drawImage(i,-e.left-e.width,e.top,e.width,e.height)):(n.scale(1,-1),n.drawImage(i,e.left,-e.top-e.height,e.width,e.height)),!(t.useData=!1)},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.fliph={process:function(t){if(Pixastic.Client.hasCanvas()){var e=t.options.rect,i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t.image,e.left,e.top,e.width,e.height,0,0,e.width,e.height);var n=t.canvas.getContext("2d");return n.clearRect(e.left,e.top,e.width,e.height),n.scale(-1,1),n.drawImage(i,-e.left-e.width,e.top,e.width,e.height),!(t.useData=!1)}if(Pixastic.Client.isIE())return t.image.style.filter+=" fliph",!0},checkSupport:function(){return Pixastic.Client.hasCanvas()||Pixastic.Client.isIE()}},Pixastic.Actions.flipv={process:function(t){if(Pixastic.Client.hasCanvas()){var e=t.options.rect,i=document.createElement("canvas");i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(t.image,e.left,e.top,e.width,e.height,0,0,e.width,e.height);var n=t.canvas.getContext("2d");return n.clearRect(e.left,e.top,e.width,e.height),n.scale(1,-1),n.drawImage(i,e.left,-e.top-e.height,e.width,e.height),!(t.useData=!1)}if(Pixastic.Client.isIE())return t.image.style.filter+=" flipv",!0},checkSupport:function(){return Pixastic.Client.hasCanvas()||Pixastic.Client.isIE()}},Pixastic.Actions.glow={process:function(t){var e=parseFloat(t.options.amount)||0,i=parseFloat(t.options.radius)||0;if(e=Math.min(1,Math.max(0,e)),i=Math.min(5,Math.max(0,i)),Pixastic.Client.hasCanvasImageData()){var n=t.options.rect,r=document.createElement("canvas");r.width=t.width,r.height=t.height;var s=r.getContext("2d");s.drawImage(t.canvas,0,0);var o=Math.round(t.width/2),a=Math.round(t.height/2),c=document.createElement("canvas");c.width=o,c.height=a;for(var h=Math.round(20*i),u=c.getContext("2d"),l=0;l<h;l++){var p=Math.max(1,Math.round(o-l)),d=Math.max(1,Math.round(a-l));u.clearRect(0,0,o,a),u.drawImage(r,0,0,t.width,t.height,0,0,p,d),s.clearRect(0,0,t.width,t.height),s.drawImage(c,0,0,p,d,0,0,t.width,t.height)}for(var f=Pixastic.prepareData(t),g=Pixastic.prepareData({canvas:r,options:t.options}),m=n.width*n.height,_=4*m,w=_+1,S=_+2;m--;)255<(f[_-=4]+=e*g[_])&&(f[_]=255),255<(f[w-=4]+=e*g[w])&&(f[w]=255),255<(f[S-=4]+=e*g[S])&&(f[S]=255);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.histogram={process:function(t){var e=!(!t.options.average||"false"==t.options.average),i=!(!t.options.paint||"false"==t.options.paint),n=t.options.color||"rgba(255,255,255,0.5)",r=[];"object"!=typeof t.options.returnValue&&(t.options.returnValue={values:[]});var s=t.options.returnValue;if("array"!=typeof s.values&&(s.values=[]),r=s.values,Pixastic.Client.hasCanvasImageData()){var o=Pixastic.prepareData(t);t.useData=!1;for(var a=0;a<256;a++)r[a]=0;var c=t.options.rect,h=c.width*c.height,u=4*h,l=Math.round;if(e)for(;h--;)r[l((o[u-=4]+o[u+1]+o[u+2])/3)]++;else for(;h--;)r[l(.3*o[u-=4]+.59*o[u+1]+.11*o[u+2])]++;if(i){var p=0;for(a=0;a<256;a++)r[a]>p&&(p=r[a]);var d=t.height/p,f=t.width/256,g=t.canvas.getContext("2d");g.fillStyle=n;for(a=0;a<256;a++)g.fillRect(a*f,t.height-d*r[a],f,r[a]*d)}return s.values=r,!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.hsl={process:function(t){var e=parseInt(t.options.hue,10)||0,i=(parseInt(t.options.saturation,10)||0)/100,n=(parseInt(t.options.lightness,10)||0)/100;if(i<0)var r=1+i;else r=1+2*i;var s=6*(e=e%360/360),o=255*n,a=1+n,c=1-n;if(Pixastic.Client.hasCanvasImageData()){for(var h=Pixastic.prepareData(t),u=t.options.rect,l=u.width*u.height,p=4*l,d=p+1,f=p+2;l--;){var g=h[p-=4],m=h[d=p+1],_=h[f=p+2];if(0!=e||0!=i){var w=g;w<m&&(w=m),w<_&&(w=_);var S=g;m<S&&(S=m),_<S&&(S=_);var y=w-S,b=(S+w)/510;if(0<b&&0<y){if(b<=.5){1<(I=y/(w+S)*r)&&(I=1);var E=b*(1+I)}else{var I;1<(I=y/(510-w-S)*r)&&(I=1);E=b+I-b*I}if(g==w)if(m==S)var v=5+(w-_)/y+s;else v=1-(w-m)/y+s;else if(m==w)if(_==S)v=1+(w-g)/y+s;else v=3-(w-_)/y+s;else if(g==S)v=3+(w-m)/y+s;else v=5-(w-g)/y+s;v<0&&(v+=6),6<=v&&(v-=6);var C=b+b-E,T=v>>0;0==T?(g=255*E,m=255*(C+(E-C)*(v-T)),_=255*C):1==T?(g=255*(E-(E-C)*(v-T)),m=255*E,_=255*C):2==T?(g=255*C,m=255*E,_=255*(C+(E-C)*(v-T))):3==T?(g=255*C,m=255*(E-(E-C)*(v-T)),_=255*E):4==T?(g=255*(C+(E-C)*(v-T)),m=255*C,_=255*E):5==T&&(g=255*E,m=255*C,_=255*(E-(E-C)*(v-T)))}}n<0?(g*=a,m*=a,_*=a):0<n&&(g=g*c+o,m=m*c+o,_=_*c+o),h[p]=g<0?0:255<g?255:g,h[d]=m<0?0:255<m?255:m,h[f]=_<0?0:255<_?255:_}return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.invert={process:function(t){if(Pixastic.Client.hasCanvasImageData()){for(var e=Pixastic.prepareData(t),i=!!t.options.invertAlpha,n=t.options.rect,r=n.width*n.height,s=4*r,o=s+1,a=s+2,c=s+3;r--;)e[s-=4]=255-e[s],e[o-=4]=255-e[o],e[a-=4]=255-e[a],i&&(e[c-=4]=255-e[c]);return!0}if(Pixastic.Client.isIE())return t.image.style.filter+=" invert",!0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}},Pixastic.Actions.laplace={process:function(t){var e=!(!t.options.invert||"false"==t.options.invert),i=parseFloat(t.options.edgeStrength)||0,n=parseInt(t.options.greyLevel)||0;if(i=-i,Pixastic.Client.hasCanvasImageData()){var r=Pixastic.prepareData(t),s=Pixastic.prepareData(t,!0),o=t.options.rect,a=o.width,c=o.height,h=4*a,u=c;do{var l=(u-1)*h,p=(1==u?0:u-2)*a*4,d=(u==c?u-1:u)*a*4,f=a;do{var g=l+(4*f-4),m=p+4*(1==f?0:f-2),_=d+4*(f==a?f-1:f),w=((-s[m-4]-s[m]-s[m+4]-s[g-4]-s[g+4]-s[_-4]-s[_]-s[_+4]+8*s[g])*(1/8)+(-s[m-3]-s[m+1]-s[m+5]-s[g-3]-s[g+5]-s[_-3]-s[_+1]-s[_+5]+8*s[g+1])*(1/8)+(-s[m-2]-s[m+2]-s[m+6]-s[g-2]-s[g+6]-s[_-2]-s[_+2]-s[_+6]+8*s[g+2])*(1/8))/3+n;0!=i&&(127<w?w+=(w+1-128)*i:w<127&&(w-=(w+1)*i)),e&&(w=255-w),w<0&&(w=0),255<w&&(w=255),r[g]=r[g+1]=r[g+2]=w}while(--f)}while(--u);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.lighten={process:function(t){var e=parseFloat(t.options.amount)||0;if(e=Math.max(-1,Math.min(1,e)),Pixastic.Client.hasCanvasImageData()){for(var i=Pixastic.prepareData(t),n=t.options.rect,r=n.width*n.height,s=4*r,o=s+1,a=s+2,c=e+1;r--;)255<(i[s-=4]=i[s]*c)&&(i[s]=255),255<(i[o-=4]=i[o]*c)&&(i[o]=255),255<(i[a-=4]=i[a]*c)&&(i[a]=255);return!0}if(Pixastic.Client.isIE()){var h=t.image;return e<0?(h.style.filter+=" light()",h.filters[h.filters.length-1].addAmbient(255,255,255,100*-e)):0<e&&(h.style.filter+=" light()",h.filters[h.filters.length-1].addAmbient(255,255,255,100),h.filters[h.filters.length-1].addAmbient(255,255,255,100*e)),!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}},Pixastic.Actions.mosaic={process:function(t){var e=Math.max(1,parseInt(t.options.blockSize,10));if(Pixastic.Client.hasCanvasImageData()){var i=t.options.rect,n=i.width,r=i.height,s=r,o=t.canvas.getContext("2d"),a=document.createElement("canvas");a.width=a.height=1;var c=a.getContext("2d"),h=document.createElement("canvas");h.width=n,h.height=r,h.getContext("2d").drawImage(t.canvas,i.left,i.top,n,r,0,0,n,r);for(s=0;s<r;s+=e)for(var u=0;u<n;u+=e){var l=e,p=e;n<l+u&&(l=n-u),r<p+s&&(p=r-s),c.drawImage(h,u,s,l,p,0,0,1,1);var d=c.getImageData(0,0,1,1).data;o.fillStyle="rgb("+d[0]+","+d[1]+","+d[2]+")",o.fillRect(i.left+u,i.top+s,e,e)}return!(t.useData=!1)}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.noise={process:function(t){var e=0,i=0,n=!1;void 0!==t.options.amount&&(e=parseFloat(t.options.amount)||0),void 0!==t.options.strength&&(i=parseFloat(t.options.strength)||0),void 0!==t.options.mono&&(n=!(!t.options.mono||"false"==t.options.mono)),e=Math.max(0,Math.min(1,e));var r=128*(i=Math.max(0,Math.min(1,i))),s=r/2;if(Pixastic.Client.hasCanvasImageData()){var o=Pixastic.prepareData(t),a=t.options.rect,c=a.width,h=4*c,u=a.height,l=Math.random;do{var p=(u-1)*h,d=c;do{var f=p+4*(d-1);if(l()<e){if(n)var g=-s+l()*r,m=o[f]+g,_=o[f+1]+g,w=o[f+2]+g;else m=o[f]-s+l()*r,_=o[f+1]-s+l()*r,w=o[f+2]-s+l()*r;m<0&&(m=0),_<0&&(_=0),w<0&&(w=0),255<m&&(m=255),255<_&&(_=255),255<w&&(w=255),o[f]=m,o[f+1]=_,o[f+2]=w}}while(--d)}while(--u);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.posterize={process:function(t){var e=256;if(void 0!==t.options.levels&&(e=parseInt(t.options.levels,10)||1),Pixastic.Client.hasCanvasImageData()){var i=Pixastic.prepareData(t),n=256/(e=Math.max(2,Math.min(256,e))),r=256/(e-1),s=t.options.rect,o=s.width,a=4*o,c=s.height;do{var h=(c-1)*a,u=o;do{var l=h+4*(u-1),p=r*(i[l]/n>>0),d=r*(i[l+1]/n>>0),f=r*(i[l+2]/n>>0);255<p&&(p=255),255<d&&(d=255),255<f&&(f=255),i[l]=p,i[l+1]=d,i[l+2]=f}while(--u)}while(--c);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.pointillize={process:function(t){var e=Math.max(1,parseInt(t.options.radius,10)),i=Math.min(5,Math.max(0,parseFloat(t.options.density)||0)),n=Math.max(0,parseFloat(t.options.noise)||0),r=!(!t.options.transparent||"false"==t.options.transparent);if(Pixastic.Client.hasCanvasImageData()){var s=t.options.rect,o=s.width,a=s.height,c=a,h=t.canvas.getContext("2d"),u=t.canvas.width,l=t.canvas.height,p=document.createElement("canvas");p.width=p.height=1;var d=p.getContext("2d"),f=document.createElement("canvas");f.width=o,f.height=a,f.getContext("2d").drawImage(t.canvas,s.left,s.top,o,a,0,0,o,a);var g=2*e;r&&h.clearRect(s.left,s.top,s.width,s.height);var m=e*n,_=1/i;for(c=0;c<a+e;c+=g*_)for(var w=0;w<o+e;w+=g*_){rndX=n?w+(2*Math.random()-1)*m>>0:w,rndY=n?c+(2*Math.random()-1)*m>>0:c;var S=rndX-e,y=rndY-e;S<0&&(S=0),y<0&&(y=0);var b=rndX+s.left,E=rndY+s.top;b<0&&(b=0),u<b&&(b=u),E<0&&(E=0),l<E&&(E=l);var I=g,v=g;o<I+S&&(I=o-S),a<v+y&&(v=a-y),I<1&&(I=1),v<1&&(v=1),d.drawImage(f,S,y,I,v,0,0,1,1);var C=d.getImageData(0,0,1,1).data;h.fillStyle="rgb("+C[0]+","+C[1]+","+C[2]+")",h.beginPath(),h.arc(b,E,e,0,2*Math.PI,!0),h.closePath(),h.fill()}return!(t.useData=!1)}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.removenoise={process:function(t){if(Pixastic.Client.hasCanvasImageData()){var e=Pixastic.prepareData(t),i=t.options.rect,n=i.width,r=i.height,s=4*n,o=r;do{var a=(o-1)*s,c=(1==o?0:o-2)*n*4,h=(o==r?o-1:o)*n*4,u=n;do{var l,p,d,f,g,m,_=a+(4*u-4),w=c+4*(1==u?0:u-2),S=h+4*(u==n?u-1:u);l=p=e[w];var y=e[_-4],b=e[_+4],E=e[S];y<l&&(l=y),b<l&&(l=b),E<l&&(l=E),p<y&&(p=y),p<b&&(p=b),p<E&&(p=E),d=f=e[w+1];var I=e[_-3],v=e[_+5],C=e[S+1];I<d&&(d=I),v<d&&(d=v),C<d&&(d=C),f<I&&(f=I),f<v&&(f=v),f<C&&(f=C),g=m=e[w+2];var T=e[_-2],A=e[_+6],x=e[S+2];T<g&&(g=T),A<g&&(g=A),x<g&&(g=x),m<T&&(m=T),m<A&&(m=A),m<x&&(m=x),e[_]>p?e[_]=p:e[_]<l&&(e[_]=l),e[_+1]>f?e[_+1]=f:e[_+1]<d&&(e[_+1]=d),e[_+2]>m?e[_+2]=m:e[_+2]<g&&(e[_+2]=g)}while(--u)}while(--o);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.resize={process:function(t){if(Pixastic.Client.hasCanvas()){var e=parseInt(t.options.width,10),i=parseInt(t.options.height,10),n=t.canvas;e<1&&(e=1),e<2&&(e=2);var r=document.createElement("canvas");return r.width=e,r.height=i,r.getContext("2d").drawImage(n,0,0,e,i),n.width=e,n.height=i,n.getContext("2d").drawImage(r,0,0),!(t.useData=!1)}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.rotate={process:function(t){if(Pixastic.Client.hasCanvas()){var e=t.canvas,i=t.width,n=t.height,r=document.createElement("canvas");r.width=i,r.height=n,r.getContext("2d").drawImage(e,0,0,i,n);var s=-parseFloat(t.options.angle)*Math.PI/180,o=s;o>.5*Math.PI&&(o=Math.PI-o),o<.5*-Math.PI&&(o=-Math.PI-o);var a=Math.sqrt(i*i+n*n),c=Math.abs(o)-Math.abs(Math.atan2(n,i)),h=Math.abs(o)+Math.abs(Math.atan2(n,i)),u=Math.abs(Math.cos(c)*a),l=Math.abs(Math.sin(h)*a);e.width=u,e.height=l;var p=e.getContext("2d");return p.translate(u/2,l/2),p.rotate(s),p.drawImage(r,-i/2,-n/2),!(t.useData=!1)}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.sepia={process:function(t){var e=parseInt(t.options.mode,10)||0;if(e<0&&(e=0),1<e&&(e=1),Pixastic.Client.hasCanvasImageData()){var i=Pixastic.prepareData(t),n=t.options.rect,r=n.width,s=4*r,o=n.height;do{var a=(o-1)*s,c=r;do{var h=a+4*(c-1);if(e)var u=.299*i[h]+.587*i[h+1]+.114*i[h+2],l=u+39,p=u+14,d=u-36;else{var f=i[h],g=i[h+1],m=i[h+2];l=.393*f+.769*g+.189*m,p=.349*f+.686*g+.168*m,d=.272*f+.534*g+.131*m}l<0&&(l=0),255<l&&(l=255),p<0&&(p=0),255<p&&(p=255),d<0&&(d=0),255<d&&(d=255),i[h]=l,i[h+1]=p,i[h+2]=d}while(--c)}while(--o);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.sharpen={process:function(t){var e=0;if(void 0!==t.options.amount&&(e=parseFloat(t.options.amount)||0),e<0&&(e=0),1<e&&(e=1),Pixastic.Client.hasCanvasImageData()){for(var i=Pixastic.prepareData(t),n=Pixastic.prepareData(t,!0),r=15,s=1+3*e,o=[[0,-s,0],[-s,r,-s],[0,-s,0]],a=0,c=0;c<3;c++)for(var h=0;h<3;h++)a+=o[c][h];a=1/a;var u=t.options.rect,l=u.width,p=u.height;r*=a,s*=a;var d=4*l,f=p;do{var g=(f-1)*d,m=(1==f?0:f-2)*d,_=(f==p?f-1:f)*d,w=l;do{var S=g+(4*w-4),y=m+4*(1==w?0:w-2),b=_+4*(w==l?w-1:w),E=(-n[y]-n[S-4]-n[S+4]-n[b])*s+n[S]*r,I=(-n[y+1]-n[S-3]-n[S+5]-n[b+1])*s+n[S+1]*r,v=(-n[y+2]-n[S-2]-n[S+6]-n[b+2])*s+n[S+2]*r;E<0&&(E=0),I<0&&(I=0),v<0&&(v=0),255<E&&(E=255),255<I&&(I=255),255<v&&(v=255),i[S]=E,i[S+1]=I,i[S+2]=v}while(--w)}while(--f);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.solarize={process:function(t){!t.options.average||t.options.average;if(Pixastic.Client.hasCanvasImageData()){var e=Pixastic.prepareData(t),i=t.options.rect,n=i.width,r=4*n,s=i.height;do{var o=(s-1)*r,a=n;do{var c=o+4*(a-1),h=e[c],u=e[c+1],l=e[c+2];127<h&&(h=255-h),127<u&&(u=255-u),127<l&&(l=255-l),e[c]=h,e[c+1]=u,e[c+2]=l}while(--a)}while(--s);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}},Pixastic.Actions.unsharpmask={process:function(t){var e=parseFloat(t.options.amount)||0,i=parseFloat(t.options.radius)||0,n=parseFloat(t.options.threshold)||0;e=Math.min(500,Math.max(0,e))/2,i=Math.min(5,Math.max(0,i))/10,n=Math.min(255,Math.max(0,n));var r=- --n;if(e*=.016,e++,Pixastic.Client.hasCanvasImageData()){var s=t.options.rect,o=document.createElement("canvas");o.width=t.width,o.height=t.height;var a=o.getContext("2d");a.drawImage(t.canvas,0,0);var c=Math.round(t.width/2),h=Math.round(t.height/2),u=document.createElement("canvas");u.width=c,u.height=h;for(var l=Math.round(20*i),p=u.getContext("2d"),d=0;d<l;d++){var f=Math.max(1,Math.round(c-d)),g=Math.max(1,Math.round(h-d));p.clearRect(0,0,c,h),p.drawImage(o,0,0,t.width,t.height,0,0,f,g),a.clearRect(0,0,t.width,t.height),a.drawImage(u,0,0,f,g,0,0,t.width,t.height)}var m=Pixastic.prepareData(t),_=Pixastic.prepareData({canvas:o,options:t.options}),w=s.width,S=4*w,y=s.height;do{var b=(y-1)*S,E=w;do{var I=b+(4*E-4),v=m[I]-_[I];if(n<v||v<r){var C=_[I];C=e*v+C,m[I]=255<C?255:C<0?0:C}var T=m[I+1]-_[I+1];if(n<T||T<r){var A=_[I+1];A=e*T+A,m[I+1]=255<A?255:A<0?0:A}var x=m[I+2]-_[I+2];if(n<x||x<r){var P=_[I+2];P=e*x+P,m[I+2]=255<P?255:P<0?0:P}}while(--E)}while(--y);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};var Base64={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64Pad:"=",encode:function(t){"use strict";var e,i="",n=Base64.toBase64Table.split(""),r=Base64.base64Pad,s=t.length;for(e=0;e<s-2;e+=3)i+=n[t[e]>>2],i+=n[((3&t[e])<<4)+(t[e+1]>>4)],i+=n[((15&t[e+1])<<2)+(t[e+2]>>6)],i+=n[63&t[e+2]];return s%3&&(i+=n[t[e=s-s%3]>>2],s%3==2?(i+=n[((3&t[e])<<4)+(t[e+1]>>4)],i+=n[(15&t[e+1])<<2],i+=r):(i+=n[(3&t[e])<<4],i+=r+r)),i},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(t,e){"use strict";e=void 0!==e?e:0;var i,n,r,s,o,a,c=Base64.toBinaryTable,h=Base64.base64Pad,u=0,l=0,p=t.indexOf("=")-e;for(p<0&&(p=t.length-e),n=3*(p>>2)+Math.floor(p%4/1.5),i=new Array(n),r=0,s=e;s<t.length;s++)o=c[127&t.charCodeAt(s)],a=t.charAt(s)===h,-1!==o?(l=l<<6|o,8<=(u+=6)&&(u-=8,a||(i[r++]=l>>u&255),l&=(1<<u)-1)):console.error("Illegal character code "+t.charCodeAt(s)+" at position "+s);if(u)throw{name:"Base64-Error",message:"Corrupted base64 string"};return i},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeStr:function(t){var e,i,n,r,s,o,a,c="",h=0;for(t=Base64._utf8_encode(t);h<t.length;)r=(e=t.charCodeAt(h++))>>2,s=(3&e)<<4|(i=t.charCodeAt(h++))>>4,o=(15&i)<<2|(n=t.charCodeAt(h++))>>6,a=63&n,isNaN(i)?o=a=64:isNaN(n)&&(a=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(a);return c},decodeStr:function(t){var e,i,n,r,s,o,a="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)e=this._keyStr.indexOf(t.charAt(c++))<<2|(r=this._keyStr.indexOf(t.charAt(c++)))>>4,i=(15&r)<<4|(s=this._keyStr.indexOf(t.charAt(c++)))>>2,n=(3&s)<<6|(o=this._keyStr.indexOf(t.charAt(c++))),a+=String.fromCharCode(e),64!=s&&(a+=String.fromCharCode(i)),64!=o&&(a+=String.fromCharCode(n));return a=Base64._utf8_decode(a)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e+=String.fromCharCode(n):(127<n&&n<2048?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e},_utf8_decode:function(t){for(var e="",i=0,n=c1=c2=0;i<t.length;)(n=t.charCodeAt(i))<128?(e+=String.fromCharCode(n),i++):191<n&&n<224?(c2=t.charCodeAt(i+1),e+=String.fromCharCode((31&n)<<6|63&c2),i+=2):(c2=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),i+=3);return e}};function BigInteger(t,e){if(!(this instanceof BigInteger))return t instanceof BigInteger?t:void 0===t?BigInteger.ZERO:BigInteger.parse(t);for(t=t||[];t.length&&!t[t.length-1];)--t.length;this._d=t,this._s=t.length?e||1:0}Array.prototype.map||(Array.prototype.map=function(t){var e=this.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=new Array(e),n=arguments[1],r=0;r<e;r++)r in this&&(i[r]=t.call(n,this[r],r,this));return i}),BigInteger.base=1e7,BigInteger.base_log10=7,BigInteger.init=function(){BigInteger.ZERO=new BigInteger([],0),BigInteger.ONE=new BigInteger([1],1),BigInteger.M_ONE=new BigInteger(BigInteger.ONE._d,-1),BigInteger._0=BigInteger.ZERO,BigInteger._1=BigInteger.ONE,BigInteger.small=[BigInteger.ZERO,BigInteger.ONE,new BigInteger([2],1),new BigInteger([3],1),new BigInteger([4],1),new BigInteger([5],1),new BigInteger([6],1),new BigInteger([7],1),new BigInteger([8],1),new BigInteger([9],1),new BigInteger([10],1),new BigInteger([11],1),new BigInteger([12],1),new BigInteger([13],1),new BigInteger([14],1),new BigInteger([15],1),new BigInteger([16],1),new BigInteger([17],1),new BigInteger([18],1),new BigInteger([19],1),new BigInteger([20],1),new BigInteger([21],1),new BigInteger([22],1),new BigInteger([23],1),new BigInteger([24],1),new BigInteger([25],1),new BigInteger([26],1),new BigInteger([27],1),new BigInteger([28],1),new BigInteger([29],1),new BigInteger([30],1),new BigInteger([31],1),new BigInteger([32],1),new BigInteger([33],1),new BigInteger([34],1),new BigInteger([35],1),new BigInteger([36],1)]},BigInteger.init(),BigInteger.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),BigInteger.prototype.toString=function(t){if((t=+t||10)<2||36<t)throw new Error("illegal radix "+t+".");if(0===this._s)return"0";if(10===t){var e=this._s<0?"-":"";e+=this._d[this._d.length-1].toString();for(var i=this._d.length-2;0<=i;i--){for(var n=this._d[i].toString();n.length<BigInteger.base_log10;)n="0"+n;e+=n}return e}var r=BigInteger.digits;t=BigInteger.small[t];for(var s,o=this._s,a=this.abs(),c=[];0!==a._s;){var h=a.divRem(t);a=h[0],s=h[1],c.push(r[s.valueOf()])}return(o<0?"-":"")+c.reverse().join("")},BigInteger.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/],BigInteger.parse=function(t,e){t=t.toString(),void 0!==e&&10!=+e||(t=t.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e").replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,function(t,e,i,n,r){var s=(r=+r)<0,o=i.length+r;t=(s?i:n).length,r=(r=Math.abs(r))>=t?r-t+s:0;var a=new Array(r+1).join("0"),c=i+n;return(e||"")+(s?c=a+c:c+=a).substr(0,o+=s?a.length:0)+(o<c.length?"."+c.substr(o):"")}));var i=/^([+\-]?)(0[xXcCbB])?([0-9A-Za-z]*)(?:\.\d*)?$/.exec(t);if(i){var n=i[1]||"+",r=i[2]||"",s=i[3]||"";if(void 0===e)e="0x"===r||"0X"===r?16:"0c"===r||"0C"===r?8:"0b"===r||"0B"===r?2:10;else if(e<2||36<e)throw new Error("Illegal radix "+e+".");if(e=+e,!BigInteger.radixRegex[e].test(s))throw new Error("Bad digit for radix "+e);if(0===(s=s.replace(/^0+/,"").split("")).length)return BigInteger.ZERO;if(n="-"===n?-1:1,10==e){for(var o=[];s.length>=BigInteger.base_log10;)o.push(parseInt(s.splice(-BigInteger.base_log10).join(""),10));return o.push(parseInt(s.join(""),10)),new BigInteger(o,n)}if(e===BigInteger.base)return new BigInteger(s.map(Number).reverse(),n);o=BigInteger.ZERO;e=BigInteger.small[e];for(var a=BigInteger.small,c=0;c<s.length;c++)o=o.multiply(e).add(a[parseInt(s[c],36)]);return new BigInteger(o._d,n)}throw new Error("Invalid BigInteger format: "+t)},BigInteger.prototype.add=function(t){if(0===this._s)return BigInteger(t);if(0===(t=BigInteger(t))._s)return this;if(this._s!==t._s)return t=t.negate(),this.subtract(t);for(var e,i=this._d,n=t._d,r=i.length,s=n.length,o=new Array(Math.max(r,s)+1),a=Math.min(r,s),c=0,h=0;h<a;h++)e=i[h]+n[h]+c,o[h]=e%BigInteger.base,c=e/BigInteger.base|0;for(r<s&&(i=n,r=s),h=a;c&&h<r;h++)e=i[h]+c,o[h]=e%BigInteger.base,c=e/BigInteger.base|0;for(c&&(o[h]=c);h<r;h++)o[h]=i[h];return new BigInteger(o,this._s)},BigInteger.prototype.negate=function(){return new BigInteger(this._d,-this._s)},BigInteger.prototype.abs=function(){return this._s<0?this.negate():this},BigInteger.prototype.subtract=function(t){if(0===this._s)return BigInteger(t).negate();if(0===(t=BigInteger(t))._s)return this;if(this._s!==t._s)return t=t.negate(),this.add(t);var e,i=this;this._s<0&&(e=i,i=new BigInteger(t._d,1),t=new BigInteger(e._d,1));var n=i.compareAbs(t);if(0===n)return BigInteger.ZERO;n<0&&(e=t,t=i,i=e);var r,s,o=i._d,a=t._d,c=o.length,h=a.length,u=new Array(c),l=0;for(r=0;r<h;r++)l=(s=o[r]-l-a[r])<0?(s+=BigInteger.base,1):0,u[r]=s;for(r=h;r<c;r++){if(!((s=o[r]-l)<0)){u[r++]=s;break}s+=BigInteger.base,u[r]=s}for(;r<c;r++)u[r]=o[r];return new BigInteger(u,n)},function(){function t(t,e){for(var i=t._d,n=i.slice(),r=0;;){var s=(i[r]||0)+1;if(n[r]=s%BigInteger.base,s<=BigInteger.base-1)break;++r}return new BigInteger(n,e)}function e(t,e){for(var i=t._d,n=i.slice(),r=0;;){var s=(i[r]||0)-1;if(!(s<0)){n[r]=s;break}n[r]=s+BigInteger.base,++r}return new BigInteger(n,e)}BigInteger.prototype.next=function(){switch(this._s){case 0:return BigInteger.ONE;case-1:return e(this,-1);default:return t(this,1)}},BigInteger.prototype.prev=function(){switch(this._s){case 0:return BigInteger.M_ONE;case-1:return t(this,-1);default:return e(this,1)}}}(),BigInteger.prototype.compareAbs=function(t){if(this===t)return 0;if(!(t instanceof BigInteger)){if(!isFinite(t))return isNaN(t)?t:-1;t=BigInteger(t)}if(0===this._s)return 0!==t._s?-1:0;if(0===t._s)return 1;var e=this._d.length,i=t._d.length;if(e<i)return-1;if(i<e)return 1;for(var n=this._d,r=t._d,s=e-1;0<=s;s--)if(n[s]!==r[s])return n[s]<r[s]?-1:1;return 0},BigInteger.prototype.compare=function(t){return this===t?0:(t=BigInteger(t),0===this._s?-t._s:this._s!==t._s?this._s:this.compareAbs(t)*this._s)},BigInteger.prototype.isUnit=function(){return this===BigInteger.ONE||this===BigInteger.M_ONE||1===this._d.length&&1===this._d[0]},BigInteger.prototype.multiply=function(t){if(0===this._s)return BigInteger.ZERO;if(0===(t=BigInteger(t))._s)return BigInteger.ZERO;if(this.isUnit())return this._s<0?t.negate():t;if(t.isUnit())return t._s<0?this.negate():this;if(this===t)return this.square();var e,i=this._d.length>=t._d.length,n=(i?this:t)._d,r=(i?t:this)._d,s=n.length,o=r.length,a=s+o,c=new Array(a);for(e=0;e<a;e++)c[e]=0;for(e=0;e<o;e++){for(var h,u=0,l=r[e],p=s+e,d=e;d<p;d++)u=(h=c[d]+l*n[d-e]+u)/BigInteger.base|0,c[d]=h%BigInteger.base|0;u&&(u=(h=c[d]+u)/BigInteger.base|0,c[d]=h%BigInteger.base)}return new BigInteger(c,this._s*t._s)},BigInteger.prototype.multiplySingleDigit=function(t){if(0===t||0===this._s)return BigInteger.ZERO;if(1===t)return this;var e;if(1===this._d.length)return(e=this._d[0]*t)>=BigInteger.base?new BigInteger([e%BigInteger.base|0,e/BigInteger.base|0],1):new BigInteger([e],1);if(2===t)return this.add(this);if(this.isUnit())return new BigInteger([t],1);for(var i=this._d,n=i.length,r=n+1,s=new Array(r),o=0;o<r;o++)s[o]=0;for(var a=0,c=0;c<n;c++)a=(e=t*i[c]+a)/BigInteger.base|0,s[c]=e%BigInteger.base|0;return a&&(a=(e=a)/BigInteger.base|0,s[c]=e%BigInteger.base),new BigInteger(s,1)},BigInteger.prototype.square=function(){if(0===this._s)return BigInteger.ZERO;if(this.isUnit())return BigInteger.ONE;var t,e,i,n,r=this._d,s=r.length,o=new Array(s+s+1);for(n=0;n<s;n++)i=2*n,e=(t=r[n]*r[n])/BigInteger.base|0,o[i]=t%BigInteger.base,o[i+1]=e;for(n=0;n<s;n++){e=0,i=2*n+1;for(var a=n+1;a<s;a++,i++)e=(t=r[a]*r[n]*2+o[i]+e)/BigInteger.base|0,o[i]=t%BigInteger.base;var c=e+o[i=s+n];e=c/BigInteger.base|0,o[i]=c%BigInteger.base,o[i+1]+=e}return new BigInteger(o,1)},BigInteger.prototype.quotient=function(t){return this.divRem(t)[0]},BigInteger.prototype.divide=BigInteger.prototype.quotient,BigInteger.prototype.remainder=function(t){return this.divRem(t)[1]},BigInteger.prototype.divRem=function(t){if(0===(t=BigInteger(t))._s)throw new Error("Divide by zero");if(0===this._s)return[BigInteger.ZERO,BigInteger.ZERO];if(1===t._d.length)return this.divRemSmall(t._s*t._d[0]);switch(this.compareAbs(t)){case 0:return[this._s===t._s?BigInteger.ONE:BigInteger.M_ONE,BigInteger.ZERO];case-1:return[BigInteger.ZERO,this]}var e,i=this._s*t._s,n=t.abs(),r=this._d.slice(),s=(t._d.length,r.length,[]),o=new BigInteger([],1);for(o._s=1;r.length;)if(o._d.unshift(r.pop()),(o=new BigInteger(o._d,1)).compareAbs(t)<0)s.push(0);else{if(0===o._s)e=0;else{var a=o._d.length,c=n._d.length,h=o._d[a-1]*BigInteger.base+o._d[a-2],u=n._d[c-1]*BigInteger.base+n._d[c-2];o._d.length>n._d.length&&(h=(h+1)*BigInteger.base),e=Math.ceil(h/u)}do{var l=n.multiplySingleDigit(e);if(l.compareAbs(o)<=0)break;e--}while(e);if(s.push(e),e){var p=o.subtract(l);o._d=p._d.slice()}}return[new BigInteger(s.reverse(),i),new BigInteger(o._d,this._s)]},BigInteger.prototype.divRemSmall=function(t){var e;if(0===(t=+t))throw new Error("Divide by zero");var i=t<0?-1:1,n=this._s*i;if((t=Math.abs(t))<1||t>=BigInteger.base)throw new Error("Argument out of range");if(0===this._s)return[BigInteger.ZERO,BigInteger.ZERO];if(1===t||-1===t)return[1===n?this.abs():new BigInteger(this._d,n),BigInteger.ZERO];if(1===this._d.length){var r=new BigInteger([this._d[0]/t|0],1);return e=new BigInteger([this._d[0]%t|0],1),n<0&&(r=r.negate()),this._s<0&&(e=e.negate()),[r,e]}for(var s,o=this._d.slice(),a=new Array(o.length),c=0,h=0,u=0;o.length;){if((c=c*BigInteger.base+o[o.length-1])<t)a[u++]=0,o.pop(),h=BigInteger.base*h+c;else h=c-t*(s=0===c?0:c/t|0),(a[u++]=s)?(o.pop(),c=h):o.pop()}return e=new BigInteger([h],1),this._s<0&&(e=e.negate()),[new BigInteger(a.reverse(),n),e]},BigInteger.prototype.isEven=function(){var t=this._d;return 0===this._s||0===t.length||t[0]%2==0},BigInteger.prototype.isOdd=function(){return!this.isEven()},BigInteger.prototype.sign=function(){return this._s},BigInteger.prototype.isPositive=function(){return 0<this._s},BigInteger.prototype.isNegative=function(){return this._s<0},BigInteger.prototype.isZero=function(){return 0===this._s},BigInteger.prototype.exp10=function(t){if(0===(t=+t))return this;if(Math.abs(t)>Number(BigInteger.MAX_EXP))throw new Error("exponent too large in BigInteger.exp10");if(0<t){for(var e=new BigInteger(this._d.slice(),this._s);t>=BigInteger.base_log10;t-=BigInteger.base_log10)e._d.unshift(0);return 0==t?e:(e._s=1,e=e.multiplySingleDigit(Math.pow(10,t)),this._s<0?e.negate():e)}if(-t>=this._d.length*BigInteger.base_log10)return BigInteger.ZERO;e=new BigInteger(this._d.slice(),this._s);for(t=-t;t>=BigInteger.base_log10;t-=BigInteger.base_log10)e._d.shift();return 0==t?e:e.divRemSmall(Math.pow(10,t))[0]},BigInteger.prototype.pow=function(t){if(this.isUnit())return 0<this._s?this:BigInteger(t).isOdd()?this:this.negate();if(0===(t=BigInteger(t))._s)return BigInteger.ONE;if(t._s<0){if(0===this._s)throw new Error("Divide by zero");return BigInteger.ZERO}if(0===this._s)return BigInteger.ZERO;if(t.isUnit())return this;if(0<t.compareAbs(BigInteger.MAX_EXP))throw new Error("exponent too large in BigInteger.pow");for(var e=this,i=BigInteger.ONE,n=BigInteger.small[2];t.isPositive();){if(t.isOdd()&&(i=i.multiply(e),t.isUnit()))return i;e=e.square(),t=t.quotient(n)}return i},BigInteger.prototype.modPow=function(t,e){for(var i=BigInteger.ONE,n=this;t.isPositive();)t.isOdd()&&(i=i.multiply(n).remainder(e)),(t=t.quotient(BigInteger.small[2])).isPositive()&&(n=n.square().remainder(e));return i},BigInteger.prototype.log=function(){switch(this._s){case 0:return-1/0;case-1:return NaN}var t=this._d.length;if(t*BigInteger.base_log10<30)return Math.log(this.valueOf());var e=Math.ceil(30/BigInteger.base_log10),i=this._d.slice(t-e);return Math.log(new BigInteger(i,1).valueOf())+(t-e)*Math.log(BigInteger.base)},BigInteger.prototype.valueOf=function(){return parseInt(this.toString(),10)},BigInteger.prototype.toJSValue=function(){return parseInt(this.toString(),10)},BigInteger.MAX_EXP=BigInteger(2147483647),function(){function s(e){return function(t){return e.call(BigInteger(t))}}function o(i){return function(t,e){return i.call(BigInteger(t),BigInteger(e))}}function a(n){return function(t,e,i){return n.call(BigInteger(t),BigInteger(e),BigInteger(i))}}!function(){var t,e,i="toJSValue,isEven,isOdd,sign,isZero,isNegative,abs,isUnit,square,negate,isPositive,toString,next,prev,log".split(","),n="compare,remainder,divRem,subtract,add,quotient,divide,multiply,pow,compareAbs".split(","),r=["modPow"];for(t=0;t<i.length;t++)BigInteger[e=i[t]]=s(BigInteger.prototype[e]);for(t=0;t<n.length;t++)BigInteger[e=n[t]]=o(BigInteger.prototype[e]);for(t=0;t<r.length;t++)BigInteger[e=r[t]]=a(BigInteger.prototype[e]);BigInteger.exp10=function(t,e){return BigInteger(t).exp10(e)}}()}(),"undefined"!=typeof exports&&(exports.BigInteger=BigInteger);var VirtualJoystick=function(t){t=t||{},this._container=t.container||document.body,this._stickEl=t.stickElement||this._buildJoystickStick(),this._baseEl=t.baseElement||this._buildJoystickBase(),this._mouseLeft=t.mouseLeft||this._buildJoystickButton(),this._mouseSupport="mouseSupport"in t&&t.mouseSupport,this._range=t.range||60,this._timer=null,this._callback="callback"in t&&t.callback,this._callbackcontext="callbackcontext"in t?t.callbackcontext:this,this._callbackButton="callbackbutton"in t&&t.callbackbutton,this._referenceItem=t.referenceItem,this._container.style.position="relative",this._container.appendChild(this._baseEl),this._container.appendChild(this._mouseLeft),this._baseEl.style.position="absolute",this._baseEl.style.display="block",this._mouseLeft.style.position="absolute",this._mouseLeft.style.display="block";var e=$(this._referenceItem),i=e.height()-e.offset().top-130;this._baseEl.style.top=i+"px",this._baseEl.style.left="20px",this._container.appendChild(this._stickEl),this._stickEl.style.position="absolute",this._stickEl.style.display="none",this._mouseLeft.style.top=i+20+"px",this._mouseLeft.style.right="20px",this._pressed=!1,this._baseX=0,this._baseY=0,this._stickX=0,this._stickY=0,__bind=function(t,e){return function(){return t.apply(e,arguments)}},this._$onTouchStart=__bind(this._onTouchStart,this),this._$onTouchEnd=__bind(this._onTouchEnd,this),this._$onTouchMove=__bind(this._onTouchMove,this),this._$onTouchStartButton=__bind(this._onTouchStartButton,this),this._$onTouchEndButton=__bind(this._onTouchEndButton,this),this._baseEl.addEventListener("touchstart",this._$onTouchStart,!1),this._mouseLeft.addEventListener("touchstart",this._$onTouchStartButton,!1),this._mouseLeft.addEventListener("touchend",this._$onTouchEndButton,!1),this._container.addEventListener("touchend",this._$onTouchEnd,!1),this._container.addEventListener("touchmove",this._$onTouchMove,!1),this._mouseSupport&&(this._$onMouseDown=__bind(this._onMouseDown,this),this._$onMouseUp=__bind(this._onMouseUp,this),this._$onMouseMove=__bind(this._onMouseMove,this),this._$onMouseDownButton=__bind(this._onMouseDownButton,this),this._$onMouseUpButton=__bind(this._onMouseUpButton,this),this._baseEl.addEventListener("mousedown",this._$onMouseDown,!1),this._container.addEventListener("mouseup",this._$onMouseUp,!1),this._mouseLeft.addEventListener("mousedown",this._$onTouchStartButton,!1),this._mouseLeft.addEventListener("mouseup",this._$onTouchEndButton,!1),this._container.addEventListener("mousemove",this._$onMouseMove,!1))};VirtualJoystick.prototype.destroy=function(){this._container.removeChild(this._baseEl),this._container.removeChild(this._stickEl),this._mouseLeft.removeEventListener("touchstart",this._$onTouchStartButton,!1),this._mouseLeft.removeEventListener("touchend",this._$onTouchEndButton,!1),this._container.removeChild(this._mouseLeft),this._container.removeEventListener("touchstart",this._$onTouchStart,!1),this._container.removeEventListener("touchend",this._$onTouchEnd,!1),this._container.removeEventListener("touchmove",this._$onTouchMove,!1),this._mouseSupport&&(this._container.removeEventListener("mouseup",this._$onMouseUp,!1),this._container.removeEventListener("mousedown",this._$onMouseDown,!1),this._container.removeEventListener("mousemove",this._$onMouseMove,!1))},VirtualJoystick.touchScreenAvailable=function(){return"createTouch"in document},VirtualJoystick.prototype.deltaX=function(){return this._stickX-this._baseX},VirtualJoystick.prototype.deltaY=function(){return this._stickY-this._baseY},VirtualJoystick.prototype.up=function(){if(!1===this._pressed)return!1;var t=this.deltaX(),e=this.deltaY();return!(0<=e)&&!(Math.abs(e)<this._range&&Math.abs(e)<Math.abs(t))},VirtualJoystick.prototype.down=function(){if(!1===this._pressed)return!1;var t=this.deltaX(),e=this.deltaY();return!(e<=0)&&!(Math.abs(e)<this._range&&Math.abs(e)<Math.abs(t))},VirtualJoystick.prototype.right=function(){if(!1===this._pressed)return!1;var t=this.deltaX(),e=this.deltaY();return!(t<=0)&&!(Math.abs(t)<this._range&&Math.abs(e)>Math.abs(t))},VirtualJoystick.prototype.left=function(){if(!1===this._pressed)return!1;var t=this.deltaX(),e=this.deltaY();return!(0<=t)&&!(Math.abs(t)<this._range&&Math.abs(e)>Math.abs(t))},VirtualJoystick.prototype._onUp=function(){this._pressed=!1,this._stickEl.style.display="none",this._baseX=this._baseY=0,this._stickX=this._stickY=0,this._eraseInterval()},VirtualJoystick.prototype._onDown=function(t,e){this._pressed=!0,this._stickX=t,this._stickY=e,this._stickEl.style.display="",this._stickEl.style.left=this._stickX-this._stickEl.width/2+"px",this._stickEl.style.top=this._stickY-this._stickEl.height/2+"px",this._startInterval()},VirtualJoystick.prototype._onMove=function(t,e){!0===this._pressed&&(this._stickX=t,this._stickY=e,this._stickEl.style.left=t-this._stickEl.width/2+"px",this._stickEl.style.top=e-this._stickEl.height/2+"px",this._startInterval())},VirtualJoystick.prototype._startInterval=function(t,e){this._eraseInterval();var i=$(this._baseEl).offset().left+$(this._baseEl).width()/2,n=$(this._stickEl).offset().left+$(this._stickEl).width()/2;this.offsetX=parseInt((n-i)/5);var r=$(this._baseEl).offset().top+$(this._baseEl).height()/2,s=$(this._stickEl).offset().top+$(this._stickEl).height()/2;this.offsetY=parseInt((s-r)/5),15<this.offsetX&&(this.offsetX=15),15<this.offsetY&&(this.offsetY=15);var o=this;this._timer=setInterval(function(){o._callback&&o._callback.call(o._callbackcontext,[o.offsetX,o.offsetY])},10)},VirtualJoystick.prototype._eraseInterval=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},VirtualJoystick.prototype._onMouseUp=function(t){return this._onUp()},VirtualJoystick.prototype._onMouseDown=function(t){var e=t.pageX,i=t.pageY;return this._onDown(e,i)},VirtualJoystick.prototype._onMouseMove=function(t){var e=t.pageX,i=t.pageY;return this._onMove(e,i)},VirtualJoystick.prototype._onTouchStart=function(t){if(1==t.touches.length){t.preventDefault();var e=t.touches[0].pageX,i=t.touches[0].pageY;return this._onDown(e,i)}},VirtualJoystick.prototype._onTouchEnd=function(t){return t.preventDefault(),this._onUp()},VirtualJoystick.prototype._onTouchMove=function(t){if(!t.touches||1==t.touches.length){t.preventDefault();var e=t.touches[0].pageX,i=t.touches[0].pageY;return this._onMove(e,i)}},VirtualJoystick.prototype._onTouchStartButton=function(t){t.touches&&1!=t.touches.length||(t.preventDefault(),this._callbackButton.call(this._callbackcontext,["down"]))},VirtualJoystick.prototype._onTouchEndButton=function(t){t.preventDefault(),this._callbackButton.call(this._callbackcontext,["up"])},VirtualJoystick.prototype._buildJoystickBase=function(){var t=document.createElement("canvas");t.style.zIndex=2,t.width=126,t.height=126;var e=t.getContext("2d");return e.beginPath(),e.strokeStyle="cyan",e.lineWidth=6,e.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),e.stroke(),e.beginPath(),e.strokeStyle="cyan",e.lineWidth=2,e.arc(t.width/2,t.width/2,60,0,2*Math.PI,!0),e.stroke(),t},VirtualJoystick.prototype._buildJoystickStick=function(){var t=document.createElement("canvas");t.style.zIndex=2,t.width=86,t.height=86;var e=t.getContext("2d");return e.beginPath(),e.strokeStyle="cyan",e.lineWidth=6,e.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),e.stroke(),t},VirtualJoystick.prototype._buildJoystickButton=function(){var t=document.createElement("canvas");t.style.zIndex=2,t.width=86,t.height=86;var e=t.getContext("2d");return e.beginPath(),e.strokeStyle="green",e.lineWidth=6,e.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),e.stroke(),t};var dbits,prettyPrint=function(){var f={el:function(t,e){var i,n=document.createElement(t);if((e=f.merge({},e))&&e.style){e.style;f.applyCSS(n,e.style),delete e.style}for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},applyCSS:function(t,e){for(var i in e)if(e.hasOwnProperty(i))try{t.style[i]=e[i]}catch(t){}},txt:function(t){return document.createTextNode(t)},row:function(t,e,i){i=i||"td";var n,r=f.count(t,null)+1,s=f.el("tr"),o={style:f.getStyles(i,e),colSpan:r,onmouseover:function(){var t=this.parentNode.childNodes;f.forEach(t,function(t){"td"===t.nodeName.toLowerCase()&&f.applyCSS(t,f.getStyles("td_hover",e))})},onmouseout:function(){var t=this.parentNode.childNodes;f.forEach(t,function(t){"td"===t.nodeName.toLowerCase()&&f.applyCSS(t,f.getStyles("td",e))})}};return f.forEach(t,function(t){null!==t&&(n=f.el(i,o),t.nodeType?n.appendChild(t):n.innerHTML=f.shorten(t.toString()),s.appendChild(n))}),s},hRow:function(t,e){return f.row(t,e,"th")},table:function(t,n){t=t||[];var e={thead:{style:f.getStyles("thead",n)},tbody:{style:f.getStyles("tbody",n)},table:{style:f.getStyles("table",n)}},i=f.el("table",e.table),r=f.el("thead",e.thead),s=f.el("tbody",e.tbody);return t.length&&(i.appendChild(r),r.appendChild(f.hRow(t,n))),i.appendChild(s),{node:i,tbody:s,thead:r,appendChild:function(t){this.tbody.appendChild(t)},addRow:function(t,e,i){return this.appendChild(f.row.call(f,t,e||n,i)),this}}},shorten:function(t){return 40<(t=t.replace(/^\s\s*|\s\s*$|\n/g,"")).length?t.substring(0,39)+"...":t},htmlentities:function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},merge:function(t,e){for(var i in"object"!=typeof t&&(t={}),e)if(e.hasOwnProperty(i)){var n=e[i];if("object"==typeof n){t[i]=f.merge(t[i],n);continue}t[i]=n}for(var r=2,s=arguments.length;r<s;r++)f.merge(t,arguments[r]);return t},count:function(t,e){for(var i=0,n=0,r=t.length;n<r;n++)t[n]===e&&i++;return i},thead:function(t){return t.getElementsByTagName("thead")[0]},forEach:function(t,e,i){i||(i=e);for(var n=t.length,r=-1;++r<n&&!1!==i(t[r],r,t););return!0},type:function(t){try{if(null===t)return"null";if(void 0===t)return"undefined";var e=Object.prototype.toString.call(t).match(/\s(.+?)\]/)[1].toLowerCase();return t.nodeType?1===t.nodeType?"domelement":"domnode":/^(string|number|array|regexp|function|date|boolean)$/.test(e)?e:"object"==typeof t?t.jquery&&"string"==typeof t.jquery?"jquery":"object":t===window||t===document?"object":"default"}catch(t){return"default"}},within:function(i){return{is:function(t){for(var e in i)if(i[e]===t)return e;return""}}},common:{circRef:function(t,e,i){return f.expander("[POINTS BACK TO <strong>"+e+"</strong>]","Click to show this item anyway",function(){this.parentNode.appendChild(n(t,{maxDepth:1}))})},depthReached:function(t,e){return f.expander("[DEPTH REACHED]","Click to show this item anyway",function(){try{this.parentNode.appendChild(n(t,{maxDepth:1}))}catch(t){this.parentNode.appendChild(f.table(["ERROR OCCURED DURING OBJECT RETRIEVAL"],"error").addRow([t.message]).node)}})}},getStyles:function(t,e){return e=n.settings.styles[e]||{},f.merge({},n.settings.styles.default[t],e[t])},expander:function(t,e,i){return f.el("a",{innerHTML:f.shorten(t)+' <b style="visibility:hidden;">[+]</b>',title:e,onmouseover:function(){this.getElementsByTagName("b")[0].style.visibility="visible"},onmouseout:function(){this.getElementsByTagName("b")[0].style.visibility="hidden"},onclick:function(){return this.style.display="none",i.call(this),!1},style:{cursor:"pointer"}})},stringify:function(t){var i,e=f.type(t),n=!0;if("array"===e)return i="[",f.forEach(t,function(t,e){i+=(0===e?"":", ")+f.stringify(t)}),i+"]";if("object"!=typeof t)return"regexp"===e?"/"+t.source+"/":"string"===e?'"'+t.replace(/"/g,'\\"')+'"':t.toString();for(var r in i="{",t)t.hasOwnProperty(r)&&(i+=(n?"":", ")+r+":"+f.stringify(t[r]),n=!1);return i+"}"},headerGradient:function(){var t=document.createElement("canvas");if(!t.getContext)return"";var e=t.getContext("2d");t.height=30,t.width=1;var i=e.createLinearGradient(0,0,0,30);return i.addColorStop(0,"rgba(0,0,0,0)"),i.addColorStop(1,"rgba(0,0,0,0.25)"),e.fillStyle=i,e.fillRect(0,0,1,30),"url("+(t.toDataURL&&t.toDataURL()||"")+")"}()},n=function(t,e){e=e||{};var u=f.merge({},n.config,e),i=f.el("div"),l=(n.config,{}),p=!1;n.settings=u;var d={string:function(t){return f.txt('"'+f.shorten(t.replace(/"/g,'\\"'))+'"')},number:function(t){return f.txt(t)},regexp:function(t){var e=f.table(["RegExp",null],"regexp"),i=f.table(),n=f.expander("/"+t.source+"/","Click to show more",function(){this.parentNode.appendChild(e.node)});return i.addRow(["g",t.global]).addRow(["i",t.ignoreCase]).addRow(["m",t.multiline]),e.addRow(["source","/"+t.source+"/"]).addRow(["flags",i.node]).addRow(["lastIndex",t.lastIndex]),u.expanded?e.node:n},domelement:function(e,t){var i=f.table(["DOMElement",null],"domelement"),n=e.nodeName||"";return i.addRow(["tag","&lt;"+n.toLowerCase()+"&gt;"]),f.forEach(["id","className","innerHTML","src","href"],function(t){e[t]&&i.addRow([t,f.htmlentities(e[t])])}),u.expanded?i.node:f.expander("DOMElement ("+n.toLowerCase()+")","Click to show more",function(){this.parentNode.appendChild(i.node)})},domnode:function(t){var e=f.table(["DOMNode",null],"domelement"),i=f.htmlentities((t.data||"UNDEFINED").replace(/\n/g,"\\n"));return e.addRow(["nodeType",t.nodeType+" ("+t.nodeName+")"]).addRow(["data",i]),u.expanded?e.node:f.expander("DOMNode","Click to show more",function(){this.parentNode.appendChild(e.node)})},jquery:function(t,e,i){return d.array(t,e,i,!0)},object:function(t,e,i){var n=f.within(l).is(t);if(n)return f.common.circRef(t,n,u);if(l[i||"TOP"]=t,e===u.maxDepth)return f.common.depthReached(t,u);var r=f.table(["Object",null],"object"),s=!0;for(var o in t)if(!t.hasOwnProperty||t.hasOwnProperty(o)){var a=t[o],c=f.type(a);s=!1;try{r.addRow([o,d[c](a,e+1,o)],c)}catch(t){window.console&&window.console.log&&console.log(t.message)}}s?r.addRow(["<small>[empty]</small>"]):r.thead.appendChild(f.hRow(["key","value"],"colHeader"));var h=u.expanded||p?r.node:f.expander(f.stringify(t),"Click to show more",function(){this.parentNode.appendChild(r.node)});return p=!0,h},array:function(i,n,t,e){var r=f.within(l).is(i);if(r)return f.common.circRef(i,r);if(l[t||"TOP"]=i,n===u.maxDepth)return f.common.depthReached(i);var s=e?"jQuery":"Array",o=f.table([s+"("+i.length+")",null],e?"jquery":s.toLowerCase()),a=!0,c=0;return e&&o.addRow(["selector",i.selector]),f.forEach(i,function(t,e){if(0<=u.maxArray&&++c>u.maxArray)return o.addRow([e+".."+(i.length-1),d[f.type(t)]("...",n+1,e)]),!1;a=!1,o.addRow([e,d[f.type(t)](t,n+1,e)])}),e||(a?o.addRow(["<small>[empty]</small>"]):o.thead.appendChild(f.hRow(["index","value"],"colHeader"))),u.expanded?o.node:f.expander(f.stringify(i),"Click to show more",function(){this.parentNode.appendChild(o.node)})},function:function(t,e,i){var n=f.within(l).is(t);if(n)return f.common.circRef(t,n);l[i||"TOP"]=t;var r=f.table(["Function",null],"function"),s=(f.table(["Arguments"]),t.toString().match(/\((.+?)\)/)),o=t.toString().match(/\(.*?\)\s+?\{?([\S\s]+)/)[1].replace(/\}?$/,"");return r.addRow(["arguments",s?s[1].replace(/[^\w_,\s]/g,""):"<small>[none/native]</small>"]).addRow(["body",o]),u.expanded?r.node:f.expander("function(){...}","Click to see more about this function.",function(){this.parentNode.appendChild(r.node)})},date:function(t){var e=f.table(["Date",null],"date"),i=t.toString().split(/\s/);return e.addRow(["Time",i[4]]).addRow(["Date",i.slice(0,4).join("-")]),u.expanded?e.node:f.expander("Date (timestamp): "+ +t,"Click to see a little more info about this date",function(){this.parentNode.appendChild(e.node)})},boolean:function(t){return f.txt(t.toString().toUpperCase())},undefined:function(){return f.txt("UNDEFINED")},null:function(){return f.txt("NULL")},default:function(){return f.txt("prettyPrint: TypeNotFound Error")}};return i.appendChild(d[u.forceObject?"object":f.type(t)](t,0)),i};return n.config={expanded:!0,forceObject:!1,maxDepth:3,maxArray:-1,styles:{array:{th:{backgroundColor:"#6DBD2A",color:"white"}},function:{th:{backgroundColor:"#D82525"}},regexp:{th:{backgroundColor:"#E2F3FB",color:"#000"}},object:{th:{backgroundColor:"#1F96CF"}},jquery:{th:{backgroundColor:"#FBF315"}},error:{th:{backgroundColor:"red",color:"yellow"}},domelement:{th:{backgroundColor:"#F3801E"}},date:{th:{backgroundColor:"#A725D8"}},colHeader:{th:{backgroundColor:"#EEE",color:"#000",textTransform:"uppercase"}},default:{table:{borderCollapse:"collapse",width:"100%"},td:{padding:"5px",fontSize:"12px",backgroundColor:"#FFF",color:"#222",border:"1px solid #000",verticalAlign:"top",fontFamily:'"Consolas","Lucida Console",Courier,mono',whiteSpace:"nowrap"},td_hover:{},th:{padding:"5px",fontSize:"12px",backgroundColor:"#222",color:"#EEE",textAlign:"left",border:"1px solid #000",verticalAlign:"top",fontFamily:'"Consolas","Lucida Console",Courier,mono',backgroundImage:f.headerGradient,backgroundRepeat:"repeat-x"}}}},n}();!function(n){n.nok=function(t){(t=n.extend({message:"",type:"info",stay:4},t)).sticky&&(t.stay=0);if(n.trim(t.message)){0==n("#nok").length&&n("body").append(n('<div id="nok"></div>'));var e=n('<div class="nok nok_'+t.type+'"><span>'+t.message+"</span></div>");n("#nok").append(n(e)),n(e).animate({right:"10px"},"fast"),n.isNumeric(t.stay)&&0<t.stay&&setInterval(function(){i(e)},1e3*t.stay)}function i(t){n(t).animate({right:"-300px"},function(){n(t).slideUp("fast",function(){n(t).remove(),n.trim(n("#nok").html()).length||n("#nok").remove()})})}n(document).on("click",".nok",function(){i(this)})}}(jQuery);var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function encryptionBigInteger(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new encryptionBigInteger(null)}function am1(t,e,i,n,r,s){for(;0<=--s;){var o=e*this[t++]+i[n]+r;r=Math.floor(o/67108864),i[n++]=67108863&o}return r}function am2(t,e,i,n,r,s){for(var o=32767&e,a=e>>15;0<=--s;){var c=32767&this[t],h=this[t++]>>15,u=a*c+h*o;r=((c=o*c+((32767&u)<<15)+i[n]+(1073741823&r))>>>30)+(u>>>15)+a*h+(r>>>30),i[n++]=1073741823&c}return r}function am3(t,e,i,n,r,s){for(var o=16383&e,a=e>>14;0<=--s;){var c=16383&this[t],h=this[t++]>>14,u=a*c+h*o;r=((c=o*c+((16383&u)<<14)+i[n]+r)>>28)+(u>>14)+a*h,i[n++]=268435455&c}return r}dbits=j_lm&&"Microsoft Internet Explorer"==navigator.appName?(encryptionBigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator.appName?(encryptionBigInteger.prototype.am=am1,26):(encryptionBigInteger.prototype.am=am3,28),encryptionBigInteger.prototype.DB=dbits,encryptionBigInteger.prototype.DM=(1<<dbits)-1,encryptionBigInteger.prototype.DV=1<<dbits;var BI_FP=52;encryptionBigInteger.prototype.FV=Math.pow(2,BI_FP),encryptionBigInteger.prototype.F1=BI_FP-dbits,encryptionBigInteger.prototype.F2=2*dbits-BI_FP;var rr,vv,BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var i=BI_RC[t.charCodeAt(e)];return null==i?-1:i}function bnpCopyTo(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,0<t?this[0]=t:t<-1?this[0]=t+DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,r=!1,s=0;0<=--n;){var o=8==i?255&t[n]:intAt(t,n);o<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==s?this[this.t++]=o:s+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,(s+=i)>=this.DB&&(s-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,0<s&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&encryptionBigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(0<o--)for(a<this.DB&&0<(i=this[o]>>a)&&(r=!0,s=int2char(i));0<=o;)a<e?(i=(this[o]&(1<<a)-1)<<e-a,i|=this[--o]>>(a+=this.DB-e)):(i=this[o]>>(a-=e)&n,a<=0&&(a+=this.DB,--o)),0<i&&(r=!0),r&&(s+=int2char(i));return r?s:"0"}function bnNegate(){var t=nbi();return encryptionBigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;0<=--i;)if(0!=(e=this[i]-t[i]))return e;return 0}function nbits(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var i;for(i=this.t-1;0<=i;--i)e[i+t]=this[i];for(i=t-1;0<=i;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var i,n=t%this.DB,r=this.DB-n,s=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;0<=i;--i)e[i+o+1]=this[i]>>r|a,a=(this[i]&s)<<n;for(i=o-1;0<=i;--i)e[i]=0;e[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<r,e[o-i]=this[o]>>n;0<n&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,e.clamp()}}function bnpSubTo(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:0<n&&(e[i++]=n),e.t=i,e.clamp()}function bnpMultiplyTo(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;0<=--r;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&encryptionBigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),i=t.t=2*e.t;0<=--i;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var s=nbi(),o=this.s,a=t.s,c=this.DB-nbits(n[n.t-1]);0<c?(n.lShiftTo(c,s),r.lShiftTo(c,i)):(n.copyTo(s),r.copyTo(i));var h=s.t,u=s[h-1];if(0!=u){var l=u*(1<<this.F1)+(1<h?s[h-2]>>this.F2:0),p=this.FV/l,d=(1<<this.F1)/l,f=1<<this.F2,g=i.t,m=g-h,_=null==e?nbi():e;for(s.dlShiftTo(m,_),0<=i.compareTo(_)&&(i[i.t++]=1,i.subTo(_,i)),encryptionBigInteger.ONE.dlShiftTo(h,_),_.subTo(s,s);s.t<h;)s[s.t++]=0;for(;0<=--m;){var w=i[--g]==u?this.DM:Math.floor(i[g]*p+(i[g-1]+f)*d);if((i[g]+=s.am(0,w,i,m,0,h))<w)for(s.dlShiftTo(m,_),i.subTo(_,i);i[g]<--w;)i.subTo(_,i)}null!=e&&(i.drShiftTo(h,e),o!=a&&encryptionBigInteger.ZERO.subTo(e,e)),i.t=h,i.clamp(),0<c&&i.rShiftTo(c,i),o<0&&encryptionBigInteger.ZERO.subTo(i,i)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&0<e.compareTo(encryptionBigInteger.ZERO)&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||0<=t.compareTo(this.m)?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&0<e.compareTo(encryptionBigInteger.ZERO)&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(t,e){if(4294967295<t||t<1)return encryptionBigInteger.ONE;var i=nbi(),n=nbi(),r=e.convert(this),s=nbits(t)-1;for(r.copyTo(i);0<=--s;)if(e.sqrTo(i,n),0<(t&1<<s))e.mulTo(n,r,i);else{var o=i;i=n,n=o}return e.revert(i)}function bnModPowInt(t,e){var i;return i=t<256||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,i)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||t<2||36<t)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=nbv(i),r=nbi(),s=nbi(),o="";for(this.divRemTo(n,r,s);0<r.signum();)o=(i+s.intValue()).toString(t).substr(1)+o,r.divRemTo(n,r,s);return s.intValue().toString(t)+o}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,s=0,o=0,a=0;a<t.length;++a){var c=intAt(t,a);c<0?"-"==t.charAt(a)&&0==this.signum()&&(r=!0):(o=e*o+c,++s>=i&&(this.dMultiply(n),this.dAddOffset(o,0),o=s=0))}0<s&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),r&&encryptionBigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(encryptionBigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(encryptionBigInteger.ONE.shiftLeft(t-1),this);else{var n=new Array,r=7&t;n.length=1+(t>>3),e.nextBytes(n),0<r?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(0<t--)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);0<=t;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(0<r||i!=this.s)&&(e[r++]=i);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return 0<this.compareTo(t)?this:t}function bnpBitwiseTo(t,e,i){var n,r,s=Math.min(t.t,this.t);for(n=0;n<s;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=s;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=s;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=cbit(this[i]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var i=encryptionBigInteger.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,0<n?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),i=nbi();return this.divRemTo(t,e,i),new Array(e,i)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,i){t.multiplyTo(e,i)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;0<r;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function bnpMultiplyUpperTo(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;0<=--n;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),encryptionBigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnModPow(t,e){var i,n,r=t.bitLength(),s=nbv(1);if(r<=0)return s;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var o=new Array,a=3,c=i-1,h=(1<<i)-1;if(o[1]=n.convert(this),1<i){var u=nbi();for(n.sqrTo(o[1],u);a<=h;)o[a]=nbi(),n.mulTo(u,o[a-2],o[a]),a+=2}var l,p,d=t.t-1,f=!0,g=nbi();for(r=nbits(t[d])-1;0<=d;){for(c<=r?l=t[d]>>r-c&h:(l=(t[d]&(1<<r+1)-1)<<c-r,0<d&&(l|=t[d-1]>>this.DB+r-c)),a=i;0==(1&l);)l>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)o[l].copyTo(s),f=!1;else{for(;1<a;)n.sqrTo(s,g),n.sqrTo(g,s),a-=2;0<a?n.sqrTo(s,g):(p=s,s=g,g=p),n.mulTo(g,o[l],s)}for(;0<=d&&0==(t[d]&1<<r);)n.sqrTo(s,g),p=s,s=g,g=p,--r<0&&(r=this.DB-1,--d)}return n.revert(s)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(r<s&&(s=r),0<s&&(e.rShiftTo(s,e),i.rShiftTo(s,i));0<e.signum();)0<(r=e.getLowestSetBit())&&e.rShiftTo(r,e),0<(r=i.getLowestSetBit())&&i.rShiftTo(r,i),0<=e.compareTo(i)?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return 0<s&&i.lShiftTo(s,i),i}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(0<this.t)if(0==e)i=this[0]%t;else for(var n=this.t-1;0<=n;--n)i=(e*i+this[n])%t;return i}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return encryptionBigInteger.ZERO;for(var i=t.clone(),n=this.clone(),r=nbv(1),s=nbv(0),o=nbv(0),a=nbv(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(r.isEven()&&s.isEven()||(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);0<=i.compareTo(n)?(i.subTo(n,i),e&&r.subTo(o,r),s.subTo(a,s)):(n.subTo(i,n),e&&o.subTo(r,o),a.subTo(s,a))}return 0!=n.compareTo(encryptionBigInteger.ONE)?encryptionBigInteger.ZERO:0<=a.compareTo(t)?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,encryptionBigInteger.prototype.copyTo=bnpCopyTo,encryptionBigInteger.prototype.fromInt=bnpFromInt,encryptionBigInteger.prototype.fromString=bnpFromString,encryptionBigInteger.prototype.clamp=bnpClamp,encryptionBigInteger.prototype.dlShiftTo=bnpDLShiftTo,encryptionBigInteger.prototype.drShiftTo=bnpDRShiftTo,encryptionBigInteger.prototype.lShiftTo=bnpLShiftTo,encryptionBigInteger.prototype.rShiftTo=bnpRShiftTo,encryptionBigInteger.prototype.subTo=bnpSubTo,encryptionBigInteger.prototype.multiplyTo=bnpMultiplyTo,encryptionBigInteger.prototype.squareTo=bnpSquareTo,encryptionBigInteger.prototype.divRemTo=bnpDivRemTo,encryptionBigInteger.prototype.invDigit=bnpInvDigit,encryptionBigInteger.prototype.isEven=bnpIsEven,encryptionBigInteger.prototype.exp=bnpExp,encryptionBigInteger.prototype.toString=bnToString,encryptionBigInteger.prototype.negate=bnNegate,encryptionBigInteger.prototype.abs=bnAbs,encryptionBigInteger.prototype.compareTo=bnCompareTo,encryptionBigInteger.prototype.bitLength=bnBitLength,encryptionBigInteger.prototype.mod=bnMod,encryptionBigInteger.prototype.modPowInt=bnModPowInt,encryptionBigInteger.ZERO=nbv(0),encryptionBigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,i=this.abs();if(1==i.t&&i[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(i[0]==lowprimes[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<lowprimes.length;){for(var n=lowprimes[e],r=e+1;r<lowprimes.length&&n<lplim;)n*=lowprimes[r++];for(n=i.modInt(n);e<r;)if(n%lowprimes[e++]==0)return!1}return i.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(encryptionBigInteger.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>lowprimes.length&&(t=lowprimes.length);for(var r=nbi(),s=0;s<t;++s){r.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=r.modPow(n,this);if(0!=o.compareTo(encryptionBigInteger.ONE)&&0!=o.compareTo(e)){for(var a=1;a++<i&&0!=o.compareTo(e);)if(0==(o=o.modPowInt(2,this)).compareTo(encryptionBigInteger.ONE))return!1;if(0!=o.compareTo(e))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(e=i=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0}function ARC4next(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}encryptionBigInteger.prototype.chunkSize=bnpChunkSize,encryptionBigInteger.prototype.toRadix=bnpToRadix,encryptionBigInteger.prototype.fromRadix=bnpFromRadix,encryptionBigInteger.prototype.fromNumber=bnpFromNumber,encryptionBigInteger.prototype.bitwiseTo=bnpBitwiseTo,encryptionBigInteger.prototype.changeBit=bnpChangeBit,encryptionBigInteger.prototype.addTo=bnpAddTo,encryptionBigInteger.prototype.dMultiply=bnpDMultiply,encryptionBigInteger.prototype.dAddOffset=bnpDAddOffset,encryptionBigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,encryptionBigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,encryptionBigInteger.prototype.modInt=bnpModInt,encryptionBigInteger.prototype.millerRabin=bnpMillerRabin,encryptionBigInteger.prototype.clone=bnClone,encryptionBigInteger.prototype.intValue=bnIntValue,encryptionBigInteger.prototype.byteValue=bnByteValue,encryptionBigInteger.prototype.shortValue=bnShortValue,encryptionBigInteger.prototype.signum=bnSigNum,encryptionBigInteger.prototype.toByteArray=bnToByteArray,encryptionBigInteger.prototype.equals=bnEquals,encryptionBigInteger.prototype.min=bnMin,encryptionBigInteger.prototype.max=bnMax,encryptionBigInteger.prototype.and=bnAnd,encryptionBigInteger.prototype.or=bnOr,encryptionBigInteger.prototype.xor=bnXor,encryptionBigInteger.prototype.andNot=bnAndNot,encryptionBigInteger.prototype.not=bnNot,encryptionBigInteger.prototype.shiftLeft=bnShiftLeft,encryptionBigInteger.prototype.shiftRight=bnShiftRight,encryptionBigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,encryptionBigInteger.prototype.bitCount=bnBitCount,encryptionBigInteger.prototype.testBit=bnTestBit,encryptionBigInteger.prototype.setBit=bnSetBit,encryptionBigInteger.prototype.clearBit=bnClearBit,encryptionBigInteger.prototype.flipBit=bnFlipBit,encryptionBigInteger.prototype.add=bnAdd,encryptionBigInteger.prototype.subtract=bnSubtract,encryptionBigInteger.prototype.multiply=bnMultiply,encryptionBigInteger.prototype.divide=bnDivide,encryptionBigInteger.prototype.remainder=bnRemainder,encryptionBigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,encryptionBigInteger.prototype.modPow=bnModPow,encryptionBigInteger.prototype.modInverse=bnModInverse,encryptionBigInteger.prototype.pow=bnPow,encryptionBigInteger.prototype.gcd=bnGCD,encryptionBigInteger.prototype.isProbablePrime=bnIsProbablePrime,encryptionBigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_state,rng_pool,rng_pptr,rng_psize=256;function rng_seed_int(t){rng_pool[rng_pptr++]^=255&t,rng_pool[rng_pptr++]^=t>>8&255,rng_pool[rng_pptr++]^=t>>16&255,rng_pool[rng_pptr++]^=t>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t;if(rng_pool=new Array,rng_pptr=0,"Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(t){var e;for(e=0;e<t.length;++e)t[e]=rng_get_byte()}function SecureRandom(){}function sha1Hash(t){for(var e=[1518500249,1859775393,2400959708,3395469782],i=(t+=String.fromCharCode(128)).length/4+2,n=Math.ceil(i/16),r=new Array(n),s=0;s<n;s++){r[s]=new Array(16);for(var o=0;o<16;o++)r[s][o]=t.charCodeAt(64*s+4*o)<<24|t.charCodeAt(64*s+4*o+1)<<16|t.charCodeAt(64*s+4*o+2)<<8|t.charCodeAt(64*s+4*o+3)}r[n-1][14]=8*(t.length-1)/Math.pow(2,32),r[n-1][14]=Math.floor(r[n-1][14]),r[n-1][15]=8*(t.length-1)&4294967295;var a,c,h,u,l,p=1732584193,d=4023233417,g=2562383102,m=271733878,_=3285377520,w=new Array(80);for(s=0;s<n;s++){for(var S=0;S<16;S++)w[S]=r[s][S];for(S=16;S<80;S++)w[S]=ROTL(w[S-3]^w[S-8]^w[S-14]^w[S-16],1);a=p,c=d,h=g,u=m,l=_;for(S=0;S<80;S++){var y=Math.floor(S/20),b=ROTL(a,5)+f(y,c,h,u)+l+e[y]+w[S]&4294967295;l=u,u=h,h=ROTL(c,30),c=a,a=b}p=p+a&4294967295,d=d+c&4294967295,g=g+h&4294967295,m=m+u&4294967295,_=_+l&4294967295}return p.toHexStr()+d.toHexStr()+g.toHexStr()+m.toHexStr()+_.toHexStr()}function f(t,e,i,n){switch(t){case 0:return e&i^~e&n;case 1:return e^i^n;case 2:return e&i^e&n^i&n;case 3:return e^i^n}}function ROTL(t,e){return t<<e|t>>>32-e}function pack(t){for(var e="",i=0;i<t.length;i+=2)e+=String.fromCharCode(parseInt(t.substring(i,i+2),16));return e}function char2hex(t){for(var e="",i=0;i<t.length;i+=1){switch(temp=t[i].toString(16),temp.length){case 1:temp="0"+temp;break;case 0:temp="00"}e+=temp}return e}function xor(t,e){length=Math.min(t.length,e.length),temp="";for(var i=0;i<length;i++)temp+=String.fromCharCode(t.charCodeAt(i)^e.charCodeAt(i));length=Math.max(t.length,e.length)-length;for(i=0;i<length;i++)temp+="\0";return temp}function mgf1(e,i){t="",hLen=20,count=Math.ceil(i/hLen);for(var n=0;n<count;n++)c=String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,255&n),t+=pack(sha1Hash(e+c));return t.substring(0,i)}function rsa_oaep_encrypt(t,e,i){for(var n="Ú9£î^kK\r2U¿ï`¯Ø\t",r=128-t.length-40-2,s=0;s<r;s++)n+="\0";var o=n+""+t,a="";for(s=0;s<24;s+=4)r=new Array(4),rng.nextBytes(r),a+=String.fromCharCode(r[0],r[1],r[2],r[3]);var h=xor(o,mgf1(a=a.substring(4-a.length%4),107)),u="\0"+xor(a,mgf1(h,20))+h;for(m=new Array,s=0;s<u.length;s++)m[s]=u.charCodeAt(s);return m=new encryptionBigInteger(m,256),c=m.modPowInt(i,e),c=c.toString(16),1&c.length&&(c="0"+c),c}function RSA_public_encrypt(t,e){for(var i=new Uint8Array(e),n=new Array(129),r=0;r<129;r++)n[r]=i[28+r];var s=new encryptionBigInteger(n),o=new encryptionBigInteger("010001",16);return rsa_oaep_encrypt(t+String.fromCharCode(0),s,o)}SecureRandom.prototype.nextBytes=rng_get_bytes,Number.prototype.toHexStr=function(){for(var t="",e=7;0<=e;e--)t+=(this>>>4*e&15).toString(16);return t},rng=new SecureRandom;var SWCanvas=function(t){this.arr=new ArrayBuffer(t.width*t.height*4),this.arr32=new Uint32Array(this.arr),this.arr8=new Uint8ClampedArray(this.arr),this.canvas=t,this.width=this.canvas.width,this.height=this.canvas.height};SWCanvas.prototype.putImageData=function(t,e,i){for(var n,r,s=t.data.buffer,o=t.width,a=t.height,c=this.width;a--;)n=(i+a)*c+e,r=new Uint32Array(s,o*a*4,o),this.arr32.set(r,n)},SWCanvas.prototype.getImageData=function(t,e,i,n){for(var r,s=new Uint32Array(i*n),o=this.arr32,a=n,c=this.width;a--;){r=(e+a)*c+t;var h=o.subarray(r,r+i);s.set(h,i*a)}return new ImageData(new Uint8ClampedArray(s.buffer),i,n)},SWCanvas.prototype.fillRect=function(t,e,i,n,r,s,o){for(var a,c=new Uint32Array(s),h=4278190080|t|e<<8|i<<16,u=this.width,l=s;l--;)c[l]=h;for(;o--;)a=(r+o)*u+n,this.arr32.set(c,a)},SWCanvas.prototype.flushBack=function(){var t=this.canvas.getContext("2d").getImageData(0,0,this.width,this.height).data;this.arr8.set(t)},SWCanvas.prototype.flush=function(){var t=new ImageData(this.arr8,this.width,this.height);this.canvas.getContext("2d").putImageData(t,0,0)},function(t,e){"undefined"!=typeof module&&module.exports?module.exports.browser=e():this.bowser=e()}(0,function(){function t(i){function t(t){var e=i.match(t);return e&&1<e.length&&e[1]||""}var e,n=t(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(i)&&/android/i.test(i),s=t(/version\/(\d+(\.\d+)?)/i),o=/tablet/i.test(i),a=!o&&/[^-]mobi/i.test(i);/opera|opr/i.test(i)?e={name:"Opera",opera:!0,version:s||t(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(i)?e={name:"Windows Phone",windowsphone:!0,msie:!0,version:t(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(i)?e={name:"Internet Explorer",msie:!0,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(i)?e={name:"Chrome",chrome:!0,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:n?(e={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},s&&(e.version=s)):/sailfish/i.test(i)?e={name:"Sailfish",sailfish:!0,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(i)?e={name:"SeaMonkey",seamonkey:!0,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(i)?(e={name:"Firefox",firefox:!0,version:t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(i)&&(e.firefoxos=!0)):/silk/i.test(i)?e={name:"Amazon Silk",silk:!0,version:t(/silk\/(\d+(\.\d+)?)/i)}:r?e={name:"Android",version:s}:/phantom/i.test(i)?e={name:"PhantomJS",phantom:!0,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(i)||/rim\stablet/i.test(i)?e={name:"BlackBerry",blackberry:!0,version:s||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(i)?(e={name:"WebOS",webos:!0,version:s||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(i)&&(e.touchpad=!0)):e=/bada/i.test(i)?{name:"Bada",bada:!0,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(i)?{name:"Tizen",tizen:!0,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(i)?{name:"Safari",safari:!0,version:s}:{},/(apple)?webkit/i.test(i)?(e.name=e.name||"Webkit",e.webkit=!0,!e.version&&s&&(e.version=s)):!e.opera&&/gecko\//i.test(i)&&(e.name=e.name||"Gecko",e.gecko=!0,e.version=e.version||t(/gecko\/(\d+(\.\d+)?)/i)),r||e.silk?e.android=!0:n&&(e[n]=!0,e.ios=!0);var c="";n?c=(c=t(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):r?c=t(/android[ \/-](\d+(\.\d+)*)/i):e.windowsphone?c=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):e.webos?c=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?c=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?c=t(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(c=t(/tizen[\/\s](\d+(\.\d+)*)/i)),c&&(e.osversion=c);var h=c.split(".")[0];return o||"ipad"==n||r&&(3==h||4==h&&!a)||e.silk?e.tablet=!0:(a||"iphone"==n||"ipod"==n||r||e.blackberry||e.webos||e.bada)&&(e.mobile=!0),e.msie&&9<=e.version||e.chrome&&20<=e.version||e.firefox&&10<=e.version||e.safari&&5<=e.version||e.opera&&10<=e.version||e.ios&&e.osversion&&6<=e.osversion.split(".")[0]?e.a=!0:e.msie&&e.version<9||e.chrome&&e.version<20||e.firefox&&e.version<10||e.safari&&e.version<5||e.opera&&e.version<10||e.ios&&e.osversion&&e.osversion.split(".")[0]<6?e.c=!0:e.x=!0,e}var e=t("undefined"!=typeof navigator?navigator.userAgent:"");return e._detect=t,window.bowser||(window.bowser=e),e}),"undefined"!=typeof module&&module.exports&&(jQuery=$={isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},isPlainObject:function(t){var e;if(!t||"object"!==jQuery.type(t)||t.nodeType||jQuery.isWindow(t))return!1;if(t.constructor&&!core_hasOwn.call(t,"constructor")&&!core_hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1;for(e in t);return void 0===e||core_hasOwn.call(t,e)},extend:function(){var t,e,i,n,r,s,o=arguments[0]||{},a=1,c=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[1]||{},a=2),c===a&&(o=this,--a);a<c;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],o!==(n=t[e])&&(h&&n&&(this.isPlainObject(n)||(r=this.isArray(n)))?(s=r?(r=!1,i&&this.isArray(i)?i:[]):i&&this.isPlainObject(i)?i:{},o[e]=this.extend(h,s,n)):void 0!==n&&(o[e]=n));return o}}),$.extend({spcExtend:function(t){var e=function(t){void 0!==this.init&&this.init(t||{})};e.prototype.superInit=t.init;var i=[];i.push(e.prototype);for(var n=arguments.length,r=0;r<n;r++)i.push(arguments[r]);return $.extend.apply($,i),e}}),$.extend(String.prototype,{lpad:function(t,e){for(var i=this;i.length<e;)i=t+i;return i},rpad:function(t,e){for(var i=this;i.length<e;)i+=t;return i}}),wdi={DomainObject:{}},wdi.RawMessage=$.spcExtend(wdi.DomainObject,{status:null,data:null,init:function(t){this.status=t.status,this.data=t.data}}),wdi.RawSpiceMessage=$.spcExtend(wdi.DomainObject,{header:null,body:null,channel:null,set:function(t,e,i){this.header=t,this.body=e,this.channel=i}}),wdi.SpiceMessage=$.spcExtend(wdi.DomainObject,{messageType:null,args:null,channel:null,init:function(t){this.channel=t.channel,this.messageType=t.messageType,this.args=t.args}}),wdi.EventObject=$.spcExtend(wdi.DomainObject,{events:null,init:function(){this.eyeEvents={}},getListenersLength:function(t){return null==this.eyeEvents[t]&&(this.eyeEvents[t]=[]),this.eyeEvents[t].length},addListener:function(t,e,i){i=i||this,null==this.eyeEvents[t]&&(this.eyeEvents[t]=[]),this.eyeEvents[t].push({fn:e,scope:i})},removeEvent:function(t){this.eyeEvents[t]=void 0},clearEvents:function(){this.eyeEvents={}},fire:function(t,e){var i=this.eyeEvents[t];if(i)for(var n=i.length;n--;)i[n].fn.call(i[n].scope,e)}}),wdi.CHANNEL_STATUS={disconnected:-1,idle:0,establishing:1,established:2},wdi.Debug={debug:!1,log:function(t){this.debug&&console.log.apply(console,Array.prototype.slice.call(arguments))},warn:function(t){console.warn.apply(console,Array.prototype.slice.call(arguments))},info:function(t){this.debug&&console.info.apply(console,Array.prototype.slice.call(arguments))},error:function(t){console.error.apply(console,Array.prototype.slice.call(arguments))}},wdi.Utils={generateWebSocketUrl:function(t,e,i,n,r,s,o){return"https:"==document.location.protocol?scheme="wss://":scheme="ws://",url=scheme+e+":"+i+"/",url}},wdi.postMessageW3CCompilant="undefined"!=typeof window&&window.bowser&&!(window.bowser.msie&&10<=window.bowser.version),wdi.Exception=$.spcExtend(wdi.DomainObject,{errorCode:null,message:null,init:function(t){this.message=t.message||"",this.errorCode=t.errorCode||0}});try{new ImageData(1,1)}catch(t){"undefined"!=typeof window&&(window.ImageData=function(t,e,i){var n=document.createElement("canvas").getContext("2d").createImageData(e,i);return n.data.set(t),n})}wdi.bppMask=[],wdi.bppMask[1]=[128,64,32,16,8,4,2,1],wdi.bppMask[4]=[240,15],wdi.bppMask[8]=[255],wdi.SeamlessIntegration=!0,wdi.Debug.debug=!1,wdi.exceptionHandling=!0,wdi.IntegrationBenchmarkEnabled=!1,wdi.useWorkers=!0,wdi.logOperations=!1,wdi.Flipper={flip:function(t){return this._handMadeFlip(t)},_handMadeFlip:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var i=e.getContext("2d");return i.save(),i.scale(1,-1),i.drawImage(t,0,-t.height),i.restore(),e}},wdi.CollisionDetector={thereIsBoxCollision:function(t,e){return!(t.bottom<e.top)&&(!(t.top>e.bottom)&&(!(t.right<e.left)&&t.left<e.right))}},wdi.GlobalPool={pools:{},retained:null,init:function(){this.retained={};var i=this;this.pools.ViewQueue=new wdi.GenericObjectPool([function(){return new wdi.ViewQueue},function(t,e){t.poolIndex=e,t.setData([])}]),this.pools.RawSpiceMessage=new wdi.GenericObjectPool([function(){return new wdi.RawSpiceMessage},function(t,e){t.poolIndex=e,t.set(null,null,null)}]),this.retained.Image=[],this.pools.Image=new wdi.GenericObjectPool([function(){return new Image},function(t,e){t.poolIndex=e,t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.onload=null,t.keepAlive=!1,i.retained.Image[e]=t}]),this.retained.Canvas=[],this.pools.Canvas=new wdi.GenericObjectPool([function(){return i.createCanvas()},function(t,e){t.keepAlive=!1,t.poolIndex=e,i.retained.Canvas[e]=t}])},createCanvas:function(){return $("<canvas/>")[0]},create:function(t){return this.pools[t].create()},discard:function(t,e){return this.retained.hasOwnProperty(t)&&delete this.retained[t][e.poolIndex],this.pools[t].discard(e.poolIndex)},cleanPool:function(t){if(this.retained.hasOwnProperty(t)){var e=this.pools[t];for(var i in this.retained[t])e.discard(this.retained[t][i].poolIndex)&&delete this.retained[t][i]}else wdi.Debug.error("GlobalPool: cleanPool called with invalid objectType: ",t)}},wdi.GenericObjectPool=$.spcExtend(wdi.EventObject.prototype,{expandFactor:.2,expandMinUnits:16,elems:null,freeElems:null,allocator:null,resetor:null,init:function(t){var e=t[0],i=t[1];this.allocator=e,this.resetor=i,this.elems=[this.allocator()],this.freeElems=[0]},create:function(){this.freeElems.length||this.expand();var t=this.freeElems.pop(),e=this.elems[t];return this.resetor(e,t),e},length:function(){return this.elems.length-this.freeElems.length},expand:function(){var t=this.elems.length,e=Math.ceil(this.elems.length*this.expandFactor);e<this.expandMinUnits&&(e=this.expandMinUnits),this.elems.length=this.elems.length+e;for(var i=t;i<this.elems.length;i++)this.elems[i]=this.allocator(),this.freeElems.push(i)},discard:function(t){if(0<=this.freeElems.indexOf(t))throw"GeneircObjectPool: Double-free for element index: "+t;return!this.elems[t].keepAlive&&(this.freeElems.push(t),!0)},get:function(t){return this.elems[t]}}),wdi.AsyncConsumer=$.spcExtend(wdi.EventObject.prototype,{worker:null,task:null,packetWorkerIdentifier:null,imageProperties:null,init:function(t){this.superInit(),this.worker=t.AsyncWorker||new wdi.AsyncWorker({script:"assets/js/WorkerProcess.min.js"}),this.packetWorkerIdentifier=t.packetWorkerIdentifier||new wdi.PacketWorkerIdentifier},consume:function(t){var e,i,n,r,s,o,a,c=(this.task=t).message,h=this.packetWorkerIdentifier.shouldUseWorker(c);if(h==wdi.PacketWorkerIdentifier.processingType.DECOMPRESS&&(e=this.packetWorkerIdentifier.getImageProperties(c),(this.imageProperties=e)&&e.descriptor.type!=wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_RGB&&e.descriptor.type!=wdi.SpiceImageType.SPICE_IMAGE_TYPE_QUIC?h=0:e||(h=0)),0!==h)if(h==wdi.PacketWorkerIdentifier.processingType.DECOMPRESS){if(i=e.data,n=e.descriptor,r=e.opaque,s=e.brush,n.type===wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_RGB){var u=null;if(s)u=wdi.LZSS.demarshall_rgb(i);else{var l=i.subarray(0,32).toJSArray();i=i.subarray(32),u=wdi.LZSS.demarshall_rgb(l)}o=new ArrayBuffer(i.length+16),(a=new Uint8Array(o))[0]=1,a[1]=r,a[2]=u.type,a[3]=u.top_down;for(var p=u.width*u.height*4,d=0;d<4;d++)a[4+d]=255&p,p>>=8;(f=new DataView(o)).setUint32(8,u.width),f.setUint32(12,u.height),a.set(i,16),this.worker.run(o,this._workerCompleted,{type:"lz",top_down:u.top_down,opaque:r},this)}else if(n.type===wdi.SpiceImageType.SPICE_IMAGE_TYPE_QUIC){var f,g=new ArrayBuffer(i.length+4);(f=new Uint8Array(g)).set(i,4),f[1]=r?1:0,f[0]=0,this.worker.run(g,this._workerCompleted,{type:"quic"},this)}}else h==wdi.PacketWorkerIdentifier.processingType.PROCESSVIDEO&&(i=this.packetWorkerIdentifier.getVideoData(c),o=new ArrayBuffer(i.length+4),(a=new Uint8Array(o))[0]=2,a[1]=0,a[2]=0,a[3]=0,a.set(i,4),this.worker.run(o,function(t,e){c.args.data=t,this.taskDone()},null,this));else this.taskDone()},_workerCompleted:function(t,e){if(t){var i=this.imageProperties.descriptor,n=new Uint8ClampedArray(t),r=new ImageData(n,i.width,i.height),s=r;if("lz"===e.type){var o=e.top_down,a=e.opaque;o||a||(s=wdi.graphics.getImageFromData(r,!0),s=wdi.RasterOperation.flip(s))}i.originalType=i.type,i.type=wdi.SpiceImageType.SPICE_IMAGE_TYPE_CANVAS,this.task.message.messageType===wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_FILL?(this.task.message.args.brush.pattern.imageData=s,this.task.message.args.brush.pattern.image.type=wdi.SpiceImageType.SPICE_IMAGE_TYPE_CANVAS):this.task.message.args.image.data=s,this.taskDone()}else this.taskDone()},taskDone:function(){this.task.state=1,this.fire("done",this)},dispose:function(){this.worker.dispose()}}),wdi.AsyncWorker=$.spcExtend(wdi.EventObject.prototype,{worker:null,fn:null,scope:null,params:null,init:function(t){this.superInit(),this.worker=new Worker(t.script);var e=this;this.worker.addEventListener("message",function(t){e.fn.call(e.scope,t.data,e.params)})},run:function(t,e,i,n){this.fn=e,this.scope=n,this.params=i,wdi.postMessageW3CCompilant?this.worker.postMessage(t,[t]):this.worker.postMessage(t)},dispose:function(){this.worker.terminate()}}),wdi.PacketWorkerIdentifier=$.spcExtend(wdi.EventObject.prototype,{init:function(t){},shouldUseWorker:function(t){switch(t.messageType){case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_COPY:return wdi.PacketWorkerIdentifier.processingType.DECOMPRESS;case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_FILL:if(t.args.brush.type===wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN)return wdi.PacketWorkerIdentifier.processingType.DECOMPRESS;break;case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND:case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLEND:case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TRANSPARENT:return wdi.PacketWorkerIdentifier.processingType.DECOMPRESS}return 0},getImageProperties:function(t){var e={data:null,descriptor:null,opaque:!0,brush:null};switch(t.messageType){case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_COPY:e.descriptor=t.args.image.imageDescriptor,e.data=t.args.image.data;break;case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_FILL:if(e.brush=t.args.brush,e.brush.type!==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN)return!1;e.descriptor=e.brush.pattern.image,e.data=e.brush.pattern.imageData;break;case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND:case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLEND:case wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TRANSPARENT:e.data=t.args.image.data,e.descriptor=t.args.image.imageDescriptor,e.opaque=!1;break;default:return wdi.Debug.log("PacketWorkerIdentifier: Unknown Packet in getImageProperties"),!1}return e},getVideoData:function(t){return t.messageType!==wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_DATA?(wdi.Debug.log("PacketWOrkerIdentifier: Invalid packet in getVideoData"),!1):t.args.data}}),wdi.PacketWorkerIdentifier.processingType={},wdi.PacketWorkerIdentifier.processingType.DECOMPRESS=1,wdi.PacketWorkerIdentifier.processingType.PROCESSVIDEO=2,wdi.SpiceObject={properties:{},bytesToString:function(t,e){for(var i="",n=e||t.length,r=0;r<n;r++)i+=String.fromCharCode(t.shift());return i},bytesToURI:function(t){var e=new Blob([t],{type:"image/jpeg"});return URL.createObjectURL(e)},bytesToStringBE:function(t,e){for(var i="",n=e||t.length;0<=n;n--)i+=String.fromCharCode(t[n]);return i},bytesToInt8:function(t){return t.shift()},bytesToInt8NoAllocate:function(t){var e=t.getByte(0);return t.eatBytes(1),e},bytesToInt16:function(t){var e=t.shift();return t.shift()*Math.pow(16,2)+e},bytesToInt16BE:function(t){var e=t.shift(),i=t.shift();return e*Math.pow(16,2)+i},bytesToInt32:function(t){var e=wdi.SpiceObject.bytesToInt16(t);return wdi.SpiceObject.bytesToInt16(t)*Math.pow(16,4)+e},bytesToInt16NoAllocate:function(t){var e=t.getByte(0),i=t.getByte(1);return t.eatBytes(2),i*Math.pow(16,2)+e},bytesToInt32NoAllocate:function(t){var e=wdi.SpiceObject.bytesToInt16NoAllocate(t);return wdi.SpiceObject.bytesToInt16NoAllocate(t)*Math.pow(16,4)+e},bytesToInt32BE:function(t){var e=wdi.SpiceObject.bytesToInt16BE(t),i=wdi.SpiceObject.bytesToInt16BE(t);return e*Math.pow(16,4)+i},bytesToInt64:function(t){var e=wdi.SpiceObject.bytesToInt32(t).toString(2).lpad("0",32),i=wdi.SpiceObject.bytesToInt32(t).toString(2).lpad("0",32);return BigInteger.parse(i+e,2)},bytesToInt64NoAllocate:function(t){var e=wdi.SpiceObject.bytesToInt32NoAllocate(t).toString(2).lpad("0",32),i=wdi.SpiceObject.bytesToInt32NoAllocate(t).toString(2).lpad("0",32);return BigInteger.parse(i+e,2)},bytesToInt64BE:function(t){var e=wdi.SpiceObject.bytesToInt32BE(t).toString(2).lpad("0",32),i=wdi.SpiceObject.bytesToInt32BE(t).toString(2).lpad("0",32);return BigInteger.parse(e+i,2)},bytesToArray:function(t,e,i,n){var r=t.length,s=i||r,o=n||"LE",a=[],c=null;switch(e){case 8:c=wdi.SpiceObject.bytesToInt8;break;case 16:c="LE"==o?wdi.SpiceObject.bytesToInt16:wdi.SpiceObject.bytesToInt16BE;break;case 32:c="LE"==o?wdi.SpiceObject.bytesToInt32:wdi.SpiceObject.bytesToInt32BE;break;case 64:c="LE"==o?wdi.SpiceObject.bytesToInt64:wdi.SpiceObject.bytesToInt64BE;break;default:throw new Exception("Not supported number of bits",1)}for(var h=0;h<s;h++)a=a.concat(c(t));return a},int32ToDouble:function(t){return(15&t)/15+wdi.SpiceObject.unsignedToSigned(t>>4)},unsignedToSigned:function(t,e){var i=Math.pow(2,e)-1;return t&Math.pow(2,e-1)&&(t=-1*(i-t)),t},arrayToBytes:function(t,e,i){var n=t.length,r=i||n,s=null,o=[];switch(e){case 8:s=wdi.SpiceObject.numberTo8;break;case 16:s=wdi.SpiceObject.numberTo16;break;case 32:s=wdi.SpiceObject.numberTo32;break;case 64:s=wdi.SpiceObject.numberTo64;break;default:throw new Exception("Not supported number of bits",1)}for(var a=0;a<r;a++)a<=n?o=o.concat(s(t[a])):o.push(0);return o},stringToBytes:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i.push(t.charCodeAt(n));return i},stringHexToBytes:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(parseInt(t[n]+t[n+1],16));return i},stringBinaryToBytes:function(t,e){t=t.lpad("0",e);for(var i=[],n=e;8<=n;n-=8)i=i.concat(parseInt(t.substr(n-8,8),2));return i},stringToBytesPadding:function(t,e){for(var i=[],n=t.length,r=0;r<e;r++)n-1<e?i.push(0):i.push(t.charCodeAt(r));return i},numberTo64:function(t){var e=this.numberTo32((0x10000000000000000&t)>>32);return this.numberTo32(4294967295&t).concat(e)},numberTo32:function(t){for(var e=new Array(3),i=0;i<4;i++)e[i]=255&t,t>>=8;return e},numberTo16:function(t){for(var e=new Array(1),i=0;i<2;i++)e[i]=255&t,t>>=8;return e},numberTo8:function(t){return[255&t]},getMessageProperties:function(){return this.properties},getMessageProperty:function(t,e){return this.properties.hasOwnProperty(t)?this.properties[t]:e}},wdi.SpiceDataHeader=$.spcExtend(wdi.SpiceObject,{objectSize:6,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type,this.size=t.size},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo16(this.type),this.numberTo32(this.size)),this.rawData},demarshall:function(t){return this.type=this.bytesToInt16NoAllocate(t),this.size=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceLinkAuthMechanism=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.auth_mechanism=t.auth_mechanism},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.auth_mechanism)),this.rawData},demarshall:function(t){if(this.expectedSize=arguments[1]||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.auth_mechanism=this.bytesToInt32NoAllocate(t),"customDemarshall"in this&&this.customDemarshall(t),this}}),wdi.SpiceLinkReply=$.spcExtend(wdi.SpiceObject,{objectSize:178,init:function(t){t&&this.setContent(t)},setContent:function(t){this.error=t.error,this.pub_key=t.pub_key,this.num_common_caps=t.num_common_caps,this.num_channel_caps=t.num_channel_caps,this.caps_offset=t.caps_offset},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.error),this.arrayToBytes(this.pub_key,8),this.numberTo32(this.num_common_caps),this.numberTo32(this.num_channel_caps),this.numberTo32(this.caps_offset)),this.rawData},demarshall:function(t){if(this.expectedSize=arguments[1]||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.error=this.bytesToInt32NoAllocate(t),this.pub_key=this.bytesToArray(t.shift(this.expectedSize),8),this.num_common_caps=this.bytesToInt32NoAllocate(t),this.num_channel_caps=this.bytesToInt32NoAllocate(t),this.caps_offset=this.bytesToInt32NoAllocate(t),"customDemarshall"in this&&this.customDemarshall(t),this}}),wdi.SpiceLinkEncryptedTicket=$.spcExtend(wdi.SpiceObject,{objectSize:128,init:function(t){t&&this.setContent(t)},setContent:function(t){this.encrypted_data=t.encrypted_data},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.stringToBytes(this.encrypted_data,8)),this.rawData},demarshall:function(t){if(this.expectedSize=arguments[1]||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.encrypted_data=this.bytesToArray(t.shift(this.expectedSize),8),"customDemarshall"in this&&this.customDemarshall(t),this}}),wdi.SpiceLinkMess=$.spcExtend(wdi.SpiceObject,{objectSize:18,init:function(t){t&&this.setContent(t)},setContent:function(t){this.connection_id=t.connection_id,this.channel_type=t.channel_type,this.channel_id=t.channel_id,this.num_common_caps=t.num_common_caps,this.num_channel_caps=t.num_channel_caps,this.caps_offset=t.caps_offset,this.common_caps=t.common_caps,this.channel_caps=t.channel_caps},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.connection_id),this.numberTo8(this.channel_type),this.numberTo8(this.channel_id),this.numberTo32(this.num_common_caps),this.numberTo32(this.num_channel_caps),this.numberTo32(this.caps_offset)),0<this.num_common_caps&&(this.rawData=this.rawData.concat(this.numberTo32(this.common_caps))),0<this.num_channel_caps&&(this.rawData=this.rawData.concat(this.numberTo32(this.channel_caps))),this.rawData},demarshall:function(t){if(this.expectedSize=arguments[1]||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.connection_id=this.bytesToInt32NoAllocate(t),this.channel_type=this.bytesToInt8NoAllocate(t),this.channel_id=this.bytesToInt8NoAllocate(t),this.num_common_caps=this.bytesToInt32NoAllocate(t),this.num_channel_caps=this.bytesToInt32NoAllocate(t),this.caps_offset=this.bytesToInt32NoAllocate(t),"customDemarshall"in this&&this.customDemarshall(t),this}}),wdi.SpiceLinkHeader=$.spcExtend(wdi.SpiceObject,{objectSize:16,init:function(t){t&&this.setContent(t)},setContent:function(t){this.magic=t.magic,this.major_version=t.major_version,this.minor_version=t.minor_version,this.size=t.size},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.magic),this.numberTo32(this.major_version),this.numberTo32(this.minor_version),this.numberTo32(this.size)),this.rawData},demarshall:function(t){if(this.expectedSize=arguments[1]||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.magic=this.bytesToInt32NoAllocate(t),this.major_version=this.bytesToInt32NoAllocate(t),this.minor_version=this.bytesToInt32NoAllocate(t),this.size=this.bytesToInt32NoAllocate(t),"customDemarshall"in this&&this.customDemarshall(t),this}}),wdi.RedMigrateData=$.spcExtend(wdi.SpiceObject,{objectSize:0,init:function(t){t&&this.setContent(t)},setContent:function(t){this.vector=t.vector},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.arrayToBytes(this.vector,8)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.vector=this.bytesToArray(t.shift(this.expectedSize),8),this}}),wdi.RedMainInit=$.spcExtend(wdi.SpiceObject,{objectSize:32,init:function(t){t&&this.setContent(t)},setContent:function(t){this.session_id=t.session_id,this.display_channels_hint=t.display_channels_hint,this.supported_mouse_modes=t.supported_mouse_modes,this.current_mouse_mode=t.current_mouse_mode,this.agent_connected=t.agent_connected,this.agent_tokens=t.agent_tokens,this.multi_media_time=t.multi_media_time,this.ram_hint=t.ram_hint},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.session_id),this.numberTo32(this.display_channels_hint),this.numberTo32(this.supported_mouse_modes),this.numberTo32(this.current_mouse_mode),this.numberTo32(this.agent_connected),this.numberTo32(this.agent_tokens),this.numberTo32(this.multi_media_time),this.numberTo32(this.ram_hint)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.session_id=this.bytesToInt32NoAllocate(t),this.display_channels_hint=this.bytesToInt32NoAllocate(t),this.supported_mouse_modes=this.bytesToInt32NoAllocate(t),this.current_mouse_mode=this.bytesToInt32NoAllocate(t),this.agent_connected=this.bytesToInt32NoAllocate(t),this.agent_tokens=this.bytesToInt32NoAllocate(t),this.multi_media_time=this.bytesToInt32NoAllocate(t),this.ram_hint=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceMsgMainAgentConnected=$.spcExtend(wdi.SpiceObject,{objectSize:0,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.SpiceChannelsList=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.num_of_channels=t.num_of_channels,this.channels=t.channels},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.num_of_channels),this.arrayToBytes(this.channels,16)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.num_of_channels=this.bytesToInt32NoAllocate(t),this.channels=this.bytesToArray(t.shift(this.expectedSize),16),this}}),wdi.RedSetAck=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.generation=t.generation,this.window=t.window},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.generation),this.numberTo32(this.window)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.generation=this.bytesToInt32NoAllocate(t),this.window=this.bytesToInt32NoAllocate(t),this}}),wdi.RedPing=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){this.id=t.id,this.time=t.time},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.id),this.numberTo64(this.time)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.id=this.bytesToInt32NoAllocate(t),this.time=this.bytesToInt64NoAllocate(t),12<this.expectedSize&&t.shift(this.expectedSize-12),this}}),wdi.RedMigrate=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.flags=t.flags},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.flags)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.flags=this.bytesToInt32NoAllocate(t),this}}),wdi.RedWaitForChannel=$.spcExtend(wdi.SpiceObject,{objectSize:10,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type,this.id=t.id,this.serial=t.serial},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo8(this.type),this.numberTo8(this.id),this.numberTo64(this.serial)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.type=this.bytesToInt8NoAllocate(t),this.id=this.bytesToInt8NoAllocate(t),this.serial=this.bytesToInt64NoAllocate(t),this}}),wdi.RedWaitForChannels=$.spcExtend(wdi.SpiceObject,{objectSize:1,init:function(t){t&&this.setContent(t)},setContent:function(t){this.wait_count=t.wait_count,this.wait_list=t.wait_list},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo8(this.wait_count),this.arrayToBytes(this.wait_list,8)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.wait_count=this.bytesToInt8NoAllocate(t),this.wait_list=this.bytesToArray(t.shift(this.expectedSize),8),this}}),wdi.RedDisconnect=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){this.time_stamp=t.time_stamp,this.reason=t.reason},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo64(this.time_stamp),this.numberTo32(this.reason)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.time_stamp=this.bytesToInt64NoAllocate(t),this.reason=this.bytesToInt32NoAllocate(t),this}}),wdi.RedMigrationBegin=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.port=t.port,this.sport=t.sport,this.host_name=t.host_name},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo16(this.port),this.numberTo16(this.sport),this.arrayToBytes(this.host_name,8)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.port=this.bytesToInt16NoAllocate(t),this.sport=this.bytesToInt16NoAllocate(t),this.host_name=this.bytesToArray(t.shift(this.expectedSize),8),this}}),wdi.RedNotify=$.spcExtend(wdi.SpiceObject,{objectSize:25,init:function(t){t&&this.setContent(t)},setContent:function(t){this.time_stamp=t.time_stamp,this.severity=t.severity,this.visibility=t.visibility,this.what=t.what,this.message_len=t.message_len,this.message=t.message,this.zero=t.zero},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo64(this.time_stamp),this.numberTo32(this.severity),this.numberTo32(this.visibility),this.numberTo32(this.what),this.numberTo32(this.message_len),this.arrayToBytes(this.message,8),this.numberTo8(this.zero)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.time_stamp=this.bytesToInt64NoAllocate(t),this.severity=this.bytesToInt32NoAllocate(t),this.visibility=this.bytesToInt32NoAllocate(t),this.what=this.bytesToInt32NoAllocate(t),this.message_len=this.bytesToInt32NoAllocate(t),this.message=this.bytesToString(t.shift(this.message_len)),this.zero=this.bytesToInt8NoAllocate(t),this}}),wdi.RedMode=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){this.width=t.width,this.height=t.height,this.depth=t.depth},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.width),this.numberTo32(this.height),this.numberTo32(this.depth)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.width=this.bytesToInt32NoAllocate(t),this.height=this.bytesToInt32NoAllocate(t),this.depth=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceCDisplayInit=$.spcExtend(wdi.SpiceObject,{objectSize:14,init:function(t){t&&this.setContent(t)},setContent:function(t){this.pixmap_cache_id=t.pixmap_cache_id,this.pixmap_cache_size=t.pixmap_cache_size,this.glz_dictionary_id=t.glz_dictionary_id,this.glz_dictionary_window_size=t.glz_dictionary_window_size},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo8(this.pixmap_cache_id),this.numberTo32(this.pixmap_cache_size),this.numberTo32(0),this.numberTo8(this.glz_dictionary_id),this.numberTo32(this.glz_dictionary_window_size)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.pixmap_cache_id=this.bytesToInt8NoAllocate(t),this.pixmap_cache_size=this.bytesToInt64NoAllocate(t),this.glz_dictionary_id=this.bytesToInt8NoAllocate(t),this.glz_dictionary_window_size=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceSurfaceDestroy=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.surface_id=t.surface_id},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.surface_id)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.surface_id=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceSurface=$.spcExtend(wdi.SpiceObject,{objectSize:20,init:function(t){t&&this.setContent(t)},setContent:function(t){this.surface_id=t.surface_id,this.width=t.width,this.height=t.height,this.format=t.format,this.flags=t.flags},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.surface_id),this.numberTo32(this.width),this.numberTo32(this.height),this.numberTo32(this.format),this.numberTo32(this.flags)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.surface_id=this.bytesToInt32NoAllocate(t),this.width=this.bytesToInt32NoAllocate(t),this.height=this.bytesToInt32NoAllocate(t),this.format=this.bytesToInt32NoAllocate(t),this.flags=this.bytesToInt32NoAllocate(t),this}}),wdi.SpicePath=$.spcExtend(wdi.SpiceObject,{objectSize:4,marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});var i=this.num_segments=this.bytesToInt32NoAllocate(t);this.segments=[];for(var n=0;n<i;n++)this.segments[n]=(new wdi.SpicePathSeg).demarshall(t);return this}}),wdi.SpicePathSeg=$.spcExtend(wdi.SpiceObject,{objectSize:8,marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});this.flags=this.bytesToInt8NoAllocate(t);var i=this.count=this.bytesToInt32NoAllocate(t);this.points=[];for(var n=0;n<i;n++)this.points[n]=(new wdi.SpicePointFix).demarshall(t);return this}}),wdi.SpicePoint=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.x=t.x,this.y=t.y},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.x),this.numberTo32(this.y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.x=this.unsignedToSigned(this.bytesToInt32(t.shift(4)),32),this.y=this.unsignedToSigned(this.bytesToInt32(t.shift(4)),32),this}}),wdi.SpicePoint16=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.x=t.x,this.y=t.y},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo16(this.x),this.numberTo16(this.y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.x=this.bytesToInt16NoAllocate(t),this.y=this.bytesToInt16NoAllocate(t),this}}),wdi.SpicePointFix=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.x=t.hasOwnProperty("x")?t.x:0,this.y=t.hasOwnProperty("y")?t.y:0},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.x),this.numberTo32(this.y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.x=this.int32ToDouble(this.bytesToInt32(t.shift(4)),32),this.y=this.int32ToDouble(this.bytesToInt32(t.shift(4)),32),this}}),wdi.SpiceRect=$.spcExtend(wdi.SpiceObject,{objectSize:16,init:function(t){t&&this.setContent(t)},setContent:function(t){this.top=t.top,this.left=t.left,this.bottom=t.bottom,this.right=t.right},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.top),this.numberTo32(this.left),this.numberTo32(this.bottom),this.numberTo32(this.right)),this.rawData},demarshall:function(t,e){return this.top=this.bytesToInt32NoAllocate(t),this.left=this.bytesToInt32NoAllocate(t),this.bottom=this.bytesToInt32NoAllocate(t),this.right=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceClipRects=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.num_rects=t.num_rects},marshall:function(){this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.num_rects));for(var t=0;t<this.num_rects;t++)this.rawData=this.rawData.concat(this.rects[t].marshall());return this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});if(this.num_rects=this.bytesToInt32NoAllocate(t),0<this.num_rects){this.rects=[];for(var i=0;i<this.num_rects;i++)this.rects[i]=(new wdi.SpiceRect).demarshall(t)}return this}}),wdi.SpiceClip=$.spcExtend(wdi.SpiceObject,{objectSize:1,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo8(this.type)),this.type==wdi.SpiceClipType.SPICE_CLIP_TYPE_RECTS&&(this.rawData=this.rawData.concat(this.rects.marshall())),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.type=this.bytesToInt8NoAllocate(t),this.type==wdi.SpiceClipType.SPICE_CLIP_TYPE_RECTS&&(this.rects=(new wdi.SpiceClipRects).demarshall(t)),this}}),wdi.SpiceDisplayBase=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.surface_id=t.surface_id},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.surface_id),this.box.marshall(),this.clip.marshall()),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.surface_id=this.bytesToInt32NoAllocate(t),this.box=(new wdi.SpiceRect).demarshall(t),this.clip=(new wdi.SpiceClip).demarshall(t),this}}),wdi.SpiceQMask=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.numberTo8(this.flags),this.pos.marshall(),this.numberTo32(this.offset)),this.offset&&(t=t.concat(this.image.marshall())),t},demarshall:function(t,e){t.eatBytes(13)}}),wdi.SpiceImageDescriptor=$.spcExtend(wdi.SpiceObject,{objectSize:18,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.numberTo64(this.id),this.numberTo8(this.type),this.numberTo8(this.flags),this.numberTo32(this.width),this.numberTo32(this.height))},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});var i=this.bytesToInt32NoAllocate(t);return this.id=i.toString(16)+this.bytesToInt32NoAllocate(t).toString(16),this.type=this.bytesToInt8NoAllocate(t),this.flags=this.bytesToInt8NoAllocate(t),this.width=this.bytesToInt32NoAllocate(t),this.height=this.bytesToInt32NoAllocate(t),this.offset=t.getPosition(),this}}),wdi.SpiceImage=$.spcExtend(wdi.SpiceObject,{objectSize:1,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.imageDescriptor.marshall(),this.data)},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.imageDescriptor=(new wdi.SpiceImageDescriptor).demarshall(t),this.data=t.getRawData(),this}}),wdi.SpiceDrawCopy=$.spcExtend(wdi.SpiceObject,{objectSize:4,properties:{overWriteScreenArea:!0},init:function(t){t&&this.setContent(t)},setContent:function(t){this.offset=t.offset},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.base.marshall(),this.numberTo32(this.offset),this.src_area.marshall(),this.numberTo16(this.rop_descriptor),this.numberTo8(this.scale_mode),this.mask.marshall(),this.image.marshall()),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});if(this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.src_area=(new wdi.SpiceRect).demarshall(t),this.rop_descriptor=this.bytesToInt16NoAllocate(t),this.scale_mode=this.bytesToInt8NoAllocate(t),this.mask=(new wdi.SpiceQMask).demarshall(t),t.getPosition()==this.offset)this.image=(new wdi.SpiceImage).demarshall(t);else{var i=new wdi.ViewQueue;i.setData(t.getDataOffset(this.offset)),this.image=(new wdi.SpiceImage).demarshall(i)}return this}}),wdi.drawBlend=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.base=t.base,this.alpha_flags=t.alpha_flags,this.alpha=t.alpha,this.offset=t.offset,this.src_area=t.src_area},marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.numberTo32(this.offset),this.src_area.marshall(),this.numberTo16(this.rop_descriptor),this.numberTo8(this.flags),this.mask.marshall(),this.image.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.src_area=(new wdi.SpiceRect).demarshall(t),this.rop_descriptor=this.bytesToInt16NoAllocate(t),this.flags=this.bytesToInt8NoAllocate(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this.image=(new wdi.SpiceImage).demarshall(t),this}}),wdi.drawAlphaBlend=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.base=t.base,this.alpha_flags=t.alpha_flags,this.alpha=t.alpha,this.offset=t.offset,this.src_area=t.src_area},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.alpha_flags=this.bytesToInt8NoAllocate(t),this.alpha=this.bytesToInt8NoAllocate(t),this.offset=this.bytesToInt32NoAllocate(t),this.src_area=(new wdi.SpiceRect).demarshall(t),this.image=(new wdi.SpiceImage).demarshall(t),this}}),wdi.drawTransparent=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.src_area=(new wdi.SpiceRect).demarshall(t),this.transparent_color=(new wdi.SpiceColor).demarshall(t),this.transparent_true_color=(new wdi.SpiceColor).demarshall(t),this.image=(new wdi.SpiceImage).demarshall(t),this}}),wdi.SpiceCopyBits=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.offset=t.offset},marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.src_position.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.src_position=(new wdi.SpicePoint).demarshall(t),this}}),wdi.SpiceImageLZRGB=$.spcExtend(wdi.SpiceObject,{objectSize:32,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.length=this.bytesToInt32BE(t.shift(4)),this.magic=this.bytesToStringBE(t.shift(4)),this.version=this.bytesToInt32BE(t.shift(4)),this.type=this.bytesToInt32BE(t.shift(4)),this.width=this.bytesToInt32BE(t.shift(4)),this.height=this.bytesToInt32BE(t.shift(4)),this.stride=this.bytesToInt32BE(t.shift(4)),this.top_down=this.bytesToInt32BE(t.shift(4)),this.data=t.shift(this.length),this}}),wdi.SpiceMouseModeRequest=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.request_mode=t.request_mode},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.request_mode)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.request_mode=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceMouseMode=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.supported_modes=t.supported_modes,this.current_mode=t.current_mode},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.supported_modes),this.numberTo32(this.current_mode)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,!(t.getLength()<this.expectedSize))return this.supported_modes=this.bytesToInt16NoAllocate(t),this.current_mode=this.bytesToInt16NoAllocate(t),this}}),wdi.RedcMousePress=$.spcExtend(wdi.SpiceObject,{objectSize:3,init:function(t){t&&this.setContent(t)},setContent:function(t){this.button_id=t.button_id,this.buttons_state=t.buttons_state},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo8(this.button_id),this.numberTo16(this.buttons_state)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.button_id=this.bytesToInt8NoAllocate(t),this.buttons_state=this.bytesToInt16NoAllocate(t),this}}),wdi.RedcMousePosition=$.spcExtend(wdi.SpiceObject,{objectSize:11,init:function(t){t&&this.setContent(t)},setContent:function(t){this.x=t.x,this.y=t.y,this.buttons_state=t.buttons_state,this.display_id=t.display_id},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.x),this.numberTo32(this.y),this.numberTo16(this.buttons_state),this.numberTo8(this.display_id)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.x=this.bytesToInt32NoAllocate(t),this.y=this.bytesToInt32NoAllocate(t),this.buttons_state=this.bytesToInt16NoAllocate(t),this.display_id=this.bytesToInt8NoAllocate(t),this}}),wdi.RedcMouseMotion=$.spcExtend(wdi.SpiceObject,{objectSize:10,init:function(t){t&&this.setContent(t)},setContent:function(t){this.x=t.x,this.y=t.y,this.buttons_state=t.buttons_state},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.x),this.numberTo32(this.y),this.numberTo16(this.buttons_state)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.x=this.bytesToInt32NoAllocate(t),this.y=this.bytesToInt32NoAllocate(t),this.buttons_state=this.bytesToInt16NoAllocate(t),this}}),wdi.SpiceBrush=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type,this.color=t.color},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.type=this.bytesToInt8NoAllocate(t),this.type==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN?this.pattern=(new wdi.SpicePattern).demarshall(t):this.type==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_SOLID&&(this.color=(new wdi.SpiceColor).demarshall(t)),this}}),wdi.SpiceColor=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){return[this.r,this.g,this.b]},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});this.data=16777215&this.bytesToInt32(t.shift(4)),this.r=this.data>>16,this.g=this.data>>8&255,this.b=255&this.data,this.html_color="rgb("+this.r+", "+this.g+", "+this.b+")";var i=this.r.toString(16),n=this.g.toString(16),r=this.b.toString(16);return i.length<2&&(i="0"+i),n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),this.simple_html_color="#"+i+n+r,this}}),wdi.RgbaColor=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.data=4294967295&this.bytesToInt32(t.shift(4)),this.a=this.data>>>24,this.r=this.data>>>16&255,this.g=this.data>>>8&255,this.b=255&this.data,this.html_color="rgb("+this.r+", "+this.g+", "+this.b+")",this}}),wdi.SpicePattern=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});this.offset=this.bytesToInt32NoAllocate(t),this.point=(new wdi.SpicePoint).demarshall(t);var i=new wdi.ViewQueue;return i.setData(t.getDataOffset(this.offset)),this.image=(new wdi.SpiceImage).demarshall(i),this}}),wdi.SpiceDrawFill=$.spcExtend(wdi.SpiceObject,{objectSize:4,properties:{overWriteScreenArea:!0},init:function(t){t&&this.setContent(t)},setContent:function(t){this.offset=t.offset},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.offset)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.brush=(new wdi.SpiceBrush).demarshall(t),this.rop_descriptor=this.bytesToInt16NoAllocate(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this.brush.type==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN&&(this.brush.pattern.image=(new wdi.SpiceImageDescriptor).demarshall(t),this.brush.pattern.imageData=t.getData()),this}}),wdi.SpiceDrawRop3=$.spcExtend(wdi.SpiceObject,{objectSize:4,marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.numberTo32(this.offset),this.src_area.marshall(),this.brush.marshall(),this.numberTo8(this.rop_descriptor),this.numberTo8(this.scale_mode),this.mask.marshall(),this.src_image.marshall()),this.brush.type==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN&&(t=t.concat(this.brush.pattern.image.marshall(),this.brush.pattern.imageData)),t},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.src_area=(new wdi.SpiceRect).demarshall(t),this.brush=(new wdi.SpiceBrush).demarshall(t),this.rop_descriptor=this.bytesToInt8NoAllocate(t),this.scale_mode=this.bytesToInt8NoAllocate(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this.src_image=(new wdi.SpiceImage).demarshall(t),this.brush.type==wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN&&(this.brush.pattern.image=(new wdi.SpiceImageDescriptor).demarshall(t),this.brush.pattern.imageData=t.getData()),this}}),wdi.SpiceDrawBlackness=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.offset=t.offset},marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.mask.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this}}),wdi.SpiceDrawWhiteness=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.offset=t.offset},marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.mask.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this}}),wdi.SpiceScanCode=$.spcExtend(wdi.SpiceObject,{objectSize:1,init:function(t){t&&this.setContent(t)},setContent:function(t){this.code=t||0,this.zero=0},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.arrayToBytes(this.code,8),this.numberTo8(this.zero)),this.rawData},demarshall:function(t,e){return this},getCode:function(){return this.code}}),wdi.RedCursorInit=$.spcExtend(wdi.SpiceObject,{objectSize:9,marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.position=(new wdi.SpicePoint16).demarshall(t),this.trail_length=this.bytesToInt16NoAllocate(t),this.trail_frequency=this.bytesToInt16NoAllocate(t),this.visible=this.bytesToInt8NoAllocate(t),this.cursor=(new wdi.RedCursor).demarshall(t),this}}),wdi.RedCursor=$.spcExtend(wdi.SpiceObject,{objectSize:2,marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo16(this.flags)),1&this.flags||(this.rawData=this.rawData.concat(this.header.marshall(),this.data)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.flags=this.bytesToInt16NoAllocate(t),this.header=null,this.data=null,1&this.flags||(this.header=(new wdi.RedCursorHeader).demarshall(t),this.data=t.getData()),this}}),wdi.RedCursorHeader=$.spcExtend(wdi.SpiceObject,{objectSize:17,marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo64(this.unique),this.numberTo8(this.type),this.numberTo16(this.width),this.numberTo16(this.height),this.numberTo16(this.hot_spot_x),this.numberTo16(this.hot_spot_y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.unique=this.bytesToInt64NoAllocate(t),this.type=this.bytesToInt8NoAllocate(t),this.width=this.bytesToInt16NoAllocate(t),this.height=this.bytesToInt16NoAllocate(t),this.hot_spot_x=this.bytesToInt16NoAllocate(t),this.hot_spot_y=this.bytesToInt16NoAllocate(t),this}}),wdi.RedCursorSet=$.spcExtend(wdi.SpiceObject,{objectSize:5,marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.position.marshall(),this.numberTo8(this.visible),this.cursor.marshall()),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.position=(new wdi.SpicePoint16).demarshall(t),this.visible=this.bytesToInt8NoAllocate(t),this.cursor=(new wdi.RedCursor).demarshall(t),this}}),wdi.RasterGlyph=$.spcExtend(wdi.SpiceObject,{objectSize:20,marshall:function(){},demarshall:function(t,e,i){for(var n=1==e?1:2*e,r=[],s=0;s<i;s++)r[s]={},r[s].render_pos=(new wdi.SpicePoint).demarshall(t),r[s].glyph_origin=(new wdi.SpicePoint).demarshall(t),r[s].width=this.bytesToInt16NoAllocate(t),r[s].height=this.bytesToInt16NoAllocate(t),r[s].data=t.shift(r[s].height*Math.ceil(r[s].width*n/8));return r}}),wdi.GlyphString=$.spcExtend(wdi.SpiceObject,{objectSize:3,marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.len=this.bytesToInt16NoAllocate(t),this.flags=this.bytesToInt8NoAllocate(t),this.raster_glyph=(new wdi.RasterGlyph).demarshall(t,this.flags,this.len),this}}),wdi.SpiceDrawText=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.back_area=(new wdi.SpiceRect).demarshall(t),this.fore_brush=(new wdi.SpiceBrush).demarshall(t),this.back_brush=(new wdi.SpiceBrush).demarshall(t),this.fore_mode=this.bytesToInt16NoAllocate(t),this.back_mode=this.bytesToInt16NoAllocate(t),this.glyph_string=(new wdi.GlyphString).demarshall(t),this}}),wdi.SpiceLineAttr=$.spcExtend(wdi.SpiceObject,{objectSize:8,marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.flags=this.bytesToInt8NoAllocate(t),this.flags&&(this.style_nseg=this.bytesToInt8NoAllocate(t),this.style=this.int32ToDouble(this.bytesToInt32(t.shift(4)))),this}}),wdi.SpiceStroke=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.offset=this.bytesToInt32NoAllocate(t),this.attr=(new wdi.SpiceLineAttr).demarshall(t),this.brush=(new wdi.SpiceBrush).demarshall(t),this.fore_mode=this.bytesToInt16NoAllocate(t),this.back_mode=this.bytesToInt16NoAllocate(t),this.path=(new wdi.SpicePath).demarshall(t),this}}),wdi.SpiceDrawInvers=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.base.marshall(),this.mask.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.base=(new wdi.SpiceDisplayBase).demarshall(t),this.mask=(new wdi.SpiceQMask).demarshall(t),this}}),wdi.SpiceStreamCreate=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t.concat(this.numberTo32(this.surface_id),this.numberTo32(this.id),this.numberTo8(this.flags),this.numberTo8(this.codec),this.numberTo64(this.stamp),this.numberTo32(this.stream_width),this.numberTo32(this.stream_height),this.numberTo32(this.src_width),this.numberTo32(this.src_height),this.rect.marshall(),this.clip.marshall()),t},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.surface_id=this.bytesToInt32NoAllocate(t),this.id=this.bytesToInt32NoAllocate(t),this.flags=this.bytesToInt8NoAllocate(t),this.codec=this.bytesToInt8NoAllocate(t),this.stamp=this.bytesToInt64NoAllocate(t),this.stream_width=this.bytesToInt32NoAllocate(t),this.stream_height=this.bytesToInt32NoAllocate(t),this.src_width=this.bytesToInt32NoAllocate(t),this.src_height=this.bytesToInt32NoAllocate(t),this.rect=(new wdi.SpiceRect).demarshall(t),this.clip=(new wdi.SpiceClip).demarshall(t),this}}),wdi.SpiceStreamDestroy=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.numberTo32(this.surface_id),this.numberTo32(this.id))},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.surface_id=this.bytesToInt32NoAllocate(t),this.id=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceStreamData=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.numberTo32(this.id),this.numberTo32(this.multi_media_type),this.numberTo32(this.data_size),this.data)},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.id=this.bytesToInt32NoAllocate(t),this.multi_media_type=this.bytesToInt32NoAllocate(t),this.data_size=this.bytesToInt32NoAllocate(t),this.data=t.getRawData(),this}}),wdi.SpiceStreamClip=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){var t=[];return t=t.concat(this.numberTo32(this.id),this.clip.marshall())},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.id=this.bytesToInt32NoAllocate(t),this.clip=(new wdi.SpiceClip).demarshall(t),this}}),wdi.SpiceResourceList=$.spcExtend(wdi.SpiceObject,{objectSize:2,init:function(t){t&&this.setContent(t)},setContent:function(t){},marshall:function(){for(var t=[],e=0;e<this.num_items;e++)t=t.concat(this.numberTo8(this.items[e].type),this.numberTo64(this.items[e].id));return t},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});this.num_items=this.bytesToInt16NoAllocate(t),this.items=[];for(var i=0;i<this.num_items;i++)this.items[i]={type:this.bytesToInt8(t.shift(1)),id:this.bytesToInt64(t.shift(8))};return this}}),wdi.SpiceMsgMainAgentTokens=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.num_tokens=t.num_tokens},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.num_tokens)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.num_tokens=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceMsgMainAgentDisconnected=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.error=t.error},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.error)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.error=this.bytesToInt32NoAllocate(t),this}}),wdi.SpiceMsgMainAgentData=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.agentMessage=t.agentMessage},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.agentMessage.marshall()),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.agentMessage=(new wdi.VDAgentMessage).demarshall(t),this}}),wdi.VDIChunkHeader=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.port=t.port,this.size=t.size,this.packet=t.packet},marshall:function(){this.rawData=[];var t=this.packet.marshall();return this.rawData=this.rawData.concat(this.numberTo32(this.port),this.numberTo32(t.length),t),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentMessage=$.spcExtend(wdi.SpiceObject,{objectSize:20,init:function(t){t&&this.setContent(t)},setContent:function(t){this.protocol=t.protocol,this.type=t.type,this.opaque=t.opaque,this.size=t.size,this.data=t.data},marshall:function(){this.rawData=[];var t=this.data.marshall();return this.rawData=this.rawData.concat(this.numberTo32(this.protocol),this.numberTo32(this.type),this.numberTo64(this.opaque),this.numberTo32(t.length),t),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});if(this.protocol=this.bytesToInt32NoAllocate(t),this.type=this.bytesToInt32NoAllocate(t),this.opaque=this.bytesToInt64NoAllocate(t),this.size=this.bytesToInt32NoAllocate(t),this.type==wdi.AgentMessageTypes.VD_AGENT_GET_WINDOWS_LIST){var i=this.bytesToString(t.shift(t.length));this.window_list="change"==i?i:jQuery.parseJSON(i)}else this.type==wdi.AgentMessageTypes.VD_AGENT_ANNOUNCE_CAPABILITIES?this.caps=(new wdi.VDAgentAnnounceCapabilities).demarshall(t):this.type==wdi.AgentMessageTypes.VD_AGENT_CLIPBOARD_GRAB?0==t.getLength()?this.clipboardType=wdi.ClipBoardTypes.VD_AGENT_CLIPBOARD_NONE:this.clipboardType=this.bytesToInt32NoAllocate(t):this.type==wdi.AgentMessageTypes.VD_AGENT_CLIPBOARD&&(this.clipboardType=this.bytesToInt32NoAllocate(t),this.clipboardData=this.bytesToString(t.shift(t.length)));return this}}),wdi.VDAgentHwndWindow=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.hwnd=t.hwnd},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.hwnd)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentMoveWindow=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){this.hwnd=t.hwnd,this.x=t.x,this.y=t.y},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.hwnd),this.numberTo32(this.x),this.numberTo32(this.y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentResizeWindow=$.spcExtend(wdi.SpiceObject,{objectSize:12,init:function(t){t&&this.setContent(t)},setContent:function(t){this.hwnd=t.hwnd,this.width=t.width,this.height=t.height},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.hwnd),this.numberTo32(this.width),this.numberTo32(this.height)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentMonitorsConfig=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.num_of_monitors=t.num_of_monitors,this.flags=t.flags,this.data=t.data},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.num_of_monitors),this.numberTo32(this.flags),this.data.marshall()),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentMonConfig=$.spcExtend(wdi.SpiceObject,{objectSize:20,init:function(t){t&&this.setContent(t)},setContent:function(t){this.height=t.height,this.width=t.width,this.depth=t.depth,this.x=t.x,this.y=t.y},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.height),this.numberTo32(this.width),this.numberTo32(this.depth),this.numberTo32(this.x),this.numberTo32(this.y)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentAnnounceCapabilities=$.spcExtend(wdi.SpiceObject,{objectSize:8,init:function(t){t&&this.setContent(t)},setContent:function(t){this.request=t.request,this.caps=t.caps},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.request),this.numberTo32(this.caps)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.request=this.bytesToInt32NoAllocate(t),this.caps=this.bytesToInt32NoAllocate(t),this}}),wdi.VDAgentExecuteCommand=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.size=t.size,this.data=t.data},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.size),this.stringToBytes(this.data)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.VDAgentClipboardRequest=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.type)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.type=this.bytesToInt32NoAllocate(t),this}}),wdi.VDAgentClipboardGrab=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.types=t.types},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.types)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.types=this.bytesToInt32NoAllocate(t),this}}),wdi.VDAgentClipboard=$.spcExtend(wdi.SpiceObject,{objectSize:6,init:function(t){t&&this.setContent(t)},setContent:function(t){this.type=t.type,this.data=t.data},marshall:function(){return this.rawData=[],this.rawData=this.rawData.concat(this.numberTo32(this.type),this.stringToBytes(this.data)),this.rawData},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.type=this.bytesToInt32NoAllocate(t),this.data=t.getData(),this}}),wdi.PlaybackMode=$.spcExtend(wdi.SpiceObject,{objectSize:6,init:function(t){t&&this.setContent(t)},setContent:function(t){this.multimedia_time=t.multimedia_time,this.audio_data_mode=t.audio_data_mode,this.data=t.data},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.multimedia_time=this.bytesToInt32NoAllocate(t),this.audio_data_mode=this.bytesToInt16NoAllocate(t),this.data=t.getData(),this}}),wdi.PlaybackStart=$.spcExtend(wdi.SpiceObject,{objectSize:14,init:function(t){t&&this.setContent(t)},setContent:function(t){this.channels=t.channels,this.format=t.format,this.frequency=t.frequency,this.time=t.time},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.channels=this.bytesToInt32NoAllocate(t),this.format=this.bytesToInt16NoAllocate(t),this.frequency=this.bytesToInt32NoAllocate(t),this.time=this.bytesToInt32NoAllocate(t),this}}),wdi.PlaybackData=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.multimedia_time=t.multimedia_time,this.data=t.data},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.multimedia_time=this.bytesToInt32NoAllocate(t),this.data=t.getData(),this}}),wdi.MainMultiMediaTime=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.multimedia_time=t.multimedia_time},marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this.multimedia_time=this.bytesToInt32NoAllocate(t),this}}),wdi.PlaybackStop=$.spcExtend(wdi.SpiceObject,{objectSize:0,demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.MainMChannelsList=$.spcExtend(wdi.SpiceObject,{objectSize:4,init:function(t){t&&this.setContent(t)},setContent:function(t){this.num_of_channels=t.num_of_channels},marshall:function(){},demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});this.num_of_channels=this.bytesToInt32NoAllocate(t),this.channels=[];for(var i=null,n=0;n<this.num_of_channels;n++)i=this.bytesToInt8NoAllocate(t),this.bytesToInt8NoAllocate(t),this.channels.push(i);return this}}),wdi.SpiceDisplayInvalidAllPalettes=$.spcExtend(wdi.SpiceObject,{objectSize:0,demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.SpiceDisplayMark=$.spcExtend(wdi.SpiceObject,{objectSize:0,demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.SpiceDisplayReset=$.spcExtend(wdi.SpiceObject,{objectSize:0,demarshall:function(t,e){if(this.expectedSize=e||this.objectSize,t.getLength()<this.expectedSize)throw new wdi.Exception({message:"Not enough queue to read",errorCode:3});return this}}),wdi.SpicePubkeyType={SPICE_PUBKEY_TYPE_INVALID:0,SPICE_PUBKEY_TYPE_RSA:1,SPICE_PUBKEY_TYPE_RSA2:2,SPICE_PUBKEY_TYPE_DSA:3,SPICE_PUBKEY_TYPE_DSA1:4,SPICE_PUBKEY_TYPE_DSA2:5,SPICE_PUBKEY_TYPE_DSA3:6,SPICE_PUBKEY_TYPE_DSA4:7,SPICE_PUBKEY_TYPE_DH:8,SPICE_PUBKEY_TYPE_EC:9,SPICE_PUBKEY_TYPE_ENUM_END:10},wdi.SpiceWarnCode={SPICE_WARN_GENERAL:0,SPICE_WARN_CODE_ENUM_END:1},wdi.SpiceLineFlags={SPICE_LINE_FLAGS_START_WITH_GAP:4,SPICE_LINE_FLAGS_STYLED:8,SPICE_LINE_FLAGS_MASK:12},wdi.SpiceNotifyVisibility={SPICE_NOTIFY_VISIBILITY_LOW:0,SPICE_NOTIFY_VISIBILITY_MEDIUM:1,SPICE_NOTIFY_VISIBILITY_HIGH:2,SPICE_NOTIFY_VISIBILITY_ENUM_END:3},wdi.SpiceVars={SPICE_MSGC_ACK_SYNC:1,SPICE_MSGC_ACK:2,SPICE_MSGC_PONG:3,SPICE_MSGC_MIGRATE_FLUSH_MARK:4,SPICE_MSGC_MIGRATE_DATA:5,SPICE_MSGC_DISCONNECTING:6,SPICE_MSGC_DISPLAY_INIT:101,SPICE_MSGC_END_DISPLAY:102,SPICE_CHANNEL_MAIN:1,SPICE_CHANNEL_DISPLAY:2,SPICE_CHANNEL_INPUTS:3,SPICE_CHANNEL_CURSOR:4,SPICE_CHANNEL_PLAYBACK:5,SPICE_CHANNEL_RECORD:6,SPICE_CHANNEL_TUNNEL:7,SPICE_CHANNEL_SMARTCARD:8,SPICE_CHANNEL_USBREDIR:9,SPICE_END_CHANNEL:10,SPICE_MSG_MIGRATE:1,SPICE_MSG_MIGRATE_DATA:2,SPICE_MSG_SET_ACK:3,SPICE_MSG_PING:4,SPICE_MSG_WAIT_FOR_CHANNELS:5,SPICE_MSG_DISCONNECTING:6,SPICE_MSG_NOTIFY:7,SPICE_MSG_LIST:8,SPICE_MSGC_MAIN_CLIENT_INFO:101,SPICE_MSGC_MAIN_MIGRATE_CONNECTED:102,SPICE_MSGC_MAIN_MIGRATE_CONNECT_ERROR:103,SPICE_MSGC_MAIN_ATTACH_CHANNELS:104,SPICE_MSGC_MAIN_MOUSE_MODE_REQUEST:105,SPICE_MSGC_MAIN_AGENT_START:106,SPICE_MSGC_MAIN_AGENT_DATA:107,SPICE_MSGC_MAIN_AGENT_TOKEN:108,SPICE_MSGC_MAIN_MIGRATE_END:109,SPICE_MSGC_END_MAIN:110,SPICE_MSG_DISPLAY_MODE:101,SPICE_MSG_DISPLAY_MARK:102,SPICE_MSG_DISPLAY_RESET:103,SPICE_MSG_DISPLAY_COPY_BITS:104,SPICE_MSG_DISPLAY_INVAL_LIST:105,SPICE_MSG_DISPLAY_INVAL_ALL_PIXMAPS:106,SPICE_MSG_DISPLAY_INVAL_PALETTE:107,SPICE_MSG_DISPLAY_INVAL_ALL_PALETTES:108,SPICE_MSG_DISPLAY_STREAM_CREATE:122,SPICE_MSG_DISPLAY_STREAM_DATA:123,SPICE_MSG_DISPLAY_STREAM_CLIP:124,SPICE_MSG_DISPLAY_STREAM_DESTROY:125,SPICE_MSG_DISPLAY_STREAM_DESTROY_ALL:126,SPICE_MSG_DISPLAY_DRAW_FILL:302,SPICE_MSG_DISPLAY_DRAW_OPAQUE:303,SPICE_MSG_DISPLAY_DRAW_COPY:304,SPICE_MSG_DISPLAY_DRAW_BLEND:305,SPICE_MSG_DISPLAY_DRAW_BLACKNESS:306,SPICE_MSG_DISPLAY_DRAW_WHITENESS:307,SPICE_MSG_DISPLAY_DRAW_INVERS:308,SPICE_MSG_DISPLAY_DRAW_ROP3:309,SPICE_MSG_DISPLAY_DRAW_STROKE:310,SPICE_MSG_DISPLAY_DRAW_TEXT:311,SPICE_MSG_DISPLAY_DRAW_TRANSPARENT:312,SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND:313,SPICE_MSG_DISPLAY_SURFACE_CREATE:314,SPICE_MSG_DISPLAY_SURFACE_DESTROY:315,SPICE_MSG_END_DISPLAY:316,SPICE_MSG_INPUTS_INIT:101,SPICE_MSG_INPUTS_KEY_MODIFIERS:102,SPICE_MSG_INPUTS_MOUSE_MOTION_ACK:111,SPICE_MSG_END_INPUTS:112,SPICE_MSGC_INPUTS_KEY_DOWN:101,SPICE_MSGC_INPUTS_KEY_UP:102,SPICE_MSGC_INPUTS_KEY_MODIFIERS:103,SPICE_MSGC_INPUTS_MOUSE_MOTION:111,SPICE_MSGC_INPUTS_MOUSE_POSITION:112,SPICE_MSGC_INPUTS_MOUSE_PRESS:113,SPICE_MSGC_INPUTS_MOUSE_RELEASE:114,SPICE_MSGC_END_INPUTS:115,SPICE_MSG_CURSOR_INIT:101,SPICE_MSG_CURSOR_RESET:102,SPICE_MSG_CURSOR_SET:103,SPICE_MSG_CURSOR_MOVE:104,SPICE_MSG_CURSOR_HIDE:105,SPICE_MSG_CURSOR_TRAIL:106,SPICE_MSG_CURSOR_INVAL_ONE:107,SPICE_MSG_CURSOR_INVAL_ALL:108,SPICE_MSG_END_CURSOR:109,SPICE_MSG_RECORD_START:101,SPICE_MSG_RECORD_STOP:102,SPICE_MSG_RECORD_VOLUME:103,SPICE_MSG_RECORD_MUTE:104,SPICE_MSG_END_RECORD:105,SPICE_MSGC_SMARTCARD_DATA:101,SPICE_MSGC_END_SMARTCARD:102,SPICE_MSGC_SPICEVMC_DATA:101,SPICE_MSGC_END_SPICEVMC:102,SPICE_MSG_MAIN_MIGRATE_BEGIN:101,SPICE_MSG_MAIN_MIGRATE_CANCEL:102,SPICE_MSG_MAIN_INIT:103,SPICE_MSG_MAIN_CHANNELS_LIST:104,SPICE_MSG_MAIN_MOUSE_MODE:105,SPICE_MSG_MAIN_MULTI_MEDIA_TIME:106,SPICE_MSG_MAIN_AGENT_CONNECTED:107,SPICE_MSG_MAIN_AGENT_DISCONNECTED:108,SPICE_MSG_MAIN_AGENT_DATA:109,SPICE_MSG_MAIN_AGENT_TOKEN:110,SPICE_MSG_MAIN_MIGRATE_SWITCH_HOST:111,SPICE_MSG_MAIN_MIGRATE_END:112,SPICE_MSG_END_MAIN:113,SPICE_MSG_PLAYBACK_DATA:101,SPICE_MSG_PLAYBACK_MODE:102,SPICE_MSG_PLAYBACK_START:103,SPICE_MSG_PLAYBACK_STOP:104,SPICE_MSG_PLAYBACK_VOLUME:105,SPICE_MSG_PLAYBACK_MUTE:106,SPICE_MSG_END_PLAYBACK:107,SPICE_MSGC_RECORD_DATA:101,SPICE_MSGC_RECORD_MODE:102,SPICE_MSGC_RECORD_START_MARK:103,SPICE_MSGC_END_RECORD:104,SPICE_MSG_TUNNEL_INIT:101,SPICE_MSG_TUNNEL_SERVICE_IP_MAP:102,SPICE_MSG_TUNNEL_SOCKET_OPEN:103,SPICE_MSG_TUNNEL_SOCKET_FIN:104,SPICE_MSG_TUNNEL_SOCKET_CLOSE:105,SPICE_MSG_TUNNEL_SOCKET_DATA:106,SPICE_MSG_TUNNEL_SOCKET_CLOSED_ACK:107,SPICE_MSG_TUNNEL_SOCKET_TOKEN:108,SPICE_MSG_END_TUNNEL:109,SPICE_MSGC_TUNNEL_SERVICE_ADD:101,SPICE_MSGC_TUNNEL_SERVICE_REMOVE:102,SPICE_MSGC_TUNNEL_SOCKET_OPEN_ACK:103,SPICE_MSGC_TUNNEL_SOCKET_OPEN_NACK:104,SPICE_MSGC_TUNNEL_SOCKET_FIN:105,SPICE_MSGC_TUNNEL_SOCKET_CLOSED:106,SPICE_MSGC_TUNNEL_SOCKET_CLOSED_ACK:107,SPICE_MSGC_TUNNEL_SOCKET_DATA:108,SPICE_MSGC_TUNNEL_SOCKET_TOKEN:109,SPICE_MSGC_END_TUNNEL:110,SPICE_MSG_SMARTCARD_DATA:101,SPICE_MSG_END_SMARTCARD:102,SPICE_MSG_SPICEVMC_DATA:101,SPICE_MSG_END_SPICEVMC:102,SPICE_COMMON_CAP_PROTOCOL_AUTH_SELECTION:0,SPICE_COMMON_CAP_AUTH_SPICE:1,SPICE_COMMON_CAP_AUTH_SASL:2,SPICE_COMMON_CAP_MINI_HEADER:3,SPICE_PLAYBACK_CAP_CELT_0_5_1:0,SPICE_PLAYBACK_CAP_VOLUME:1,SPICE_RECORD_CAP_CELT_0_5_1:0,SPICE_RECORD_CAP_VOLUME:1,SPICE_MAIN_CAP_SEMI_SEAMLESS_MIGRATE:0},wdi.SpiceTunnelServiceType={SPICE_TUNNEL_SERVICE_TYPE_INVALID:0,SPICE_TUNNEL_SERVICE_TYPE_GENERIC:1,SPICE_TUNNEL_SERVICE_TYPE_IPP:2,SPICE_TUNNEL_SERVICE_TYPE_ENUM_END:3},wdi.SpiceJpegAlphaFlags={SPICE_JPEG_ALPHA_FLAGS_TOP_DOWN:1,SPICE_JPEG_ALPHA_FLAGS_MASK:1},wdi.SpiceMaskFlags={SPICE_MASK_FLAGS_INVERS:1,SPICE_MASK_FLAGS_MASK:1},wdi.SpiceCursorType={SPICE_CURSOR_TYPE_ALPHA:0,SPICE_CURSOR_TYPE_MONO:1,SPICE_CURSOR_TYPE_COLOR4:2,SPICE_CURSOR_TYPE_COLOR8:3,SPICE_CURSOR_TYPE_COLOR16:4,SPICE_CURSOR_TYPE_COLOR24:5,SPICE_CURSOR_TYPE_COLOR32:6,SPICE_CURSOR_TYPE_ENUM_END:7,SPICE_CURSOR_TYPE_URL:8},wdi.SpiceImageFlags={SPICE_IMAGE_FLAGS_CACHE_ME:1,SPICE_IMAGE_FLAGS_HIGH_BITS_SET:2,SPICE_IMAGE_FLAGS_CACHE_REPLACE_ME:4,SPICE_IMAGE_FLAGS_MASK:7},wdi.SpiceAudioDataMode={SPICE_AUDIO_DATA_MODE_INVALID:0,SPICE_AUDIO_DATA_MODE_RAW:1,SPICE_AUDIO_DATA_MODE_CELT_0_5_1:2,SPICE_AUDIO_DATA_MODE_ENUM_END:3},wdi.SpiceAudioFmt={SPICE_AUDIO_FMT_INVALID:0,SPICE_AUDIO_FMT_S16:1,SPICE_AUDIO_FMT_ENUM_END:2},wdi.SpiceBitmapFmt={SPICE_BITMAP_FMT_INVALID:0,SPICE_BITMAP_FMT_1BIT_LE:1,SPICE_BITMAP_FMT_1BIT_BE:2,SPICE_BITMAP_FMT_4BIT_LE:3,SPICE_BITMAP_FMT_4BIT_BE:4,SPICE_BITMAP_FMT_8BIT:5,SPICE_BITMAP_FMT_16BIT:6,SPICE_BITMAP_FMT_24BIT:7,SPICE_BITMAP_FMT_32BIT:8,SPICE_BITMAP_FMT_RGBA:9,SPICE_BITMAP_FMT_ENUM_END:10},wdi.SpiceStreamFlags={SPICE_STREAM_FLAGS_TOP_DOWN:1,SPICE_STREAM_FLAGS_MASK:1},wdi.SpiceTunnelIpType={SPICE_TUNNEL_IP_TYPE_INVALID:0,SPICE_TUNNEL_IP_TYPE_IPv4:1,SPICE_TUNNEL_IP_TYPE_ENUM_END:2},wdi.SpiceBitmapFlags={SPICE_BITMAP_FLAGS_PAL_CACHE_ME:1,SPICE_BITMAP_FLAGS_PAL_FROM_CACHE:2,SPICE_BITMAP_FLAGS_TOP_DOWN:4,SPICE_BITMAP_FLAGS_MASK:7},wdi.SpiceStringFlags={SPICE_STRING_FLAGS_RASTER_A1:1,SPICE_STRING_FLAGS_RASTER_A4:2,SPICE_STRING_FLAGS_RASTER_A8:4,SPICE_STRING_FLAGS_RASTER_TOP_DOWN:8,SPICE_STRING_FLAGS_MASK:15},wdi.SpiceSurfaceFmt={SPICE_SURFACE_FMT_INVALID:0,SPICE_SURFACE_FMT_1_A:1,SPICE_SURFACE_FMT_8_A:8,SPICE_SURFACE_FMT_16_555:16,SPICE_SURFACE_FMT_32_xRGB:32,SPICE_SURFACE_FMT_16_565:80,SPICE_SURFACE_FMT_32_ARGB:96,SPICE_SURFACE_FMT_ENUM_END:97},wdi.SpiceCursorFlags={SPICE_CURSOR_FLAGS_NONE:1,SPICE_CURSOR_FLAGS_CACHE_ME:2,SPICE_CURSOR_FLAGS_FROM_CACHE:4,SPICE_CURSOR_FLAGS_MASK:7},wdi.SpiceLinkErr={SPICE_LINK_ERR_OK:0,SPICE_LINK_ERR_ERROR:1,SPICE_LINK_ERR_INVALID_MAGIC:2,SPICE_LINK_ERR_INVALID_DATA:3,SPICE_LINK_ERR_VERSION_MISMATCH:4,SPICE_LINK_ERR_NEED_SECURED:5,SPICE_LINK_ERR_NEED_UNSECURED:6,SPICE_LINK_ERR_PERMISSION_DENIED:7,SPICE_LINK_ERR_BAD_CONNECTION_ID:8,SPICE_LINK_ERR_CHANNEL_NOT_AVAILABLE:9,SPICE_LINK_ERR_ENUM_END:10},wdi.SpiceNotifySeverity={SPICE_NOTIFY_SEVERITY_INFO:0,SPICE_NOTIFY_SEVERITY_WARN:1,SPICE_NOTIFY_SEVERITY_ERROR:2,SPICE_NOTIFY_SEVERITY_ENUM_END:3},wdi.SpiceBrushType={SPICE_BRUSH_TYPE_NONE:0,SPICE_BRUSH_TYPE_SOLID:1,SPICE_BRUSH_TYPE_PATTERN:2,SPICE_BRUSH_TYPE_ENUM_END:3},wdi.SpiceAlphaFlags={SPICE_ALPHA_FLAGS_DEST_HAS_ALPHA:1,SPICE_ALPHA_FLAGS_SRC_SURFACE_HAS_ALPHA:2,SPICE_ALPHA_FLAGS_MASK:3},wdi.SpiceSurfaceFlags={SPICE_SURFACE_FLAGS_PRIMARY:1,SPICE_SURFACE_FLAGS_MASK:1},wdi.QuicImageType={QUIC_IMAGE_TYPE_INVALID:0,QUIC_IMAGE_TYPE_GRAY:1,QUIC_IMAGE_TYPE_RGB16:2,QUIC_IMAGE_TYPE_RGB24:3,QUIC_IMAGE_TYPE_RGB32:4,QUIC_IMAGE_TYPE_RGBA:5},wdi.SpiceImageType={SPICE_IMAGE_TYPE_BITMAP:0,SPICE_IMAGE_TYPE_QUIC:1,SPICE_IMAGE_TYPE_RESERVED:2,SPICE_IMAGE_TYPE_LZ_PLT:100,SPICE_IMAGE_TYPE_LZ_RGB:101,SPICE_IMAGE_TYPE_GLZ_RGB:102,SPICE_IMAGE_TYPE_FROM_CACHE:103,SPICE_IMAGE_TYPE_SURFACE:104,SPICE_IMAGE_TYPE_JPEG:105,SPICE_IMAGE_TYPE_FROM_CACHE_LOSSLESS:106,SPICE_IMAGE_TYPE_ZLIB_GLZ_RGB:107,SPICE_IMAGE_TYPE_JPEG_ALPHA:108,SPICE_IMAGE_TYPE_CANVAS:109,SPICE_IMAGE_TYPE_PNG:110,SPICE_IMAGE_TYPE_ENUM_END:111},wdi.SpiceImageScaleMode={SPICE_IMAGE_SCALE_MODE_INTERPOLATE:0,SPICE_IMAGE_SCALE_MODE_NEAREST:1,SPICE_IMAGE_SCALE_MODE_ENUM_END:2},wdi.SpiceResourceType={SPICE_RES_TYPE_INVALID:0,SPICE_RES_TYPE_PIXMAP:1,SPICE_RESOURCE_TYPE_ENUM_END:2},wdi.SpicePathFlags={SPICE_PATH_BEGIN:1,SPICE_PATH_END:2,SPICE_PATH_CLOSE:8,SPICE_PATH_BEZIER:16,SPICE_PATH_FLAGS_MASK:27},wdi.SpiceVideoCodecType={SPICE_VIDEO_CODEC_TYPE_MJPEG:1,SPICE_VIDEO_CODEC_TYPE_ENUM_END:2},wdi.SpiceRopd={SPICE_ROPD_INVERS_SRC:1,SPICE_ROPD_INVERS_BRUSH:2,SPICE_ROPD_INVERS_DEST:4,SPICE_ROPD_OP_PUT:8,SPICE_ROPD_OP_OR:16,SPICE_ROPD_OP_AND:32,SPICE_ROPD_OP_XOR:64,SPICE_ROPD_OP_BLACKNESS:128,SPICE_ROPD_OP_WHITENESS:256,SPICE_ROPD_OP_INVERS:512,SPICE_ROPD_INVERS_RES:1024,SPICE_ROPD_MASK:2047},wdi.SpiceMigrateFlags={SPICE_MIGRATE_NEED_FLUSH:1,SPICE_MIGRATE_NEED_DATA_TRANSFER:2,SPICE_MIGRATE_FLAGS_MASK:3},wdi.SpiceKeyboardModifierFlags={SPICE_KEYBOARD_MODIFIER_FLAGS_SCROLL_LOCK:1,SPICE_KEYBOARD_MODIFIER_FLAGS_NUM_LOCK:2,SPICE_KEYBOARD_MODIFIER_FLAGS_CAPS_LOCK:4,SPICE_KEYBOARD_MODIFIER_FLAGS_MASK:7},wdi.SpiceInfoCode={SPICE_INFO_GENERAL:0,SPICE_INFO_CODE_ENUM_END:1},wdi.SpiceMouseButton={SPICE_MOUSE_BUTTON_INVALID:0,SPICE_MOUSE_BUTTON_LEFT:1,SPICE_MOUSE_BUTTON_MIDDLE:2,SPICE_MOUSE_BUTTON_RIGHT:3,SPICE_MOUSE_BUTTON_UP:4,SPICE_MOUSE_BUTTON_DOWN:5,SPICE_MOUSE_BUTTON_ENUM_END:6},wdi.SpiceClipType={SPICE_CLIP_TYPE_NONE:0,SPICE_CLIP_TYPE_RECTS:1,SPICE_CLIP_TYPE_ENUM_END:2},wdi.SpiceMouseButtonMask={SPICE_MOUSE_BUTTON_MASK_LEFT:1,SPICE_MOUSE_BUTTON_MASK_MIDDLE:2,SPICE_MOUSE_BUTTON_MASK_RIGHT:4,SPICE_MOUSE_BUTTON_MASK_MASK:7},wdi.SpiceMouseModeTypes={SPICE_MOUSE_MODE_SERVER:1,SPICE_MOUSE_MODE_CLIENT:2,SPICE_MOUSE_MODE_MASK:3},wdi.AgentCaps={VD_AGENT_CAP_MOUSE_STATE:0,VD_AGENT_CAP_MONITORS_CONFIG:1,VD_AGENT_CAP_REPLY:2,VD_AGENT_CAP_CLIPBOARD:3,VD_AGENT_CAP_DISPLAY_CONFIG:4,VD_AGENT_CAP_CLIPBOARD_BY_DEMAND:5,VD_AGENT_CAP_CLIPBOARD_SELECTION:6},wdi.AgentMessageTypes={VD_AGENT_MOUSE_STATE:1,VD_AGENT_MONITORS_CONFIG:2,VD_AGENT_REPLY:3,VD_AGENT_CLIPBOARD:4,VD_AGENT_DISPLAY_CONFIG:5,VD_AGENT_ANNOUNCE_CAPABILITIES:6,VD_AGENT_CLIPBOARD_GRAB:7,VD_AGENT_CLIPBOARD_REQUEST:8,VD_AGENT_CLIPBOARD_RELEASE:9,VD_AGENT_GET_WINDOWS_LIST:10,VD_AGENT_CLOSE_WINDOW:11,VD_AGENT_MOVE_WINDOW:12,VD_AGENT_RESIZE_WINDOW:13,VD_AGENT_MINIMIZE_WINDOW:14,VD_AGENT_RESTORE_WINDOW:15,VD_AGENT_MAXIMIZE_WINDOW:16,VD_AGENT_FOCUS_WINDOW:17,VD_AGENT_EXECUTE_COMMAND:18},wdi.ClipBoardTypes={VD_AGENT_CLIPBOARD_NONE:0,VD_AGENT_CLIPBOARD_UTF8_TEXT:1,VD_AGENT_CLIPBOARD_IMAGE_PNG:2,VD_AGENT_CLIPBOARD_IMAGE_BMP:3,VD_AGENT_CLIPBOARD_IMAGE_TIFF:4,VD_AGENT_CLIPBOARD_IMAGE_JPG:5},wdi.GraphicDebug=$.spcExtend(wdi.DomainObject,{debugMode:null,spiceGraphicMessageTypes:[],cloneSpiceMessage:null,clientGui:null,tmpCanvas:null,tmpContext:null,originalCanvas:null,spiceMessageData:null,endCanvas:null,currentOperation:null,init:function(t){this.debugMode=t.debugMode,this.debugMode?(this._generateArray(),this._showDebug()):this._hideDebug()},_generateArray:function(){var i=this;$.each(wdi.SpiceVars,function(t,e){-1!=t.search("SPICE_MSG_DISPLAY_")&&(i.spiceGraphicMessageTypes[e]=t)})},_showDebug:function(){$("#canvasSpace").show(),$("#graphicDebug").show()},_hideDebug:function(){$("#canvasSpace").hide(),$("#graphicDebug").hide()},printDebugMessageOnFilter:function(t,e){if(t.channel===wdi.SpiceVars.SPICE_CHANNEL_DISPLAY&&this.debugMode&&$("#logActive").prop("checked")){var i=null;if(this.clientGui=e,this.cloneSpiceMessage=$.extend(!0,{},t),this.cloneSpiceMessage.args.base&&null!==this.cloneSpiceMessage.args.base.surface_id){i=this.cloneSpiceMessage.args.base.surface_id;var n=wdi.graphics.getBoxFromSrcArea(this.cloneSpiceMessage.args.base.box),r=$("<div/>").append(prettyPrint(this.cloneSpiceMessage)).hide();this.originalCanvas=this._copyCanvasFromSurfaceId(i),this.spiceMessageData=t.args.originalData,this.currentOperation=this.spiceGraphicMessageTypes[this.cloneSpiceMessage.messageType],$("#debugInfo").append($("<br/>")).append($("<hr/>")).append(this._copyAndHighlightCanvas(i,n)).append($("<br/>")).append($("<div/>").append(this.currentOperation+" (Click to hide/show)").css("cursor","pointer").css("color","blue").css("text-decoration","underline").click(function(){r.toggle()})).append(r),this.cloneSpiceMessage.args.hasOwnProperty("image")&&this._printImage(r)}}},_printImage:function(e){wdi.graphics.getImageFromSpice(this.cloneSpiceMessage.args.image.imageDescriptor,this.cloneSpiceMessage.args.image.data,this.clientGui,function(t){t&&e.append($("<div/>").css("font-size","12px").append("Image inside spiceMessage:").append($("<br/>")).css("border","1px solid black").append(t))},this)},printDebugMessageOnNotifyEnd:function(t,e){if(this.clientGui=e,t.channel===wdi.SpiceVars.SPICE_CHANNEL_DISPLAY&&this.debugMode&&$("#logActive").prop("checked")){var i=null;if(t.args.base&&null!==t.args.base.surface_id){var n=this;i=t.args.base.surface_id;var r=wdi.graphics.getBoxFromSrcArea(t.args.base.box),s=this._copyCanvasFromSurfaceId(i);$("#debugInfo").append($("<br/>")).append($("<div/>").append($("<button>Create test</button>").css("cursor","pointer").click((u=this.spiceMessageData,l=this.originalCanvas,p=s,d=this.currentOperation,function(){n.createImageTest(u,l,p,d)}))).append($("<button>Create replay window</button>").css("cursor","pointer").click((o=this.spiceMessageData,a=this.originalCanvas,c=s,h=this.currentOperation,function(){n.createReplay(o,a,c,h)})))).append($("<br/>")).append(this._copyAndHighlightCanvas(i,r))}}var o,a,c,h,u,l,p,d},createImageTest:function(t,e,i,n){var r=prompt("Name of the test",n),s={origin:e.toDataURL("image/png"),expected:i.toDataURL("image/png"),object:t,name:r},o=JSON.stringify(s),a=r.replace(/\s/g,"_");$.post("graphictestgenerator.php","data="+o+"&name="+a).done(function(t,e,i){alert("Test created")}).fail(function(t,e,i){alert("Test creation failed.\n\nGot response: "+t.status+" "+t.statusText+"\n\n"+t.responseText)})},createReplay:function(t,e){var i={origin:e.toDataURL("image/png"),object:t,width:e.width,height:e.height},n=JSON.stringify(i);$.post("graphictestgenerator.php","data="+n+"&replay=true").done(function(t,e,i){window.open("replay.html","replay")}).fail(function(t,e,i){alert("Replay failed.\n\nGot response: "+t.status+" "+t.statusText+"\n\n"+t.responseText)})},_copyCanvasFromSurfaceId:function(t){var e=this.clientGui.getContext(t);this.tmpCanvas=e.canvas;var i=document.createElement("canvas");return i.width=this.tmpCanvas.width,i.height=this.tmpCanvas.height,i.getContext("2d").drawImage(this.tmpCanvas,0,0),i},_copyAndHighlightCanvas:function(t,e){var i=this._copyCanvasFromSurfaceId(t);return context=i.getContext("2d"),context.fillStyle="rgba(255,0,0,0.3)",context.fillRect(e.x,e.y,e.width,e.height),i}}),wdi.LZSS={LZ_IMAGE_TYPE_INVALID:0,LZ_IMAGE_TYPE_PLT1_LE:1,LZ_IMAGE_TYPE_PLT1_BE:2,LZ_IMAGE_TYPE_PLT4_LE:3,LZ_IMAGE_TYPE_PLT4_BE:4,LZ_IMAGE_TYPE_PLT8:5,LZ_IMAGE_TYPE_RGB16:6,LZ_IMAGE_TYPE_RGB24:7,LZ_IMAGE_TYPE_RGB32:8,LZ_IMAGE_TYPE_RGBA:9,LZ_IMAGE_TYPE_XXXA:10,LZPALETTE_FLAG_PAL_CACHE_ME:1,LZPALETTE_FLAG_PAL_FROM_CACHE:2,LZPALETTE_FLAG_TOP_DOWN:4,PLT_PIXELS_PER_BYTE:[0,8,8,2,2,1],PLT1_MASK:[1,2,4,8,16,32,64,128],copy_pixel:function(t,e,i){i[t+0]=e.r,i[t+1]=e.g,i[t+2]=e.b},lz_rgb32_decompress_rgb:function(t){var e,i=0,n=0,r=new Uint8Array(t),s=(r[i++],r[i++]),o=r[i++],a=r[++i+1]*Math.pow(16,2)+r[i],c=r[(i+=2)+1]*Math.pow(16,2)+r[i];i+=2;var h,u,l=c*Math.pow(16,4)+a,p=new ArrayBuffer(l),d=new Uint8Array(p),f=new Uint32Array(p),g=l/4;for(e=r[i++];n<g;e=r[i++])if(m=n,l=e>>5,_=(31&e)<<8,31<e){if(6===--l)for(;l+=S=r[i++],255===S;);if(_+=S=r[i++],255===S&&_-S==7936&&(_=r[i++]<<8,_+=r[i++],_+=8191),l+=1,(m-=_+=1)===n-1)for(u=4*(y=m);l;--l)f[n]=255<<24|d[u+2]<<16|d[u+1]<<8|d[u],n++;else for(;l;--l)h=4*m,f[n]=255<<24|d[h+2]<<16|d[h+1]<<8|d[h],n++,m++}else for(e++,f[n]=255<<24|r[i]<<16|r[i+1]<<8|r[i+2],i+=3,n++,--e;e;e--)f[n]=255<<24|r[i]<<16|r[i+1]<<8|r[i+2],i+=3,n++;if(o===this.LZ_IMAGE_TYPE_RGBA&&!s)for(n=0,e=null,i--,e=r[i++];n<g;e=r[i++]){var m=n,_=(l=e>>5,(31&e)<<8),w=4*n;if(32<=e){var S;if(6===--l)for(;l+=S=r[i++],255===S;);if(_+=S=r[i++],255===S&&_-S==7936&&(_=r[i++]<<8,_+=r[i++],_+=8191),l+=3,(m-=_+=1)===n-1)for(var y=m;l;--l)d[(w=4*n)+3]=d[4*y+3],n++;else for(;l;--l)d[(w=4*n)+3]=d[4*m+3],n++,m++}else for(e++,d[w+3]=r[i++],n++,--e;e;e--)d[(w=4*n)+3]=r[i++],n++}return p},lz_rgb32_decompress:function(t,e,i,n,r,s,o){var a,c=e,h=0,u=i.length/4,l=n===this.LZ_IMAGE_TYPE_RGBA;for(a=t[c++];h<u;a=t[c++]){var p=h,d=a>>5,f=(31&a)<<8,g=4*h;if(32<=a){var m;if(6===--d)for(;d+=m=t[c++],255===m;);if(f+=m=t[c++],255===m&&f-m==7936&&(f=t[c++]<<8,f+=t[c++],f+=8191),d+=1,(l||s)&&(d+=2),f+=1,n===this.LZ_IMAGE_TYPE_PLT4_LE||n===this.LZ_IMAGE_TYPE_PLT4_BE?(f*=2,d*=2):n!==this.LZ_IMAGE_TYPE_PLT1_BE&&n!==this.LZ_IMAGE_TYPE_PLT1_LE||(f*=8,d*=8),(p-=f)===h-1)for(var _=p;d;--d){if(g=4*h,l)i[g+3]=o?255:i[4*_+3];else for(var w=0;w<4;w++)i[g+w]=i[4*_+w];h++}else for(;d;--d){if(g=4*h,l)i[g+3]=o?255:i[4*p+3];else for(w=0;w<4;w++)i[g+w]=i[4*p+w];h++,p++}}else{if(a++,l)o?(i[g+3]=255,c++):i[g+3]=t[c++];else if(s){if(n===this.LZ_IMAGE_TYPE_PLT1_LE){var S=t[c++],y=s[1],b=s[0];for(w=0;w<8;w++)S&this.PLT1_MASK[w]?this.copy_pixel(g,y,i):this.copy_pixel(g,b,i),r&&(i[g+3]=255),w<7&&h++,g=4*h}else if(n===this.LZ_IMAGE_TYPE_PLT1_BE)for(S=t[c++],y=s[1],b=s[0],w=7;0<=w;w--)S&this.PLT1_MASK[w]?this.copy_pixel(g,y,i):this.copy_pixel(g,b,i),r&&(i[g+3]=255),0<w&&h++,g=4*h;else if(n===this.LZ_IMAGE_TYPE_PLT4_LE){var E=s[15&(S=t[c++])];this.copy_pixel(g,E,i),r&&(i[g+3]=255),g=4*++h;E=s[S>>>4&15];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}else if(n===this.LZ_IMAGE_TYPE_PLT4_BE){var I=15&(S=t[c++]);E=s[S>>>4&15];this.copy_pixel(g,E,i),r&&(i[g+3]=255),g=4*++h;E=s[I];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}else if(n===this.LZ_IMAGE_TYPE_PLT8){E=s[t[c++]];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}}else i[g+0]=t[c+2],i[g+1]=t[c+1],i[g+2]=t[c+0],r&&(i[g+3]=255),c+=3;for(h++,--a;a;a--){if(g=4*h,l)i[g+3]=o?255:t[c++];else if(s){if(n===this.LZ_IMAGE_TYPE_PLT1_LE)for(S=t[c++],y=s[1],b=s[0],w=0;w<8;w++)S&this.PLT1_MASK[w]?this.copy_pixel(g,y,i):this.copy_pixel(g,b,i),r&&(i[g+3]=255),w<7&&h++,g=4*h;else if(n===this.LZ_IMAGE_TYPE_PLT1_BE)for(S=t[c++],y=s[1],b=s[0],w=7;0<=w;w--)S&this.PLT1_MASK[w]?this.copy_pixel(g,y,i):this.copy_pixel(g,b,i),r&&(i[g+3]=255),0<w&&h++,g=4*h;else if(n===this.LZ_IMAGE_TYPE_PLT4_LE){E=s[15&(S=t[c++])];this.copy_pixel(g,E,i),r&&(i[g+3]=255),g=4*++h;E=s[S>>>4&15];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}else if(n===this.LZ_IMAGE_TYPE_PLT4_BE){E=s[(S=t[c++])>>>4&15];this.copy_pixel(g,E,i),r&&(i[g+3]=255),g=4*++h;E=s[15&S];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}else if(n===this.LZ_IMAGE_TYPE_PLT8){E=s[t[c++]];this.copy_pixel(g,E,i),r&&(i[g+3]=255)}}else i[g+0]=t[c+2],i[g+1]=t[c+1],i[g+2]=t[c+0],r&&(i[g+3]=255),c+=3;h++}}}return c-1},convert_spice_lz_to_web:function(t,e,i,n){var r=i.type;if(e=e.toJSArray(),r===wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_PLT){var s=wdi.SpiceObject.bytesToInt8(e.splice(0,1));if(s===this.LZPALETTE_FLAG_PAL_FROM_CACHE){var o=e.splice(0,12),a=(wdi.SpiceObject.bytesToInt32(o.splice(0,4)),wdi.SpiceObject.bytesToInt64(o.splice(0,8)));o=e;wdi.SpiceObject.bytesToStringBE(o.splice(0,4)),wdi.SpiceObject.bytesToInt32BE(o.splice(0,4));var c=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),h=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),u=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),l=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),p=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4))}else if(s===this.LZPALETTE_FLAG_PAL_CACHE_ME){for(var d=i.offset+1,f=(o=e.splice(0,36),wdi.SpiceObject.bytesToInt32(o.splice(0,4)),wdi.SpiceObject.bytesToInt32(o.splice(0,4))-d-36),g=(wdi.SpiceObject.bytesToStringBE(o.splice(0,4)),wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),c=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),h=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),u=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),l=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),p=wdi.SpiceObject.bytesToInt32BE(o.splice(0,4)),a=wdi.SpiceObject.bytesToInt64(e.splice(f,8)),wdi.SpiceObject.bytesToInt16(e.splice(f,2))),m=[],_=0;_<g;_++){var w=new wdi.Queue;w.setData(e.splice(f,4)),m.push((new wdi.SpiceColor).demarshall(w))}wdi.ImageCache.addPalette(a,m)}else wdi.Debug.error("Unimplemented lz palette top down");m=wdi.ImageCache.getPalette(a)}if(c!==this.LZ_IMAGE_TYPE_RGB32&&c!==this.LZ_IMAGE_TYPE_RGBA&&c!==this.LZ_IMAGE_TYPE_RGB24&&c!==this.LZ_IMAGE_TYPE_PLT8&&c!==this.LZ_IMAGE_TYPE_PLT1_LE&&c!==this.LZ_IMAGE_TYPE_PLT1_BE&&c!==this.LZ_IMAGE_TYPE_PLT4_LE&&c!==this.LZ_IMAGE_TYPE_PLT4_BE)return!1;if(m){var S=t.createImageData(l*this.PLT_PIXELS_PER_BYTE[c],u);this.lz_rgb32_decompress(e,0,S.data,c,c!==this.LZ_IMAGE_TYPE_RGBA,m);var y=wdi.graphics.getNewTmpCanvas(h,u);y.getContext("2d").putImageData(S,0,0,0,0,h,u),S=y}else{var b=new ArrayBuffer(e.length+8),E=new Uint8Array(b);E[0]=1,E[1]=n,E[2]=c,E[3]=0;var I=S.data.length;for(_=0;_<4;_++)E[4+_]=255&I,I>>=8;E.set(e,8);var v=new Uint8ClampedArray(this.lz_rgb32_decompress_rgb(b));S=new ImageData(v,h,u),S=wdi.graphics.getImageFromData(S)}return p||(S=wdi.RasterOperation.flip(S)),S},demarshall_rgb:function(t){var e=t.splice(0,32);return{length:wdi.SpiceObject.bytesToInt32(e.splice(0,4)),magic:wdi.SpiceObject.bytesToStringBE(e.splice(0,4)),version:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4)),type:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4)),width:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4)),height:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4)),stride:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4)),top_down:wdi.SpiceObject.bytesToInt32BE(e.splice(0,4))}},lz_rgb32_plt1_be_decompress:function(t,e,i){var n,r,s,o,a,c,h,u,l,p,d=0,f=0,g=e.length/4,m=this.LZ_IMAGE_TYPE_PLT1_BE,_=this.PLT_PIXELS_PER_BYTE[m];for(n=t[d++];f<g;n=t[d++])if(r=f,s=n>>5,o=(31&n)<<8,31<n){if(7===s)for(;s+=a=t[d++],255===a;);if(8191===(o+=t[d++])&&(o+=t[d++]<<8+t[d++]),s=(s+2)*_,(r-=(o+1)*_)===f-1)for(c=4*r;0!=s--;)op_4=4*f,e[op_4]=e[c],e[op_4+1]=e[c+1],e[op_4+2]=e[c+2],e[op_4+3]=e[c+3],f++;else for(;0!=s--;)op_4=4*f,c=4*r,e[op_4]=e[c],e[op_4+1]=e[c+1],e[op_4+2]=e[c+2],e[op_4+3]=e[c+3],f++,r++}else for(;-1!=n--;)for(op_4=4*f,h=t[d++],u=i[1],l=i[0],p=7;0<=p;p--)op_4=4*f,h&this.PLT1_MASK[p]?(e[op_4+0]=u.r,e[op_4+1]=u.g,e[op_4+2]=u.b):(e[op_4+0]=l.r,e[op_4+1]=l.g,e[op_4+2]=l.b),e[op_4+3]=255,f++}},wdi.BMP2=$.spcExtend(wdi.SpiceObject,{objectSize:0,mapper:[0,1,1,4,4,8,16,24,32,32],init:function(t){var e,i,n,r,s=this.bytesToInt8(t),o=this.bytesToInt8(t),a=this.bytesToInt32(t),c=this.bytesToInt32(t),h=this.bytesToInt32(t),u=this.mapper[s],l=0;if(u<=8&&0<u){var p=[];if(o&wdi.SpiceBitmapFlags.SPICE_BITMAP_FLAGS_PAL_CACHE_ME){this.bytesToInt32(t);e=t.length;var d,f=4*Math.pow(2,u)+8+2;for(e-=f,r=t.splice(e,f),n=this.bytesToInt64(r),l=this.bytesToInt16(r),i=0;i<4*l;i+=4)(d=new wdi.Queue).setData(r.slice(i,i+4)),p.push((new wdi.SpiceColor).demarshall(d));wdi.ImageCache.addPalette(n,p)}else{var g;for(n=this.bytesToInt64(t),e=t.length,r=[],l=(p=wdi.ImageCache.getPalette(n)).length,i=0;i<l;i++)(g=p[i].marshall()).push(0),r=r.concat(g)}}else this.bytesToInt32(t);this.setContent({imageSize:e,width:a,height:c,bpp:u,imageData:t,paletteSize:4*l,palette:p,stride:h,type:s,flags:o})},setContent:function(t){this.imageSize=t.imageSize,this.width=t.width,this.height=t.height,this.bpp=t.bpp,this.imageData=t.imageData,this.palette=t.palette,this.offset=t.paletteSize+54,this.size=this.offset+this.imageSize,this.stride=t.stride,this.type=t.type,this.flags=t.flags},marshall:function(t){var e,i,n,r,s,o,a=this.type,c=this.palette,h=this.width,u=this.height,l=this.stride,p=this.imageData,d=p.length,f=this.flags,g=8*l/this.bpp,m=new ArrayBuffer(4*g*u),_=new Uint8ClampedArray(m),w=new Uint32Array(m),S=f&wdi.SpiceBitmapFlags.SPICE_BITMAP_FLAGS_TOP_DOWN;if(c){if(r=0,a===wdi.SpiceBitmapFmt.SPICE_BITMAP_FMT_1BIT_BE){var y=(s=c[1]).r<<24|s.g<<16|s.b<<8|255,b=(s=c[0]).r<<24|s.g<<16|s.b<<8|255,E=[1,2,4,8,16,32,64,128];for(n=0;n<d;n++)for(e=p[n],i=7;0<=i;i--)w[r++]=e&E[i]?y:b}else if(a===wdi.SpiceBitmapFmt.SPICE_BITMAP_FMT_4BIT_BE)for(n=0;n<d;n++)s=c[(e=p[n])>>>4],w[r++]=s.r<<24|s.g<<16|s.b<<8|255,s=c[15&e],w[r++]=s.r<<24|s.g<<16|s.b<<8|255}else{if(a===wdi.SpiceBitmapFmt.SPICE_BITMAP_FMT_32BIT)for(n=0;n<d;n+=4)o=p[n],p[n]=p[n+2],p[n+2]=o,p[n+3]=255;else if(a===wdi.SpiceBitmapFmt.SPICE_BITMAP_FMT_RGBA)for(S=!0,n=0;n<d;n+=4)o=p[n],p[n]=p[n+2],p[n+2]=o;else if(a===wdi.SpiceBitmapFmt.SPICE_BITMAP_FMT_24BIT)for(n=0;n<d;n+=3)o=p[n],p[n]=p[n+2],p[n+2]=o;_=new Uint8ClampedArray(p)}var I=new ImageData(_,g,u),v=wdi.graphics.getNewTmpCanvas(h,u);return v.getContext("2d").putImageData(I,0,0,0,0,h,u),I=v,S||(I=wdi.RasterOperation.flip(I)),I}});var syncInstance,asyncInstance,rfc2083_crc_table=Array(256),rfc2083_crc_table_computed=0;function rfc2083_make_crc_table(){var t,e,i;for(e=0;e<256;e++){for(t=e,i=0;i<8;i++)1&t?t=(3988292384^t>>>1)>>>0&4294967295:t>>>=1;rfc2083_crc_table[e]=t}rfc2083_crc_table_computed=1}function rfc2083_update_crc(t,e,i,n){var r,s=t;for(rfc2083_crc_table_computed||rfc2083_make_crc_table(),r=0;r<n;r++)s=rfc2083_crc_table[255&(s^e[i+r])]^s>>>8;return s}function rfc2083_crc(t,e,i){return 4294967295^rfc2083_update_crc(4294967295,t,e,i)}function crc32(t,e,i){return rfc2083_crc(new Uint8Array(t),e,i)}function PngIHDR(t,e){this.width=t,this.height=e,this.depth=8,this.type=6,this.compression=0,this.filter=0,this.interlace=0}function adler(){this.s1=1,this.s2=0}function PngIDAT(t,e,i){if(65535<i.byteLength)throw new Error("Cannot handle more than 64K");this.data=i,this.width=t,this.height=e}function PngIEND(){}function create_rgba_png(t,e,i){var n,r=new PngIHDR(t,e),s=new PngIDAT(t,e,i),o=new PngIEND,a=new ArrayBuffer(r.buffer_size()+s.buffer_size()+o.buffer_size()),c=r.to_buffer(a);c=s.to_buffer(a,c),c=o.to_buffer(a,c);var h=new Uint8Array(a),u="";for(n=0;n<c;n++)u+="%",h[n]<16&&(u+="0"),u+=h[n].toString(16);return"%89PNG%0D%0A%1A%0A"+u}PngIHDR.prototype={to_buffer:function(t,e){var i=e=e||0,n=new SpiceDataView(t);return n.setUint32(e,this.buffer_size()-12),e+=4,n.setUint8(e,"I".charCodeAt(0)),e++,n.setUint8(e,"H".charCodeAt(0)),e++,n.setUint8(e,"D".charCodeAt(0)),e++,n.setUint8(e,"R".charCodeAt(0)),e++,n.setUint32(e,this.width),e+=4,n.setUint32(e,this.height),e+=4,n.setUint8(e,this.depth),e++,n.setUint8(e,this.type),e++,n.setUint8(e,this.compression),e++,n.setUint8(e,this.filter),e++,n.setUint8(e,this.interlace),e++,n.setUint32(e,crc32(t,i+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 25}},adler.prototype.update=function(t){this.s1+=t,this.s1%=65521,this.s2+=this.s1,this.s2%=65521},PngIDAT.prototype={to_buffer:function(t,e){var i,n,r,s=e=e||0,o=new SpiceDataView(t),a=new adler;o.setUint32(e,this.buffer_size()-12),e+=4,o.setUint8(e,"I".charCodeAt(0)),e++,o.setUint8(e,"D".charCodeAt(0)),e++,o.setUint8(e,"A".charCodeAt(0)),e++,o.setUint8(e,"T".charCodeAt(0)),e++,o.setUint8(e,120),e++,o.setUint8(e,1),e++,o.setUint8(e,128),e++,o.setUint16(e,this.data.byteLength+this.height),e+=2,o.setUint16(e,~(this.data.byteLength+this.height)),e+=2;var c=new Uint8Array(this.data);for(n=r=0;n<this.height;n++)for(o.setUint8(e,0),e++,a.update(0),i=0;i<this.width&&r<this.data.byteLength;i++)a.update(c[r]),o.setUint8(e,c[r++]),e++,a.update(c[r]),o.setUint8(e,c[r++]),e++,a.update(c[r]),o.setUint8(e,c[r++]),e++,a.update(c[r]),o.setUint8(e,c[r++]),e++;return o.setUint16(e,a.s2),e+=2,o.setUint16(e,a.s1),e+=2,o.setUint32(e,crc32(t,s+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 12+this.data.byteLength+this.height+4+2+1+2+2}},PngIEND.prototype={to_buffer:function(t,e){var i=e=e||0,n=new SpiceDataView(t);return n.setUint32(e,this.buffer_size()-12),e+=4,n.setUint8(e,"I".charCodeAt(0)),e++,n.setUint8(e,"E".charCodeAt(0)),e++,n.setUint8(e,"N".charCodeAt(0)),e++,n.setUint8(e,"D".charCodeAt(0)),e++,n.setUint32(e,crc32(t,i+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 12}},wdi.RunQueue=$.spcExtend(wdi.DomainObject,{tasks:null,isRunning:!1,init:function(){this.tasks=[]},getTasksLength:function(){return this.tasks.length},add:function(t,e,i,n){return this.tasks.push({fn:t,scope:e,fnFinish:i,params:n}),this},clear:function(){return this.tasks=[],this},_process:function(){wdi.ExecutionControl.sync=!0;var e,t=this;this.isRunning=!0;var i=this.tasks.shift();if(i){e={end:function(){i.fnFinish&&i.fnFinish.call(i.scope),t._process()}};try{i.fn.call(i.scope,e,i.params)}catch(t){wdi.Debug.error(t.message),e.end()}return this}this.isRunning=!1},process:function(){this.isRunning||this._process()}}),wdi.ExecutionControl={currentProxy:null,sync:!0,runQ:new wdi.RunQueue},"undefined"==typeof CanvasPixelArray||CanvasPixelArray.prototype.set||(CanvasPixelArray.prototype.set=function(t){for(var e=t.length,i=0;i<e;i++)this[i]=t[i]}),wdi.graphics={tmpCanvas:document.createElement("canvas"),imageLoader:new Image,getRect:function(t,e){if(0===t.x&&0===t.y&&t.width===e.width&&t.height===e.height)return e;var i=this.getImageFromData(e),n=wdi.graphics.getNewTmpCanvas(t.width,t.height);return n.getContext("2d").drawImage(i,t.x,t.y,t.width,t.height,0,0,t.width,t.height),n},argbToImageData:function(t,e,i){for(var n=t.length,r=wdi.graphics.getTmpCanvas(e,i).getContext("2d").createImageData(e,i),s=0;s<n;s+=4)r.data[s]=t[s],r.data[s+1]=t[s+1],r.data[s+2]=t[s+2],r.data[s+3]=t[s+3];return r},align:function(t,e){return t+(e-1)&~(e-1)},monoMask:[1,2,4,8,16,32,64,128],monoToImageData:function(t,e,i){this.align(e,8);for(var n=t.length,r=n/2,s=wdi.graphics.getTmpCanvas(e,i).getContext("2d").createImageData(e,i),o=[],a=[],c=0;c<n;c++){var h=t[c],u=8;if(r<=c)for(;u--;){var l=h&this.monoMask[u]&&!0;o.push(l)}else if(c<r)for(;u--;){l=h&this.monoMask[u]&&!0;a.push(l)}}var p=0;for(r=a.length,c=0;c<r;c++)p=4*c,o[c]||a[c]?!o[c]&&a[c]?(s.data[p]=255,s.data[p+1]=255,s.data[p+2]=255,s.data[p+3]=0):o[c]&&!a[c]?(s.data[p]=255,s.data[p+1]=255,s.data[p+2]=255,s.data[p+3]=255):o[c]&&a[c]&&(s.data[p]=0,s.data[p+1]=0,s.data[p+2]=0,s.data[p+3]=255):(s.data[p]=0,s.data[p+1]=0,s.data[p+2]=0,s.data[p+3]=255);return s},drawJpeg:function(t,e,i,n){return this.drawBrowserImage(t,e,i,n,"jpeg",!1)},drawBrowserImage:function(e,t,i,n,r,s){var o,a=wdi.GlobalPool.create("Image");a.onload=function(){URL.revokeObjectURL(o);try{if(e.flags&wdi.SpiceImageFlags.SPICE_IMAGE_FLAGS_CACHE_ME){var t=wdi.graphics.getTmpCanvas(this.width,this.height);t.getContext("2d").drawImage(this,0,0),wdi.ImageCache.addImage(e,t)}i.call(n,this)}catch(t){wdi.Debug.error(t.message)}finally{wdi.ExecutionControl.currentProxy.end()}},a.onerror=function(){URL.revokeObjectURL(o),wdi.Debug.error("failed to load JPEG image"),wdi.ExecutionControl.currentProxy.end()},a.src=s?t:o=wdi.SpiceObject.bytesToURI(t)},getImageFromSpice:function(t,e,i,n,r,s){var o,a,c,h,u=null;switch(s?(a=s.opaque,c=s.brush,h=s.raw):c=h=a=!1,t.type){case wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_RGB:u=this.processLz(t,e,c,a,i);break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_PLT:wdi.Debug.log("lz plt decode"),u=wdi.LZSS.convert_spice_lz_to_web(i.getContext(0),e,t,a);break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_QUIC:u=this.processQuic(t,e,c,a,i);break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_JPEG:return wdi.Debug.log("JPEG decode"),wdi.ExecutionControl.sync=!1,void this.drawJpeg(t,e.subarray(4),n,r);case wdi.SpiceImageType.SPICE_IMAGE_TYPE_JPEG_ALPHA:wdi.Debug.log("JPEG Alpha decode"),wdi.ExecutionControl.sync=!1;var l=e.subarray(9);return void this.drawJpeg(t,l,n,r);case wdi.SpiceImageType.SPICE_IMAGE_TYPE_BITMAP:wdi.Debug.log("BMP"),e.toJSArray&&(e=e.toJSArray()),u=new wdi.BMP2(e).marshall(i.getContext(0));break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_FROM_CACHE_LOSSLESS:case wdi.SpiceImageType.SPICE_IMAGE_TYPE_FROM_CACHE:return wdi.ExecutionControl.sync=!1,void wdi.ImageCache.getImageFrom(t,function(t){n.call(r,t),wdi.ExecutionControl.currentProxy.end()});case wdi.SpiceImageType.SPICE_IMAGE_TYPE_SURFACE:var p=wdi.SpiceObject.bytesToInt32(e.toJSArray());u=i.getContext(p).canvas;break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_CANVAS:u=e;break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_PNG:return wdi.ExecutionControl.sync=!1,e=wdi.SpiceObject.bytesToString(e.toJSArray()),void this.drawBrowserImage(t,e,n,r,"png",!0);default:return wdi.Debug.log("Unknown image type: "+t.type),void wdi.ExecutionControl.currentProxy.end()}o=null,t.flags&wdi.SpiceImageFlags.SPICE_IMAGE_FLAGS_CACHE_ME&&wdi.ImageCache.addImage(t,u),o=u.getContext||h?u:this.getImageFromData(u),t.flags&wdi.SpiceImageFlags.SPICE_IMAGE_FLAGS_CACHE_ME&&wdi.ImageCache.addImage(t,o),wdi.ExecutionControl.sync&&n.call(r,o)},processUncompress:function(t,e,i,n,r,s){wdi.ImageUncompressor.getSyncInstance().process(t,e,i,n,r,s,this)},processQuic:function(i,t,e,n,r){var s;return this.processUncompress(i,t,e,n,r,function(t){var e=new Uint8ClampedArray(t);s=new ImageData(e,i.width,i.height)}),s},processLz:function(n,r,s,o,t){var a;return this.processUncompress(n,r,s,o,t,function(t){var e=wdi.ImageUncompressor.getSyncInstance().extractLzHeader(r,s),i=new Uint8ClampedArray(t);a=new ImageData(i,n.width,n.height),e.header.top_down||o||(a=this.imageFlip(a))}),a},imageFlip:function(t){return wdi.RasterOperation.flip(this.getImageFromData(t))},getImageFromData:function(t,e){return t.getContext||t instanceof Image?t:((i=e?$("<canvas/>").attr({width:t.width,height:t.height})[0]:this.getNewTmpCanvas(t.width,t.height)).getContext("2d").putImageData(t,0,0),i);var i},getDataFromImage:function(t){return t.getContext("2d").getImageData(0,0,t.width,t.height)},getBoxFromSrcArea:function(t){return{width:t.right-t.left,height:t.bottom-t.top,x:t.left,y:t.top}},setBrush:function(t,r,e,s,o){var a,i,c;if(e.type===wdi.SpiceBrushType.SPICE_BRUSH_TYPE_PATTERN)i=e.pattern.image,this.getImageFromSpice(i,e.pattern.imageData,t,function(t){if(a=r.createPattern(t,"repeat"),o===wdi.SpiceRopd.SPICE_ROPD_OP_PUT)r.fillStyle=a,r.fillRect(s.x,s.y,s.width,s.height);else{var e=wdi.graphics.getTmpCanvas(s.width,s.height),i=e.getContext("2d");i.fillStyle=a,i.fillRect(0,0,s.width,s.height);var n=wdi.graphics.getRect(s,r.canvas);c=wdi.RasterOperation.process(o,e,n),r.drawImage(c,s.x,s.y,s.width,s.height)}},this,{opaque:!0});else if(e.type===wdi.SpiceBrushType.SPICE_BRUSH_TYPE_SOLID)if(o===wdi.SpiceRopd.SPICE_ROPD_OP_PUT)r.fillStyle!=e.color.simple_html_color&&(r.fillStyle=e.color.simple_html_color),r.fillRect(s.x,s.y,s.width,s.height);else{var n=wdi.graphics.getTmpCanvas(s.width,s.height),h=n.getContext("2d");h.fillStyle=e.color.html_color,h.fillRect(0,0,s.width,s.height);var u=wdi.graphics.getRect(s,r.canvas);c=wdi.RasterOperation.process(o,n,u),r.drawImage(c,s.x,s.y,s.width,s.height)}},imageIsEntireColor:function(t,e,i,n,r){for(var s,o=0;s=r[o]===t&&r[o+1]===e&&r[o+2]===i,(o+=4)!=n&&s;);return s},drawBackText:function(t,e,i){var n=i.back_brush,r=i.back_mode,s=wdi.graphics.getBoxFromSrcArea(i.base.box);this.setBrush(t,e,n,s,r)},drawString:function(t,e,i,n,r,s){var o,a,c,h,u,l,p,d,f,g,m,_,w,S,y,b,E,I,v,C,T,A,x,P=n.color,D=e.len,M=e.raster_glyph;for(d=1===i?255:4===i?17:1,m=0;m<D;m++){for(o=(I=M[m]).render_pos,a=I.glyph_origin,c=I.width,h=I.height,u=I.data,_=new ArrayBuffer(c*(l=h)*4),w=new Uint8ClampedArray(_),S=new Uint32Array(_),g=f=0;l--;){for(b=y=Math.ceil(c*i/8),E=[];b--;)E.push(u.pop());for(;y--;)for(v=E.pop(),C=8,T=0;C;)A=wdi.bppMask[i][T]&v,1===i&&A?A=1:4===i&&A&&15<A&&(A>>=4),A&&(S[g*c+f]=d*A<<24|P.b<<16|P.g<<8|P.r),C-=i,f++,T++;g++,f=0}x={x:o.x+a.x,y:o.y+a.y-1,width:c,height:h},p=new ImageData(w,c,h);var N=wdi.graphics.getImageFromData(p);s.drawClip(N,x,t),wdi.GlobalPool.discard("Canvas",N)}},getImgDataPosition:function(t,e,i){return 4*(e*i+t)},getTmpCanvas:function(t,e){var i=this.tmpCanvas;return i.width=t,i.height=e,i},getNewTmpCanvas:function(t,e){var i=wdi.GlobalPool.create("Canvas");return i.width=t,i.height=e,i}},wdi.Rop3={1:function(t,e,i){return~(t|e|i)},2:function(t,e,i){return~(t|e)&i},4:function(t,e,i){return~(t|i)&e},6:function(t,e,i){return~(~(e^i)|t)},7:function(t,e,i){return~(e&i|t)},8:function(t,e,i){return~t&i&e},9:function(t,e,i){return~(e^i|t)},11:function(t,e,i){return~(~i&e|t)},13:function(t,e,i){return~(~e&i|t)},14:function(t,e,i){return~(~(e|i)|t)},16:function(t,e,i){return~(e|i)&t},18:function(t,e,i){return~(~(t^i)|e)},19:function(t,e,i){return~(t&i|e)},20:function(t,e,i){return~(~(t^e)|i)},21:function(t,e,i){return~(t&e|i)},22:function(t,e,i){return~(t&e)&i^e^t},23:function(t,e,i){return~((e^i)&(e^t)^e)},24:function(t,e,i){return(e^t)&(t^i)},25:function(t,e,i){return~(~(t&e)&i^e)},26:function(t,e,i){return(t&e|i)^t},27:function(t,e,i){return~((t^e)&i^e)},28:function(t,e,i){return(t&i|e)^t},29:function(t,e,i){return~((t^i)&e^i)},30:function(t,e,i){return(i|e)^t},31:function(t,e,i){return~((e|i)&t)},32:function(t,e,i){return~e&t&i},33:function(t,e,i){return~(t^i|e)},35:function(t,e,i){return~(~i&t|e)},36:function(t,e,i){return(e^t)&(i^e)},37:function(t,e,i){return~(~(e&t)&i^t)},38:function(t,e,i){return(e&t|i)^e},39:function(t,e,i){return(~(e^t)|i)^e},40:function(t,e,i){return(t^e)&i},41:function(t,e,i){return~((e&t|i)^e^t)},42:function(t,e,i){return~(e&t)&i},43:function(t,e,i){return~((t^i)&(e^t)^e)},44:function(t,e,i){return(e|i)&t^e},45:function(t,e,i){return(~i|e)^t},46:function(t,e,i){return(t^i|e)^t},47:function(t,e,i){return~((~i|e)&t)},49:function(t,e,i){return~(~t&i|e)},50:function(t,e,i){return(e|t|i)^e},52:function(t,e,i){return(e&i|t)^e},53:function(t,e,i){return(~(e^i)|t)^e},54:function(t,e,i){return(t|i)^e},55:function(t,e,i){return~((t|i)&e)},56:function(t,e,i){return(t|i)&e^t},57:function(t,e,i){return(~i|t)^e},58:function(t,e,i){return(e^i|t)^e},59:function(t,e,i){return~((~i|t)&e)},61:function(t,e,i){return(~(e|i)|t)^e},62:function(t,e,i){return(~e&i|t)^e},64:function(t,e,i){return~i&e&t},65:function(t,e,i){return~(e^t|i)},66:function(t,e,i){return(e^i)&(t^i)},67:function(t,e,i){return~(~(e&i)&t^e)},69:function(t,e,i){return~(~e&t|i)},70:function(t,e,i){return(i&t|e)^i},71:function(t,e,i){return~((t^i)&e^t)},72:function(t,e,i){return(t^i)&e},73:function(t,e,i){return~((i&t|e)^i^t)},74:function(t,e,i){return(i|e)&t^i},75:function(t,e,i){return(~e|i)^t},76:function(t,e,i){return~(t&i)&e},77:function(t,e,i){return~((e^i|e^t)^e)},78:function(t,e,i){return(t^e|i)^t},79:function(t,e,i){return~((~e|i)&t)},81:function(t,e,i){return~(~t&e|i)},82:function(t,e,i){return(i&e|t)^i},83:function(t,e,i){return~((e^i)&t^e)},84:function(t,e,i){return~(~(e|t)|i)},86:function(t,e,i){return(e|t)^i},87:function(t,e,i){return~((e|t)&i)},88:function(t,e,i){return(t|e)&i^t},89:function(t,e,i){return(~e|t)^i},91:function(t,e,i){return(~(i|e)|t)^i},92:function(t,e,i){return(i^e|t)^i},93:function(t,e,i){return~((~e|t)&i)},94:function(t,e,i){return(~i&e|t)^i},96:function(t,e,i){return(e^i)&t},97:function(t,e,i){return~((e&i|t)^e^i)},98:function(t,e,i){return(i|t)&e^i},99:function(t,e,i){return(~t|i)^e},100:function(t,e,i){return(e|t)&i^e},101:function(t,e,i){return(~t|e)^i},103:function(t,e,i){return(~(e|t)|i)^e},104:function(t,e,i){return~((~(e|i)|t)^e^i)},105:function(t,e,i){return~(e^i^t)},106:function(t,e,i){return e&t^i},107:function(t,e,i){return~((e|t)&i^e^t)},108:function(t,e,i){return t&i^e},109:function(t,e,i){return~((i|t)&e^i^t)},110:function(t,e,i){return(~e|t)&i^e},111:function(t,e,i){return~(~(e^i)&t)},112:function(t,e,i){return~(e&i)&t},113:function(t,e,i){return~((i^t)&(e^i)^e)},114:function(t,e,i){return(e^t|i)^e},115:function(t,e,i){return~((~t|i)&e)},116:function(t,e,i){return(i^t|e)^i},117:function(t,e,i){return~((~t|e)&i)},118:function(t,e,i){return(~e&t|i)^e},120:function(t,e,i){return e&i^t},121:function(t,e,i){return~((e|i)&t^e^i)},122:function(t,e,i){return(~i|e)&t^i},123:function(t,e,i){return~(~(t^i)&e)},124:function(t,e,i){return(~e|i)&t^e},125:function(t,e,i){return~(~(e^t)&i)},126:function(t,e,i){return e^i|t^e},127:function(t,e,i){return~(e&t&i)},128:function(t,e,i){return e&t&i},129:function(t,e,i){return~(e^i|t^e)},130:function(t,e,i){return~(e^t)&i},131:function(t,e,i){return~((~e|i)&t^e)},132:function(t,e,i){return~(t^i)&e},133:function(t,e,i){return~((~t|e)&i^t)},134:function(t,e,i){return(e|i)&t^e^i},135:function(t,e,i){return~(e&i^t)},137:function(t,e,i){return~((~e&t|i)^e)},138:function(t,e,i){return(~t|e)&i},139:function(t,e,i){return~((i^t|e)^i)},140:function(t,e,i){return(~t|i)&e},141:function(t,e,i){return~((e^t|i)^e)},142:function(t,e,i){return(i^t)&(i^e)^e},143:function(t,e,i){return~(~(e&i)&t)},144:function(t,e,i){return~(e^i)&t},145:function(t,e,i){return~((~e|t)&i^e)},146:function(t,e,i){return(t|i)&e^t^i},147:function(t,e,i){return~(i&t^e)},148:function(t,e,i){return(e|t)&i^e^t},149:function(t,e,i){return~(e&t^i)},150:function(t,e,i){return e^t^i},151:function(t,e,i){return(~(e|t)|i)^e^t},152:function(t,e,i){return~((~(e|t)|i)^e)},154:function(t,e,i){return~e&t^i},155:function(t,e,i){return~((e|t)&i^e)},156:function(t,e,i){return~i&t^e},157:function(t,e,i){return~((i|t)&e^i)},158:function(t,e,i){return(e&i|t)^e^i},159:function(t,e,i){return~((e^i)&t)},161:function(t,e,i){return~((~t&e|i)^t)},162:function(t,e,i){return(~e|t)&i},163:function(t,e,i){return~((i^e|t)^i)},164:function(t,e,i){return~((~(t|e)|i)^t)},166:function(t,e,i){return~t&e^i},167:function(t,e,i){return~((t|e)&i^t)},168:function(t,e,i){return(e|t)&i},169:function(t,e,i){return~((e|t)^i)},171:function(t,e,i){return~(e|t)|i},172:function(t,e,i){return(e^i)&t^e},173:function(t,e,i){return~((i&e|t)^i)},174:function(t,e,i){return~t&e|i},176:function(t,e,i){return(~e|i)&t},177:function(t,e,i){return~((t^e|i)^t)},178:function(t,e,i){return(e^i|t^e)^e},179:function(t,e,i){return~(~(t&i)&e)},180:function(t,e,i){return~i&e^t},181:function(t,e,i){return~((i|e)&t^i)},182:function(t,e,i){return(t&i|e)^t^i},183:function(t,e,i){return~((t^i)&e)},184:function(t,e,i){return(i^t)&e^t},185:function(t,e,i){return~((i&t|e)^i)},186:function(t,e,i){return~e&t|i},188:function(t,e,i){return~(e&i)&t^e},189:function(t,e,i){return~((i^t)&(i^e))},190:function(t,e,i){return e^t|i},191:function(t,e,i){return~(e&t)|i},193:function(t,e,i){return~((~e&i|t)^e)},194:function(t,e,i){return~((~(e|i)|t)^e)},196:function(t,e,i){return(~i|t)&e},197:function(t,e,i){return~((e^i|t)^e)},198:function(t,e,i){return~t&i^e},199:function(t,e,i){return~((t|i)&e^t)},200:function(t,e,i){return(t|i)&e},201:function(t,e,i){return~((i|t)^e)},202:function(t,e,i){return(i^e)&t^i},203:function(t,e,i){return~((e&i|t)^e)},205:function(t,e,i){return~(t|i)|e},206:function(t,e,i){return~t&i|e},208:function(t,e,i){return(~i|e)&t},209:function(t,e,i){return~((t^i|e)^t)},210:function(t,e,i){return~e&i^t},211:function(t,e,i){return~((e|i)&t^e)},212:function(t,e,i){return(i^t)&(t^e)^e},213:function(t,e,i){return~(~(e&t)&i)},214:function(t,e,i){return(e&t|i)^e^t},215:function(t,e,i){return~((e^t)&i)},216:function(t,e,i){return(t^e)&i^t},217:function(t,e,i){return~((e&t|i)^e)},218:function(t,e,i){return~(i&e)&t^i},219:function(t,e,i){return~((e^i)&(t^e))},220:function(t,e,i){return~i&t|e},222:function(t,e,i){return t^i|e},223:function(t,e,i){return~(t&i)|e},224:function(t,e,i){return(e|i)&t},225:function(t,e,i){return~((e|i)^t)},226:function(t,e,i){return(i^t)&e^i},227:function(t,e,i){return~((t&i|e)^t)},228:function(t,e,i){return(e^t)&i^e},229:function(t,e,i){return~((t&e|i)^t)},230:function(t,e,i){return~(e&t)&i^e},231:function(t,e,i){return~((i^t)&(t^e))},232:function(t,e,i){return(e^i)&(t^e)^e},233:function(t,e,i){return~(~(e&i)&t^e^i)},234:function(t,e,i){return e&t|i},235:function(t,e,i){return~(e^t)|i},236:function(t,e,i){return t&i|e},237:function(t,e,i){return~(t^i)|e},239:function(t,e,i){return~t|i|e},241:function(t,e,i){return~(e|i)|t},242:function(t,e,i){return~e&i|t},244:function(t,e,i){return~i&e|t},246:function(t,e,i){return e^i|t},247:function(t,e,i){return~(e&i)|t},248:function(t,e,i){return e&i|t},249:function(t,e,i){return~(e^i)|t},251:function(t,e,i){return~e|t|i},253:function(t,e,i){return~i|e|t},254:function(t,e,i){return e|t|i}},Uint8Array.prototype.toJSArray=function(){if(1==this.length)return[this[0]];for(var t=this.length,e=new Array(t),i=0;i<t;i++)e[i]=this[i];return e},wdi.FixedQueue=$.spcExtend(wdi.DomainObject,{q:null,size:10485760,grow:10485760,woffset:0,roffset:0,init:function(t){this.q=new Uint8Array(this.size)},setData:function(t){this.woffset=t.length,this.roffset=0,this.q.set(t)},shift:function(t){if(this.roffset+t>this.woffset)throw"Not enough queue to read";var e=this.q.subarray(this.roffset,this.roffset+t);return this.roffset=this.roffset+t,this.woffset==this.roffset&&(this.woffset=0,this.roffset=0),e},push:function(t){if(this.woffset+t.byteLength>this.size){var e=this.q;this.size+=this.grow,this.q=new Uint8Array(this.size),this.q.set(e)}this.q.set(t,this.woffset),this.woffset+=t.byteLength},getLength:function(){return this.woffset-this.roffset}}),wdi.Queue=$.spcExtend(wdi.DomainObject,{q:null,raw:!1,init:function(t){t.raw&&(this.raw=t.raw),this.q=new Uint8Array(0)},getData:function(){return this.toJSArray(this.q)},setData:function(t){this.q=new Uint8Array(t.length),this.q.set(t)},shift:function(){var t=arguments[0]||this.getLength();if(t===this.q.length){var e=this.q;this.q=new Uint8Array(0)}else{e=this.q.subarray(0,t);this.q=this.q.subarray(t)}return this.toJSArray(e)},peek:function(t,e){var i=null;return i=0!=t||e?this.q.subarray(t,e):this.q,this.toJSArray(i)},push:function(t){if("string"==typeof t){var e=t.length;(n=new Uint8Array(this.q.length+e)).set(this.q);for(var i=0;i<e;i++)n[i+this.q.length]=t[i];this.q=n}else{var n;if(0===this.getLength())this.q=new Uint8Array(t.length),this.q.set(t);else(n=new Uint8Array(t.length+this.q.length)).set(this.q),n.set(t,this.q.length),this.q=n}},getLength:function(){return this.q.length},toJSArray:function(t){return this.raw?t:t.toJSArray()}}),wdi.ViewQueue=$.spcExtend(wdi.DomainObject,{q:null,at:null,init:function(){this.q=new Uint8Array,this.at=0},getData:function(){return this.toJSArray(this.q.subarray(this.at))},getDataOffset:function(t){return this.toJSArray(this.q.subarray(t))},getRawData:function(){return this.q.subarray(this.at)},getRawDataOffset:function(t){return this.q.subarray(t)},setData:function(t){this.q=new Uint8Array(t.length),this.q.set(t),this.at=0},shift:function(t){var e=t||this.getLength();e>this.getLength()&&(e=this.getLength());var i=this.q.subarray(0+this.at,e+this.at);return this.at+=e,this.toJSArray(i)},eatBytes:function(t){this.at+=t},getByte:function(t){return this.q[t+this.at]},peek:function(t,e){var i=null;return i=0!=t||e?(e&&(e+=this.at),this.q.subarray(t+this.at,e)):this.q,this.toJSArray(i)},push:function(t){if("string"==typeof t){var e=t.length;(n=new Uint8Array(this.q.length+e)).set(this.q);for(var i=0;i<e;i++)n[i+this.q.length]=t[i];this.q=n}else{var n;if(0===this.getLength())this.q=new Uint8Array(t.length),this.q.set(t);else(n=new Uint8Array(t.length+this.q.length)).set(this.q),n.set(t,this.q.length),this.q=n}},getLength:function(){return this.q.length-this.at},getPosition:function(){return this.at},toJSArray:function(t){return 1==t.length?[t[0]]:t.toJSArray()}}),wdi.ImageUncompressor=$.spcExtend(wdi.EventObject.prototype,{init:function(t){this.syncAsyncHandler=t.syncAsyncHandler||new wdi.SyncAsyncHandler({isAsync:t.isAsync})},lzHeaderSize:32,extractLzHeader:function(t,e){var i;return{header:e?wdi.LZSS.demarshall_rgb(t):(t="[object Array]"===Object.prototype.toString.call(t)?(i=t.slice(0,this.lzHeaderSize),t.slice(this.lzHeaderSize)):(i=t.subarray(0,this.lzHeaderSize).toJSArray(),t.subarray(this.lzHeaderSize)),wdi.LZSS.demarshall_rgb(i)),imageData:t}},processLz:function(t,e,i,n,r,s){var o,a,c,h;t=(o=this.extractLzHeader(t,e)).imageData,h=o.header.width*o.header.height*4,c=new ArrayBuffer(t.length+16),(a=new Uint8Array(c))[0]=1,a[1]=i,a[2]=o.header.type,a[3]=o.header.top_down;for(var u=0;u<4;u++)a[4+u]=255&h,h>>=8;var l=new DataView(c);l.setUint32(8,o.header.width),l.setUint32(12,o.header.height),a.set(t,16),this.syncAsyncHandler.dispatch(c,r,s)},processQuic:function(t,e,i,n,r){wdi.Debug.log("Quic decode"),buffer=new ArrayBuffer(t.length+4),view=new Uint8Array(buffer),view.set(t,4),view[3]=e?1:0,view[0]=0,this.syncAsyncHandler.dispatch(buffer,n,r)},process:function(t,e,i,n,r,s,o){switch(t.type){case wdi.SpiceImageType.SPICE_IMAGE_TYPE_QUIC:this.processQuic(e,n,r,s,o);break;case wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_RGB:this.processLz(e,i,n,r,s,o)}},dispose:function(){this.syncAsyncHandler.dispose()}}),wdi.ImageUncompressor.getSyncInstance=function(){return syncInstance||(syncInstance=new wdi.ImageUncompressor({isAsync:!1})),syncInstance},wdi.ImageUncompressor.getAsyncInstance=function(){return asyncInstance||(asyncInstance=new wdi.ImageUncompressor({isAsync:!0})),asyncInstance},wdi.SyncAsyncHandler=$.spcExtend(wdi.EventObject.prototype,{init:function(t){this.isAsync=!!t.isAsync,this.isAsync&&(this.asyncWorker=t.asyncWorker||new wdi.AsyncWorker({script:"assets/js/WorkerProcess.min.js"}))},isAsync:null,dispatch:function(t,e,i){if(this.isAsync)this.asyncWorker.run(t,e,i);else{var n=window.workerDispatch(t,this.isAsync);e.call(i,n)}},dispose:function(){this.isAsync&&this.asyncWorker.dispose()}}),wdi.IntegrationBenchmark={benchmarking:!1,startTime:0,timeoutInterval:3e3,timeOutId:void 0,busConnection:void 0,setEndTime:function(){var i=this;this.timeOutId=setTimeout(function(){i.timeOutId=void 0,i.benchmarking=!1;var t=(new Date).getTime()-i.startTime-i.timeoutInterval;i.onEndBenchmarkCallback(t);var e={type:wdi.BUS_TYPES.killApplicationDoNotUseInProductionEver,application:"EXCEL.EXE"};i.busConnection.send(e)},this.timeoutInterval)},setStartTime:function(){void 0!==this.timeOutId&&clearTimeout(this.timeOutId)},launchApp:function(t,e){this.busConnection=t,wdi.IntegrationBenchmark.benchmarking=!0,wdi.IntegrationBenchmark.setStartTime(),this.onEndBenchmarkCallback=e,this.startTime=(new Date).getTime();var i={type:wdi.BUS_TYPES.launchApplication,file:"c:\\Users\\eyeos\\Desktop\\test.xlsx"};this.busConnection.send(i)}},wdi.StuckKeysHandler=$.spcExtend(wdi.EventObject.prototype,{ctrlTimeoutId:null,altTimeoutId:null,shiftTimeoutId:null,shiftKeyPressed:!1,ctrlKeyPressed:!1,altKeyPressed:!1,handleStuckKeys:function(t){if(t)switch(t.keyCode){case 16:this._handleKey("shiftTimeoutId",t.type,16);break;case 17:this._handleKey("ctrlTimeoutId",t.type,17);break;case 18:this._handleKey("altTimeoutId",t.type,18)}},releaseAllKeys:function(){var t;for(t=0;t<300;t++)this.releaseKeyPressed(t)},_handleKey:function(t,e,i){"keydown"===e?this[t]=this._configureTimeout(i):"keyup"===e&&clearTimeout(this[t])},_configureTimeout:function(t){var e=this;return setTimeout(function(){e.releaseKeyPressed(t)},wdi.StuckKeysHandler.defaultTimeout)},releaseKeyPressed:function(t){var e=window.jQuery.Event("keyup");e.which=t,e.keyCode=t,e.charCode=0,e.generated=!0,this.fire("inputStuck",["keyup",[e]])},checkSpecialKey:function(t,e){switch(e){case 16:this.shiftKeyPressed="keydown"===t;break;case 17:this.ctrlKeyPressed="keydown"===t;break;case 18:this.altKeyPressed="keydown"===t}},releaseSpecialKeysPressed:function(){this.shiftKeyPressed&&(this.releaseKeyPressed(16),this.shiftKeyPressed=!1),this.ctrlKeyPressed&&(this.releaseKeyPressed(17),this.ctrlKeyPressed=!1),this.altKeyPressed&&(this.releaseKeyPressed(18),this.altKeyPressed=!1)}}),wdi.StuckKeysHandler.defaultTimeout=2e3,wdi.TimeLapseDetector=$.spcExtend(wdi.EventObject.prototype,{lastTime:null,init:function(t){this.superInit()},startTimer:function(){var i=this;this.lastTime=Date.now(),window.setInterval(function(){var t=Date.now(),e=t-i.lastTime;e>=i.constructor.maxIntervalAllowed&&i.fire("timeLapseDetected",e),i.lastTime=t},wdi.TimeLapseDetector.defaultInterval)},getLastTime:function(){return this.lastTime},setLastTime:function(t){return this.lastTime=t,this}}),wdi.TimeLapseDetector.defaultInterval=5e3,wdi.TimeLapseDetector.maxIntervalAllowed=3*wdi.TimeLapseDetector.defaultInterval,wdi.DisplayRouter=$.spcExtend(wdi.EventObject.prototype,{init:function(t){this.clientGui=t.clientGui,this.rasterEngine=t.rasterEngine||new wdi.RasterEngine({clientGui:this.clientGui}),t.routeList?this.routeList=t.routeList:this._initRoutes()},_initRoutes:function(){this.routeList={},this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_SURFACE_CREATE]=this.rasterEngine.drawCanvas,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_SURFACE_DESTROY]=this.rasterEngine.removeCanvas,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_COPY]=this.rasterEngine.drawImage,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_FILL]=this.rasterEngine.drawFill,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND]=this.rasterEngine.drawAlphaBlend,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_WHITENESS]=this.rasterEngine.drawWhiteness,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLACKNESS]=this.rasterEngine.drawBlackness,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TRANSPARENT]=this.rasterEngine.drawTransparent,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_COPY_BITS]=this.rasterEngine.drawCopyBits,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TEXT]=this.rasterEngine.drawText,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_STROKE]=this.rasterEngine.drawStroke,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ROP3]=this.rasterEngine.drawRop3,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_INVERS]=this.rasterEngine.drawInvers,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_CREATE]=this.rasterEngine.handleStreamCreate,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_DESTROY]=this.rasterEngine.handleStreamDestroy,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_DATA]=this.rasterEngine.handleStreamData,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_CLIP]=this.rasterEngine.handleStreamClip,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLEND]=this.rasterEngine.drawBlend,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_INVAL_LIST]=this.rasterEngine.invalList,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_INVAL_ALL_PALETTES]=this.rasterEngine.invalPalettes,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_MARK]=!1,this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_RESET]=!1},processPacket:function(t){if(t){var e=this.routeList[t.messageType];e&&e.call(this.rasterEngine,t)}else wdi.Debug.log("DisplayProcess processPacket: Skipping empty message...")}}),wdi.RasterEngine=$.spcExtend(wdi.EventObject.prototype,{init:function(t){this.clientGui=t.clientGui},drawCanvas:function(t){return this.clientGui.drawCanvas(t)},removeCanvas:function(t){return this.clientGui.removeCanvas(t)},invalList:function(t){var e=t.args.items,i=null;for(var n in e)i=e[n],wdi.ImageCache.delImage(i.id)},handleStreamCreate:function(t){var e=t.args;e.computedBox=wdi.graphics.getBoxFromSrcArea(e.rect),wdi.Stream.addStream(t.args.id,e)},handleStreamData:function(t){var n,e=t.args.data,r=wdi.Stream.getStream(t.args.id),s=this.clientGui.getContext(r.surface_id),i=wdi.GlobalPool.create("Image");wdi.ExecutionControl.sync=!0,i.onload=function(){URL.revokeObjectURL(n);var t=r.computedBox;if(r.flags&wdi.SpiceStreamFlags.SPICE_STREAM_FLAGS_TOP_DOWN)s.drawImage(this,t.x,t.y,t.width,t.height);else{var e=t.x+this.width/2,i=t.y+this.height/2;s.save(),s.translate(e,i),s.rotate(Math.PI),s.scale(-1,1),s.drawImage(this,t.x-e,t.y-i,t.width,t.height),s.restore()}},i.onerror=function(){URL.revokeObjectURL(n)},n=wdi.SpiceObject.bytesToURI(e),i.src=n},handleStreamClip:function(t){wdi.Stream.clip(t.args.id,t.args.clip)},handleStreamDestroy:function(t){wdi.Stream.deleteStream(t.args.id)},drawRop3:function(t){var f=wdi.graphics.getBoxFromSrcArea(t.args.base.box),g=this.clientGui.getContext(t.args.base.surface_id),m=g.getImageData(f.x,f.y,f.width,f.height),_=this.clientGui,w=t.args.brush,S=t.args.rop_descriptor,y=wdi.graphics.getBoxFromSrcArea(t.args.src_area);wdi.graphics.getImageFromSpice(t.args.src_image.imageDescriptor,t.args.src_image.data,this.clientGui,function(t){if(t){var e=t.getContext("2d").getImageData(y.x,y.y,y.width,y.height),i=e.data,n=wdi.graphics.getNewTmpCanvas(f.width,f.height),r=n.getContext("2d"),s={width:f.width,height:f.height,x:0,y:0};wdi.graphics.setBrush(_,r,w,s,wdi.SpiceRopd.SPICE_ROPD_OP_PUT);var o=r.getImageData(0,0,f.width,f.height),a=o.data,c=m.data,h=(r=(n=wdi.graphics.getNewTmpCanvas(f.width,f.height)).getContext("2d")).createImageData(f.width,f.height),u=h.data;e.width!=o.width||e.width!=m.width||e.height!=o.height||(e.height,m.height);for(var l=c.length,p=wdi.Rop3[S],d=0;d<l;d+=4)u[d]=255&p(a[d],i[d],c[d]),u[d+1]=255&p(a[d+1],i[d+1],c[d+1]),u[d+2]=255&p(a[d+2],i[d+2],c[d+2]),u[d+3]=255;r.putImageData(h,0,0),this.drawClip(n,f,g)}else wdi.Debug.log("Unable to get image!")},this)},drawInvers:function(t){var e=t.args.base,i=wdi.graphics.getBoxFromSrcArea(e.box),n=e.surface_id,r=this.clientGui.getContext(n),s=wdi.graphics.getRect(i,r.canvas),o=wdi.RasterOperation.process(wdi.SpiceRopd.SPICE_ROPD_OP_INVERS,null,s);r.drawImage(o,i.x,i.y,i.width,i.height)},drawStroke:function(t){var e,i,n,r,s=t.args,o=this.clientGui.getContext(t.args.base.surface_id),a=s.brush.color.html_color,c=s.path.num_segments;s.attr.flags&wdi.SpiceLineFlags.SPICE_LINE_FLAGS_STYLED&&wdi.Debug.log("SPICE_LINE_FLAGS_STYLED");for(var h=0;h<c;h++){if((r=s.path.segments[h]).flags&wdi.SpicePathFlags.SPICE_PATH_BEGIN&&(o.beginPath(),o.moveTo(r.points[0].x,r.points[0].y),o.strokeStyle=a,o.lineWidth=1),r.flags&wdi.SpicePathFlags.SPICE_PATH_BEZIER){if((e=r.points.length)%3==0)for(n=0;n<e;n+=3)o.bezierCurveTo(r.points[n].x,r.points[n].y,r.points[n+1].x,r.points[n+1].y,r.points[n+2].x,r.points[n+2].y)}else for(e=r.points.length,n=0;n<e;n++)0==n&&(i=r.points[n]),o.lineTo(r.points[n].x+.5,r.points[n].y+.5);r.flags&wdi.SpicePathFlags.SPICE_PATH_END&&(r.flags&wdi.SpicePathFlags.SPICE_PATH_CLOSE&&o.lineTo(i.x+.5,i.y+.5),o.stroke(),o.closePath())}},drawImage:function(t){var r=t.args,e=r.base,s=e.surface_id,o=r.rop_descriptor,a=(r.scale_mode,wdi.graphics.getBoxFromSrcArea(r.src_area)),c=wdi.graphics.getBoxFromSrcArea(e.box);if(o===wdi.SpiceRopd.SPICE_ROPD_OP_PUT)var h=null;else h=wdi.graphics.getRect(c,this.clientGui.getCanvas(s));window.vdiLoadTest&&void 0===window.firstImage&&(window.firstImage=!0),wdi.graphics.getImageFromSpice(r.image.imageDescriptor,r.image.data,this.clientGui,function(t){if(t){var e;if(window.firstImage)e=t.getContext?t.getContext("2d").getImageData(0,0,t.width,t.height).data.buffer.slice(0):t.data.buffer.slice(0),window.firstImageData=e,window.firstImage=!1;if(t=wdi.graphics.getRect(a,t),a.width!==c.width&&a.height!==c.height){t=wdi.graphics.getImageFromData(t);var i=wdi.graphics.getNewTmpCanvas(c.width,c.height);i.getContext("2d").drawImage(t,0,0,a.width,a.height,0,0,c.width,c.height),t=i}t=wdi.RasterOperation.process(o,t,h);var n=this.clientGui.getContext(s);r.base.clip.type===wdi.SpiceClipType.SPICE_CLIP_TYPE_RECTS&&(t=wdi.graphics.getImageFromData(t)),t instanceof ImageData?n.putImageData(t,c.x,c.y,0,0,c.width,c.height):n.drawImage(t,c.x,c.y,c.width,c.height)}else wdi.Debug.log("Unable to get image!")},this,{opaque:!0,brush:r.brush,raw:!1})},drawClip:function(t,e,i){i.drawImage(t,e.x,e.y,e.width,e.height)},drawFill:function(t){var e=t.args,i=this.clientGui.getContext(e.base.surface_id),n=wdi.graphics.getBoxFromSrcArea(e.base.box),r=e.brush,s=e.rop_descriptor;wdi.graphics.setBrush(this.clientGui,i,r,n,s)},drawCopyBits:function(t){var e=t.args.base,i=e.surface_id,n=t.args.src_position,r=this.clientGui.getContext(i),s=e.box,o=s.right-s.left,a=s.bottom-s.top;r.drawImage(r.canvas,n.x,n.y,o,a,e.box.left,e.box.top,o,a)},drawBlend:function(s){var t=s.args.image.imageDescriptor,o=s.args.base,e=s.args.image.data,a=s.args.base.surface_id,c=s.args.rop_descriptor;s.args.flags;wdi.graphics.getImageFromSpice(t,e,this.clientGui,function(t){if(t){var e=wdi.graphics.getBoxFromSrcArea(s.args.src_area);t=wdi.graphics.getRect(e,t);var i=wdi.graphics.getBoxFromSrcArea(o.box),n=wdi.graphics.getRect(i,this.clientGui.getCanvas(a)),r=wdi.RasterOperation.process(c,t,n);this.clientGui.getCanvas(a).getContext("2d").drawImage(r,i.x,i.y,i.width,i.height)}else wdi.Debug.log("There is no image on Blend")},this)},drawAlphaBlend:function(S){var t=S.args.image.imageDescriptor,y=S.args.base,e=S.args.image.data,b=S.args.base.surface_id,E=S.args.alpha_flags,I=S.args.alpha;wdi.graphics.getImageFromSpice(t,e,this.clientGui,function(t){t||wdi.Debug.log("There is no image on drawAlphaBlend");var e=wdi.graphics.getBoxFromSrcArea(S.args.src_area);t=wdi.graphics.getRect(e,t);var i=wdi.graphics.getBoxFromSrcArea(y.box),n=wdi.graphics.getRect(i,this.clientGui.getCanvas(b));if(e.width!==i.width&&e.height!==i.height){var r=wdi.graphics.getNewTmpCanvas(i.width,i.height);r.getContext("2d").drawImage(t,0,0,e.width,e.height,0,0,i.width,i.height),t=r}for(var s,o,a,c,h,u,l,p=wdi.graphics.getDataFromImage(t).data,d=wdi.graphics.getDataFromImage(n).data,f=p.length-1,g=wdi.graphics.getNewTmpCanvas(i.width,i.height),m=g.getContext("2d").createImageData(i.width,i.height),_=m.data,w=0;w<f;w+=4)s=p[w],a=p[w+1],h=p[w+2],l=E||255===I?p[w+3]:I,o=d[w],c=d[w+1],u=d[w+2],_[w+2]=30<l&&255===I?(_[w]=o*(255-l)/255+s&255,_[w+1]=c*(255-l)/255+a&255,u*(255-l)/255+h&255):(_[w]=(s*l+o*(255-l))/255&255,_[w+1]=(a*l+c*(255-l))/255&255,(h*l+u*(255-l))/255&255),_[w+3]=255;g.getContext("2d").putImageData(m,0,0),this.drawClip(g,i,this.clientGui.getContext(b))},this)},drawWhiteness:function(t){var e=t.args.base,i=this.clientGui.getContext(e.surface_id),n=wdi.graphics.getBoxFromSrcArea(e.box);i.fillStyle="white",i.fillRect(n.x,n.y,n.width,n.height)},drawBlackness:function(t){var e=t.args.base,i=this.clientGui.getContext(e.surface_id),n=wdi.graphics.getBoxFromSrcArea(e.box);i.fillStyle="black",i.fillRect(n.x,n.y,n.width,n.height)},drawTransparent:function(a){var t=a.args.base,c=t.surface_id,h=wdi.graphics.getBoxFromSrcArea(a.args.src_area),u=wdi.graphics.getBoxFromSrcArea(t.box),l=this.clientGui.getContext(c).getImageData(u.x,u.y,u.width,u.height);wdi.graphics.getImageFromSpice(a.args.image.imageDescriptor,a.args.image.data,this.clientGui,function(t){if(t){t=wdi.graphics.getRect(h,t);for(var e=wdi.graphics.getDataFromImage(t).data,i=l.data,n=e.length-1,r=this.clientGui.getContext(c).createImageData(u.width,u.height),s=a.args.transparent_true_color;0<n;)r.data[n]=255,e[n-1]===s.b&&e[n-2]===s.g&&e[n-3]===s.r?(r.data[n-1]=i[n-1],r.data[n-2]=i[n-2],r.data[n-3]=i[n-3]):(r.data[n-1]=e[n-1],r.data[n-2]=e[n-2],r.data[n-3]=e[n-3]),n-=4;var o=wdi.graphics.getImageFromData(r);this.drawClip(o,u,this.clientGui.getContext(c))}else wdi.Debug.log("Unable to get image!")},this)},drawText:function(t){var e=this.clientGui.getContext(t.args.base.surface_id),i=(t.args.base.box,t.args.base.clip),n=t.args,r=n.glyph_string,s=1===r.flags?1:2*r.flags;0!==n.back_mode&&wdi.graphics.drawBackText(this.clientGui,e,n),wdi.graphics.drawString(e,r,s,n.fore_brush,i.type,this)},invalPalettes:function(t){wdi.ImageCache.clearPalettes()}}),wdi.DataLogger={testStartTime:0,testStopTime:0,networkStart:0,networkTotalTime:0,data:{},routeList:{},imageTypes:{},startTimes:[],init:function(){this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_SURFACE_CREATE]="drawCanvas",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_SURFACE_DESTROY]="removeCanvas",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_COPY]="drawImage",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_FILL]="drawFill",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND]="drawAlphaBlend",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_WHITENESS]="drawWhiteness",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLACKNESS]="drawBlackness",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TRANSPARENT]="drawTransparent",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_COPY_BITS]="drawCopyBits",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_TEXT]="drawText",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_STROKE]="drawStroke",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_ROP3]="drawRop3",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_INVERS]="drawInvers",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_CREATE]="handleStreamCreate",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_DESTROY]="handleStreamDestroy",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_DATA]="handleStreamData",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_STREAM_CLIP]="handleStreamClip",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_DRAW_BLEND]="drawBlend",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_INVAL_LIST]="invalList",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_INVAL_ALL_PALETTES]="invalPalettes",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_MARK]="displayMark",this.routeList[wdi.SpiceVars.SPICE_MSG_DISPLAY_RESET]="displayReset",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_BITMAP]="bitmap",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_QUIC]="quic",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_RESERVED]="reserved",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_PNG]="png",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_PLT]="lz_plt",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_LZ_RGB]="lz_rgb",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_GLZ_RGB]="glz_rgb",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_FROM_CACHE]="cache",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_SURFACE]="surface",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_JPEG]="jpeg",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_FROM_CACHE_LOSSLESS]="cache_lossless",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_ZLIB_GLZ_RGB]="zlib_glz_rgb",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_JPEG_ALPHA]="jpeg_alpha",this.imageTypes[wdi.SpiceImageType.SPICE_IMAGE_TYPE_CANVAS]="canvas"},setStartTime:function(t){this.startTimes.push(t)},getSpiceMessageType:function(t,e,i){var n=this.routeList[t.messageType];return"drawImage"===n&&(n+="_"+this.imageTypes[t.args.image.imageDescriptor.type]),(e||"")+n+(i||"")},setNetworkTimeStart:function(t){this.networkStart=this.networkStart||t||Date.now()},logNetworkTime:function(){this.networkStart&&(this.networkTotalTime+=Date.now()-this.networkStart,this.networkStart=0)},startTestSession:function(){this.clear(),wdi.logOperations=!0,this.testStartTime=Date.now()},stopTestSession:function(){this.testStopTime=Date.now(),wdi.logOperations=!1},log:function(t,e,i,n,r,s){var o,a=Date.now();o=i||this.getSpiceMessageType(t,r,s),this.data.hasOwnProperty(o)||(this.data[o]=[]),n&&(e=this.startTimes.shift()),this.data[o].push({start:e,end:a})},clear:function(){this.data={},this.testStartTime=0,this.testStopTime=0,this.networkTotalTime=0,this.networkStart=0},getData:function(){return this.data},getStats:function(){var t,e=this.networkTotalTime,i=0,n=e,r=this.testStopTime-this.testStartTime,s=this.data,o={},a="";for(var c in this.data)if(this.data.hasOwnProperty(c)){i+=(t=s[c]).length;for(var h=o[c]=0;h<t.length;h++)o[c]+=t[h].end-t[h].start;n+=o[c]}a+="Total operations by number:\n";for(var c in s)s.hasOwnProperty(c)&&(a+=c+": "+~~(s[c].length/i*100)+"% ("+s[c].length+")\n");for(c in a+="Total numOperations: "+i+"\n",a+="---------------------------------\n",a+="\n",a+="Total Operations by time:\n",o)o.hasOwnProperty(c)&&(a+=c+": "+~~(o[c]/r*100)+"% ("+o[c]+"ms)\n");var u=r-n;return a+="Idle: "+~~(u/r*100)+"% ("+u+"ms)\n",a+="Network: "+~~(e/r*100)+"% ("+e+"ms)\n","BEGIN OF PERFORMANCE STATS\n"+(a+="Total time: "+r+"ms \n")+"\nEND OF PERFORMANCE STATS\n"}},wdi.DataLogger.init();